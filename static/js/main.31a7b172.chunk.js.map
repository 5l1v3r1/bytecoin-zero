{"version":3,"sources":["css/ReceiveForm.module.css","css/SendForm.module.css","css/Wallet.module.css","css/Avatar.module.css","img/logo.svg","css/History.module.css","lib/walletd.ts","lib/util.ts","lib/loop.ts","img/Arrow_northeast.svg","img/Arrow_southeast.svg","Header.tsx","Avatar.tsx","ReceiveForm.tsx","SendForm.tsx","img/Arrow_southwest.svg","History.tsx","Wallet.tsx","index.tsx","css/Header.module.css"],"names":["module","exports","receiveForm","address","addressIcon","addressOurs","addressData","addressText","share","sendForm","transfer","addressGroup","amountGroup","controls","cancelButton","sendButton","wallet","footer","warning","avatar","__webpack_require__","p","history","historyDay","historyDayHeader","historyDayDate","historyDayRows","tx","txBody","transferLeft","transferRight","transferKind","transferDetails","transferIcon","transferDescription","transferAddress","transferAddressOurs","transferHelp","transferMessage","transferUnlockTime","transferAmount","unlockedTransferContainer","transferAmountLocked","transferAmountUnlocked","transferUnconfirmed","transferSendproof","txDetails","txMetadata","txBlockTime","txHash","txFee","Walletd","bytecoindAddr","Object","classCallCheck","this","n","cn_walletd_start","concat","createClass","key","value","_close","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","abrupt","closeWallet","stop","apply","arguments","req","rpc","method","params","_this","Promise","resolve","reject","json","jsonrpc","id","label","console","time","postJSON","resp","timeEnd","hasOwnProperty","msg","error","code","message","warn","Error","result","_create","_callee2","mnemonic","timestamp","w","_context2","createWallet","creation_timestamp","_x","_x2","_x3","path","JSON","stringify","handle","cn_http_server_call","status","body","parse","err","cn_http_server_cancel","try_","promise","then","data","catch","undefined","groupBy","items","keyGetter","m","Map","forEach","item","group","get","push","set","delay","ms","offset","Date","now","timeout","Math","max","setTimeout","curLocale","localeId","navigator","language","replace","shortLocaleId","slice","locales","formatTimeRelative","t","formatDistance","addSuffix","locale","formatBCN","amount","frac","length","Number","MAX_SAFE_INTEGER","toLocaleString","style","currency","currencyDisplay","minimumFractionDigits","TxKind","TransferKind","WalletContext","React","createContext","digest","_digest","enc","TextEncoder","encode","window","crypto","subtle","bioApprove","_x4","_bioApprove","rpName","userName","userDisplayName","pkCred","storageKey","prevPK","credentials","challenge","opts","_ref","_ref2","pk","_opts","_ref3","_ref4","_pk","_err","PublicKeyCredential","log","isUserVerifyingPlatformAuthenticatorAvailable","sent","localStorage","getItem","Uint8Array","getRandomValues","userVerification","allowCredentials","type","hex","match","map","h","parseInt","publicKey","slicedToArray","t0","name","t1","t2","t3","t4","displayName","t5","t6","t7","alg","t8","authenticatorAttachment","rp","user","pubKeyCredParams","authenticatorSelection","create","setItem","buf","rawId","Array","from","b","toString","padStart","join","setWallet","setStatus","setBalance","setAddresses","setHistory","instance","lastStatusTime","lastStatusReq","state","height","_days","_ref6","_ref7","_status","errStatus","_ref8","_ref9","_balance","errBalance","confHeight","_req","_ref10","_ref11","transferData","_req2","_ref12","_ref13","_transferData","mempoolHeight","unconfirmedHeight","_req3","_ref14","_ref15","_transferData2","_err2","newDays","_ref16","_ref17","walletRecords","_err3","_addresses","walletd","DEFAULT_BYTECOIND_ADDR","DEFAULT_MNEMONIC","TransferState","days","util","MAX_STATUS_DELAY_MS","getStatus","top_known_block_height","top_block_hash","transaction_pool_version","lower_level_error","topBlockHeight","top_block_height","topBlockTime","top_block_timestamp","topBlockHash","topKnownBlockHeight","lowerLevelError","height_or_depth","CONFIRMED_DEPTH","getBalance","balance","spendable","lockedOrUnconfirmed","locked_or_unconfirmed","confirmedHeight","from_height","to_height","forward","desired_transaction_count","TX_HISTORY_SIZE","getTransfers","mergeConfirmedFuture","blocks","reverse","TX_CATCH_UP_BATCH_SIZE","next_from_height","resetUnconfirmedFuture","mergeUnconfirmedFuture","mergeUnconfirmed","getWalletRecords","addresses","records","record","alert","close","finish","CONFIRMATIONS","confirmedDays","unconfirmedDays","mergeFuture","mergeDays","base","confirmed","newBlocksByDateTimestamp","transformBlock","block","header","date","valueOf","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","return","mergedDay","toConsumableArray","transactions","txKind","transfers","allOurs","every","ours","Send","allAmountsNonNeg","Receive","Redistribute","txKindFromTransfers","kind","locked","unlockBlockOrTimestamp","unlock_block_or_timestamp","transactionHash","transaction_hash","groupedTransfers","spend","filter","Spend","send","receive","change","Change","summary","_ref5","addr","addrTransfers","totalAmount","reduce","sum","some","hash","sort","fee","unlockedTransfers","unlocked_transfers","blockMonotonicTime","timestamp_median","startOfDay","_extends","assign","target","i","source","prototype","call","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Arrow_northeast_ref2","react_default","createElement","Arrow_northeast_ref3","transform","points","Arrow_northeast_SvgArrowNortheast","svgRef","props","width","viewBox","xmlSpace","ref","ForwardRef","forwardRef","Arrow_southeast_extends","Arrow_southeast_objectWithoutProperties","Arrow_southeast_objectWithoutPropertiesLoose","DrawerType","Arrow_southeast_ref2","Arrow_southeast_ref3","Arrow_southeast_SvgArrowSoutheast","Arrow_southeast_ForwardRef","Avatar","memo","_useState","useState","_useState2","content","setContent","useEffect","trim","d","arr","bodyColor","eyes","eyesColor","mouth","mouthColor","svg","inner","className","styles","dangerouslySetInnerHTML","__html","ReceiveForm","canShare","title","src_Avatar","role","aria-label","onClick","text","SendForm","useContext","setAddress","_useState3","_useState4","setAmount","_useState5","_useState6","addressValid","setAddressValid","_useState7","_useState8","amountValid","setAmountValid","_useState9","_useState10","sending","setSending","doSend","txResp","errCreate","sendResp","errSend","createTransaction","transaction","any_spend_address","change_address","confirmed_height_or_depth","loop","sendTransaction","binary_transaction","dismiss","htmlFor","placeholder","onChange","e","ok","checkAddress","min","step","am","round","parseFloat","disabled","Status","initializing","syncing","relTime","updateInterval","setRelTime","setInterval","clearInterval","statusIcon","src","logo","alt","syncStatusSummary","syncStatus","ellipsis","syncStatusError","syncStatusBlock","hidden","href","rel","syncStatusTimestamp","Controls","farBehind","wantNoSleep","test","userAgent","noSleep","useRef","NoSleep","settingsOpen","setSettingsOpen","None","drawerType","setDrawerType","nextDrawerType","setNextDrawerType","turnNoSleep","on","info","current","enable","disable","transitionDrawer","transitionNextDrawer","CSSTransition","in","mountOnEnter","classNames","drawer","settings","noSleepGroup","checked","main","balanceAvailable","settingsButton","balancePending","recv","onExited","unmountOnExit","src_ReceiveForm","src_SendForm","Arrow_southwest_extends","Arrow_southwest_objectWithoutProperties","Arrow_southwest_objectWithoutPropertiesLoose","Arrow_southwest_ref2","Arrow_southwest_ref3","Arrow_southwest_SvgArrowSouthwest","Arrow_southwest_ForwardRef","History","TransitionGroup","component","day","Day","toLocaleDateString","weekday","month","year","appear","flatMap","txs","Transaction","Transfer","isUnlock","expanded","setExpanded","detailsAnimating","setDetailsAnimating","kindClass","unconfirmed","onExit","toLocaleTimeString","hour","minute","detailed","genSendproof","isSpend","isSend","isReceive","lockedUntil","sendproof","setSendproof","help","amountClass","createSendproof","AddressIcon","sign","abs","initialStatus","initialBalance","Wallet","_x5","_start","Provider","src_History","ReactDOM","render","src_Wallet","document","getElementById"],"mappings":"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","file":"static/js/main.31a7b172.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"receiveForm\":\"ReceiveForm_receiveForm__3S8Rf\",\"address\":\"ReceiveForm_address__3gtEd\",\"addressIcon\":\"ReceiveForm_addressIcon__3oUN-\",\"addressOurs\":\"ReceiveForm_addressOurs__3ABdK\",\"addressData\":\"ReceiveForm_addressData__3OJnP\",\"addressText\":\"ReceiveForm_addressText__RdNp7\",\"share\":\"ReceiveForm_share__1AbGJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sendForm\":\"SendForm_sendForm__1ZDqj\",\"transfer\":\"SendForm_transfer__21yxz\",\"addressGroup\":\"SendForm_addressGroup__3yNWl\",\"amountGroup\":\"SendForm_amountGroup__1Wz5t\",\"controls\":\"SendForm_controls__dTO2_\",\"cancelButton\":\"SendForm_cancelButton__19jKN\",\"sendButton\":\"SendForm_sendButton__29F46\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wallet\":\"Wallet_wallet__dvihQ\",\"footer\":\"Wallet_footer__cwdHI\",\"warning\":\"Wallet_warning__8NuUe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__1VVPr\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5575295b.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"History_history__3m48Z\",\"historyDay\":\"History_historyDay__MS_O1\",\"historyDayHeader\":\"History_historyDayHeader__QQ7e6\",\"historyDayDate\":\"History_historyDayDate__3yrV-\",\"historyDayRows\":\"History_historyDayRows__16fnV\",\"tx\":\"History_tx__2fPJs\",\"txBody\":\"History_txBody__2Agvz\",\"transfer\":\"History_transfer__2KCQp\",\"transferLeft\":\"History_transferLeft__1M3ZX\",\"transferRight\":\"History_transferRight__291Rd\",\"transferKind\":\"History_transferKind__2_rsq\",\"transferDetails\":\"History_transferDetails__2--cR\",\"transferIcon\":\"History_transferIcon__3CLzM\",\"transferDescription\":\"History_transferDescription__1nIrR\",\"transferAddress\":\"History_transferAddress__13N9Z\",\"transferAddressOurs\":\"History_transferAddressOurs__2QuZW\",\"transferHelp\":\"History_transferHelp__QlVmn\",\"transferMessage\":\"History_transferMessage__3wR4k\",\"transferUnlockTime\":\"History_transferUnlockTime__12h5U\",\"transferAmount\":\"History_transferAmount__3HBML\",\"unlockedTransferContainer\":\"History_unlockedTransferContainer__1xP2t\",\"transferAmountLocked\":\"History_transferAmountLocked__iubWj\",\"transferAmountUnlocked\":\"History_transferAmountUnlocked__2IThK\",\"transferUnconfirmed\":\"History_transferUnconfirmed__2QYx5\",\"transferSendproof\":\"History_transferSendproof__3t8ZJ\",\"addressIcon\":\"History_addressIcon__3IPXL\",\"txDetails\":\"History_txDetails__2fFz9\",\"txMetadata\":\"History_txMetadata__26edo\",\"txBlockTime\":\"History_txBlockTime__34qQ0\",\"txHash\":\"History_txHash__3VJ4U\",\"txFee\":\"History_txFee__2frgk\"};","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\ntype ModuleHTTPHandle = number;\n\ndeclare function cn_walletd_start(argv: string[]): void;\ndeclare function cn_http_server_call(method: string, path: string, body: string, callback: (status: number, body: string) => void): ModuleHTTPHandle;\ndeclare function cn_http_server_cancel(handle: ModuleHTTPHandle): void;\n\ninterface IWalletCreateReq {\n  readonly mnemonic: string;\n  readonly creation_timestamp: number;\n}\n\nexport class Walletd {\n  private n: number = 0;\n\n  private constructor(bytecoindAddr: string) {\n    cn_walletd_start([`--bytecoind-remote-address=${bytecoindAddr}`]);\n  }\n\n  static async create(bytecoindAddr: string, mnemonic: string, timestamp: number): Promise<Walletd> {\n    let w = new Walletd(bytecoindAddr);\n\n    await w.createWallet({\n      mnemonic: mnemonic,\n      creation_timestamp: timestamp,\n    });\n\n    return w;\n  }\n\n  async close(): Promise<void> {\n    return this.closeWallet();\n  }\n\n  private createWallet(req: IWalletCreateReq): Promise<void> {\n    return this.rpc('ext_create_wallet', req);\n  }\n\n  private closeWallet(): Promise<void> {\n    return this.rpc('ext_close_wallet', {});\n  }\n\n  getStatus(req: IGetStatusReq): Promise<IGetStatusResp> {\n    return this.rpc('get_status', req);\n  }\n\n  getBalance(req: IGetBalanceReq): Promise<IGetBalanceResp> {\n    return this.rpc('get_balance', req);\n  }\n\n  getWalletRecords(req: IGetWalletRecordsReq): Promise<IGetWalletRecordsResp> {\n    return this.rpc('get_wallet_records', req);\n  }\n\n  getTransfers(req: IGetTransfersReq): Promise<IGetTransfersResp> {\n    return this.rpc('get_transfers', req);\n  }\n\n  createSendproof(req: ICreateSendproofReq): Promise<ICreateSendproofResp> {\n    return this.rpc('create_sendproof', req);\n  }\n\n  createTransaction(req: ICreateTransactionReq): Promise<ICreateTransactionResp> {\n    return this.rpc('create_transaction', req);\n  }\n\n  sendTransaction(req: ISendTransactionReq): Promise<ISendTransactionResp> {\n    return this.rpc('send_transaction', req);\n  }\n\n  private rpc<TReq, TResp>(method: string, params: TReq): Promise<TResp> {\n    return new Promise((resolve, reject) => {\n      const json = {\n        jsonrpc: '2.0',\n        id: '0',\n        method: method,\n        params: params,\n      };\n\n      const label = `RPC ${method} #${this.n}`;\n      this.n++;\n\n      console.time(label);\n      Walletd.postJSON('/json_rpc', json, (resp) => {\n        console.timeEnd(label);\n\n        if (resp.hasOwnProperty('error')) {\n          const msg = `JSON-RPC error #${resp.error.code}: ${resp.error.message}`;\n          console.warn(msg);\n          reject(new Error(msg));\n        } else {\n          resolve(resp.result)\n        }\n      }, reject);\n    });\n  }\n\n  private static postJSON(path: string, json: any, resolve: (value: any) => void, reject: (error: any) => void) {\n    const params = JSON.stringify(json);\n    const handle = cn_http_server_call('POST', path, params, (status: number, body: string) => {\n      if (status === 200) {\n        try {\n          const result = JSON.parse(body);\n          resolve(result);\n        } catch (err) {\n          console.warn('JSON-RPC reply parsing failed', err);\n          reject(err);\n        }\n      } else {\n        const msg = `JSON-RPC HTTP status ${status}`;\n        console.warn(msg);\n        reject(new Error(msg));\n      }\n    });\n\n    return () => {\n      cn_http_server_cancel(handle);\n    };\n  }\n}\n\nexport interface ITransfer {\n  readonly address: string;\n  readonly amount: number;\n  readonly message?: string;\n  readonly unlock_block_or_timestamp?: number;\n  readonly ours?: boolean;\n  readonly locked?: boolean;\n  readonly transaction_hash?: string;\n}\n\nexport interface INewTransaction {\n  readonly unlock_block_or_timestamp?: number;\n  readonly transfers?: ITransfer[];\n  readonly payment_id?: string;\n  readonly anonymity?: number;\n}\n\nexport interface ICreatedTransaction extends INewTransaction {\n  readonly hash: string;\n  readonly fee: number;\n  readonly public_key: string;\n  readonly extra: string;\n  readonly coinbase: boolean;\n  readonly amount: number;\n}\n\nexport interface IBlockTransaction extends ICreatedTransaction {\n  readonly block_height: number;\n  readonly block_hash: string;\n  readonly timestamp: number;\n  readonly size?: number;\n}\n\nexport interface IBlockHeader {\n  readonly major_version: number;\n  readonly minor_version: number;\n  readonly timestamp: number;\n  readonly previous_block_hash: string;\n  readonly nonce: number;\n  readonly binary_nonce: string;\n\n  readonly height: number;\n  readonly hash: string;\n  readonly reward: number;\n  readonly cumulative_difficulty: number;\n  readonly cumulative_difficulty_hi: number;\n  readonly difficulty: number;\n  readonly base_reward: number;\n  readonly block_size: number;\n  readonly transactions_size: number;\n  readonly already_generated_key_outputs: number;\n  readonly already_generated_coins: number;\n  readonly already_generated_transactions: number;\n  readonly size_median: number;\n  readonly effective_size_median: number;\n  readonly timestamp_median: number;\n  readonly block_capacity_vote: number;\n  readonly block_capacity_vote_median: number;\n  readonly transactions_fee: number;\n}\n\nexport interface IBlock {\n  readonly header: IBlockHeader;\n  readonly transactions?: IBlockTransaction[];\n  readonly unlocked_transfers?: ITransfer[];\n}\n\nexport interface IBalance {\n  readonly spendable: number;\n  readonly spendable_dust: number;\n  readonly locked_or_unconfirmed: number;\n  readonly spendable_outputs: number;\n  readonly spendable_dust_outputs: number;\n  readonly locked_or_unconfirmed_outputs: number;\n}\n\nexport interface IGetStatusReq {\n  top_block_hash?: string;\n  transaction_pool_version?: number;\n  incoming_peer_count?: number;\n  outgoing_peer_count?: number;\n  lower_level_error?: string;\n}\n\nexport interface IGetStatusResp {\n  readonly top_block_hash: string;\n  readonly top_block_difficulty: number;\n  readonly top_block_cumulative_difficulty: number;\n  readonly top_block_height: number;\n  readonly top_block_timestamp: number;\n  readonly top_block_timestamp_median: number;\n  readonly top_known_block_height: number;\n  readonly transaction_pool_version: number;\n  readonly incoming_peer_count: number;\n  readonly outgoing_peer_count: number;\n  readonly lower_level_error: string;\n  readonly next_block_effective_median_size: number;\n  readonly recommended_fee_per_byte: number;\n  readonly recommended_max_transaction_size: number;\n}\n\nexport interface IGetBalanceReq {\n  address?: string;\n  height_or_depth?: number;\n}\n\nexport interface IGetBalanceResp extends IBalance {\n}\n\nexport interface IWalletRecord {\n  readonly address: string;\n  readonly label: string;\n  readonly index: number;\n  readonly public_spend_key: string;\n  readonly secret_spend_key?: string;\n}\n\nexport interface IGetWalletRecordsReq {\n  need_secrets?: boolean;\n  create?: boolean;\n  index?: number;\n  count?: number;\n}\n\nexport interface IGetWalletRecordsResp {\n  readonly records: IWalletRecord[];\n  readonly total_count: number;\n}\n\nexport interface IGetTransfersReq {\n  address?: string;\n  from_height: number;\n  to_height: number;\n  forward: boolean;\n  desired_transaction_count: number;\n}\n\nexport interface IGetTransfersResp {\n  readonly blocks?: IBlock[];\n  readonly next_from_height: number;\n  readonly next_to_height: number;\n}\n\nexport interface ICreateSendproofReq {\n  transaction_hash: string;\n  address: string;\n  message?: string;\n}\n\nexport interface ICreateSendproofResp {\n  readonly sendproof: string;\n}\n\nexport interface ICreateTransactionReq {\n  transaction: INewTransaction;\n  spend_addresses?: string[];\n  any_spend_address: boolean;\n  change_address: string;\n  confirmed_height_or_depth: number;\n  fee_per_byte?: number;\n  optimization?: string;\n  subtract_fee_from_amount?: boolean;\n}\n\nexport interface ICreateTransactionResp {\n  readonly transaction: ICreatedTransaction;\n  readonly binary_transaction: string;\n}\n\nexport interface ISendTransactionReq {\n  binary_transaction: string;\n}\n\nexport interface ISendTransactionResp {\n}\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport {formatDistance} from 'date-fns';\nimport * as locales from 'date-fns/locale';\nimport * as walletd from './walletd';\n\nexport function try_<T, U = Error> (promise: Promise<T>): Promise<[T | undefined, U | null]> {\n  return promise\n    .then<[T, null]>((data: T) => [data, null])\n    .catch<[undefined, U]>((err: U) => [undefined, err])\n  ;\n}\n\nexport function buf2hex(buf: ArrayBuffer): string {\n  return Array.from(new Uint8Array(buf)).map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function hex2buf(hex: string): ArrayBuffer {\n  return new Uint8Array((hex.match(/[\\da-f]{2}/gi) || []).map((h) => parseInt(h, 16)));\n}\n\nexport function groupBy<T, U>(items: T[], keyGetter: (item: T) => U): Map<U, T[]> {\n  const m = new Map();\n\n  items.forEach((item) => {\n    const key = keyGetter(item);\n\n    const group = m.get(key);\n    if (!group) {\n      m.set(key, [item]);\n    } else {\n      group.push(item);\n    }\n  });\n\n  return m;\n}\n\nexport function isMobile(): boolean {\n  return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n}\n\nexport function delay(ms: number, prev?: number): Promise<number> {\n  return new Promise((resolve) => {\n    const offset = prev !== undefined ? Date.now() - prev : 0;\n    const timeout = Math.max(ms - offset, 1);\n\n    setTimeout(() => resolve(Date.now()), timeout)\n  });\n}\n\nexport function formatDateTime(d: Date): string {\n  return d.toLocaleString(navigator.language, {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n}\n\nexport function formatDate(d: Date): string {\n  return d.toLocaleDateString(navigator.language, {\n    weekday: 'short',\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  });\n}\n\nexport function formatTime(d: Date): string {\n  return d.toLocaleTimeString(navigator.language, {\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n}\n\nfunction curLocale() {\n  const localeId = navigator.language.replace('-', '');\n  const shortLocaleId = localeId.slice(0, 2);\n  return (locales as any)[localeId] || (locales as any)[shortLocaleId] || locales.enUS;\n}\n\nexport function formatTimeRelative(t: Date): string {\n  return formatDistance(t, Date.now(), {\n    addSuffix: true,\n    locale: curLocale(),\n  });\n}\n\nexport function formatNumber(n: number): string {\n  return n.toLocaleString(navigator.language);\n}\n\nexport function formatBCN(amount: number, frac: number = 2): string {\n  if (amount >= Number.MAX_SAFE_INTEGER) {\n    console.warn(`amount ${amount} too big to be exactly represented in JavaScript`);\n  }\n\n  return (amount / 1e8).toLocaleString(navigator.language, {\n    style: 'currency',\n    currency: 'BCN',\n    currencyDisplay: 'code',\n    minimumFractionDigits: frac,\n  });\n}\n\nexport function formatBCNDelta(amount: number, frac: number = 2, showSign: boolean = false): string {\n  const sign = amount > 0 ? '+' : (amount < 0 ? '−' : '');\n\n  return ((!showSign || sign === '') ? '' : (sign + '\\u202F')) + formatBCN(Math.abs(amount), frac);\n}\n\nexport function useRelativeTime(t: Date, updateInterval: number = 15 * 1000) {\n  const [relTime, setRelTime] = useState(formatTimeRelative(t));\n\n  useEffect(() => {\n    setRelTime(formatTimeRelative(t));\n\n    const handle = setInterval(() => {\n      setRelTime(formatTimeRelative(t));\n    }, updateInterval);\n\n    return () => {\n      clearInterval(handle);\n    };\n  }, [t, updateInterval]);\n\n  return relTime;\n}\n\nexport const WalletContext = React.createContext<walletd.Walletd | null>(null);\n\nexport async function digest(message: string): Promise<ArrayBuffer> {\n  const enc = new TextEncoder();\n  const data = enc.encode(message);\n  return window.crypto.subtle.digest('SHA-256', data);\n}\n\nexport async function bioApprove(rpName: string, userName: string, userDisplayName: string): Promise<boolean> {\n  const pkCred = (window as any).PublicKeyCredential;\n  if (!pkCred) {\n    console.log(`skipping authentication for ${userName}@${rpName} due to lacking platform support (public key credentials)`);\n    return true;\n  }\n\n  const available = await pkCred.isUserVerifyingPlatformAuthenticatorAvailable();\n  if (!available) {\n    console.log(`skipping authentication for ${userName}@${rpName} due to lacking platform support (user verification)`);\n    return true;\n  }\n\n  const storageKey = `bio-approve ${userName}@${rpName}`;\n  const timeout = 30 * 1000;\n  const prevPK = window.localStorage.getItem(storageKey) || '';\n  const credentials = (window.navigator as any).credentials;\n\n  const challenge = new Uint8Array(32);\n  window.crypto.getRandomValues(challenge);\n\n  if (prevPK) {\n    const opts = {\n      challenge,\n      timeout,\n      userVerification: 'required',\n      allowCredentials: [{\n        type: 'public-key',\n        id: hex2buf(prevPK),\n      }],\n    };\n\n    const [pk, err] = await try_(credentials.get({ publicKey: opts }));\n    if (err !== null) {\n      console.warn(`authentication for ${userName}@${rpName} failed: ${err}`);\n      return false;\n    }\n\n    console.log(`successfully authenticated ${userName}@${rpName} with ${pk.id}`);\n\n    return true;\n  } else {\n    const opts = {\n      rp: {\n        name: rpName,\n      },\n      user: {\n        id: await digest(`${userName}@${rpName}`),\n        name: userName,\n        displayName: userDisplayName,\n      },\n      challenge,\n      timeout,\n      userVerification: 'required',\n      pubKeyCredParams: [{\n        type: 'public-key',\n        alg: -7, // ECDSA\n      }],\n      authenticatorSelection: {\n        authenticatorAttachment: 'platform',\n        userVerification: 'required',\n      },\n    };\n\n    const [pk, err] = await try_(credentials.create({ publicKey: opts }));\n    if (err !== null) {\n      console.warn(`first authentication for ${userName}@${rpName} failed: ${err}`);\n      return false;\n    }\n\n    window.localStorage.setItem(storageKey, buf2hex(pk.rawId));\n    console.log(`successfully authenticated ${userName}@${rpName} for the first time with ${pk.id}`);\n\n    return true;\n  }\n}\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport {startOfDay} from 'date-fns';\nimport * as walletd from './walletd';\nimport * as util from './util';\n\nexport interface IStatus {\n  readonly topBlockHeight: number;\n  readonly topBlockTime: Date;\n  readonly topBlockHash: string;\n  readonly topKnownBlockHeight: number;\n  readonly lowerLevelError: string;\n}\n\nexport interface IBalance {\n  readonly spendable: number;\n  readonly lockedOrUnconfirmed: number;\n}\n\nexport interface IAddress {\n  readonly address: string;\n  readonly label: string;\n}\n\nexport interface IBlockHeader {\n  readonly confirmed: boolean;\n  readonly hash: string;\n  readonly height: number;\n  readonly time: Date;\n  readonly date: Date; // guaranteed to be monotonically increasing, unlike time\n}\n\nexport interface IBlock {\n  readonly header: IBlockHeader;\n  readonly transactions: ITransaction[];\n  readonly unlockedTransfers: ITransfer[];\n}\n\nexport interface IDay {\n  readonly date: Date;\n  readonly blocks: IBlock[];\n}\n\nexport enum TxKind {\n  Send         = 0, // outgoing, balance delta <= 0\n  Receive      = 1, // incoming, balance delta >= 0\n  Redistribute = 2, // internal, balance delta == 0\n}\n\nexport interface ITransaction {\n  readonly time: Date;\n  readonly kind: TxKind;\n  readonly hash: string;\n  readonly fee: number;\n  readonly summary: ITransfer[];\n  readonly transfers: IGroupedTransfers;\n}\n\nexport interface IGroupedTransfers {\n  readonly spend: ITransfer[];\n  readonly send: ITransfer[];\n  readonly receive: ITransfer[];\n  readonly change: ITransfer[];\n}\n\nexport enum TransferKind {\n  Spend   = 0, //  ours, amount <  0\n  Send    = 1, // !ours, amount >= 0 (only in TxKind.Send)\n  Receive = 2, //  ours, amount >= 0\n  Change  = 3, //  ours, amount >  0 (only in TxKind.Send)\n}\n\nexport interface ITransfer {\n  readonly kind: TransferKind;\n  readonly address: string;\n  readonly amount: number;\n  readonly message: string;\n  readonly ours: boolean;\n  readonly locked: boolean;\n  readonly unlockBlockOrTimestamp: number;\n  readonly transactionHash: string;\n}\n\nexport const MAX_BLOCK_NUMBER = 500000000;\n\nexport async function start(\n  setWallet: (wallet: walletd.Walletd) => void,\n  setStatus: (status: IStatus) => void,\n  setBalance: (balance: IBalance) => void,\n  setAddresses: (addresses: IAddress[]) => void,\n  setHistory: (days: IDay[]) => void,\n) {\n  const instance = await walletd.Walletd.create(DEFAULT_BYTECOIND_ADDR, DEFAULT_MNEMONIC, 0);\n\n  try {\n    setWallet(instance);\n\n    let lastStatusTime = Date.now();\n    let lastStatusReq: walletd.IGetStatusReq = {};\n\n    let state = new TransferState();\n    let height = 0;\n    let days: IDay[] = [];\n\nsyncLoop:\n    while (height >= 0) {\n      lastStatusTime = await util.delay(MAX_STATUS_DELAY_MS, lastStatusTime);\n\n      const [status, errStatus] = await util.try_(instance.getStatus(lastStatusReq));\n      if (status === undefined) {\n        console.warn('failed to get status', lastStatusReq, errStatus);\n        continue;\n      } else if (status.top_known_block_height === 0) {\n        continue;\n      }\n\n      lastStatusReq = {\n        top_block_hash: status.top_block_hash,\n        transaction_pool_version: status.transaction_pool_version,\n        lower_level_error: status.lower_level_error,\n      };\n\n      setStatus({\n        topBlockHeight: status.top_block_height,\n        topBlockTime: new Date(status.top_block_timestamp * 1000),\n        topBlockHash: status.top_block_hash,\n        topKnownBlockHeight: status.top_known_block_height,\n        lowerLevelError: status.lower_level_error,\n      });\n\n      const req = {\n        height_or_depth: CONFIRMED_DEPTH, // do not use confirmedHeight() here to avoid an error during fast sync\n      };\n      const [balance, errBalance] = await util.try_(instance.getBalance(req));\n      if (balance === undefined) {\n        console.warn('failed to get balance', req, errBalance);\n        continue;\n      }\n      setBalance({\n        spendable: balance.spendable,\n        lockedOrUnconfirmed: balance.locked_or_unconfirmed,\n      });\n\n      const confHeight = confirmedHeight(status.top_block_height);\n\n      if (height === 0 && confHeight !== 0) {\n        const req = {\n          from_height: height,\n          to_height: confHeight,\n          forward: false,\n          desired_transaction_count: TX_HISTORY_SIZE,\n        };\n        const [transferData, err] = await util.try_(instance.getTransfers(req));\n        if (transferData === undefined) {\n          console.warn('failed to get history transfers', req, err);\n          continue;\n        }\n\n        state.mergeConfirmedFuture((transferData.blocks || []).reverse());\n        height = confHeight;\n      } else {\n        while (height < confHeight) {\n          const req = {\n            from_height: height,\n            to_height: confHeight,\n            forward: true,\n            desired_transaction_count: TX_CATCH_UP_BATCH_SIZE,\n          };\n\n          const [transferData, err] = await util.try_(instance.getTransfers(req));\n          if (transferData === undefined) {\n            console.warn('failed to get transfers', req, err);\n            continue syncLoop;\n          }\n\n          state.mergeConfirmedFuture(transferData.blocks || []);\n          height = transferData.next_from_height;\n        }\n\n        state.resetUnconfirmedFuture();\n        const mempoolHeight = status.top_block_height + 1;\n        let unconfirmedHeight = height;\n\n        while (unconfirmedHeight < mempoolHeight) {\n          const req = {\n            from_height: unconfirmedHeight,\n            to_height: mempoolHeight,\n            forward: true,\n            desired_transaction_count: TX_CATCH_UP_BATCH_SIZE,\n          };\n\n          const [transferData, err] = await util.try_(instance.getTransfers(req));\n          if (transferData === undefined) {\n            console.warn('failed to get future transfers', req, err);\n            continue syncLoop;\n          }\n\n          state.mergeUnconfirmedFuture(transferData.blocks || []);\n          unconfirmedHeight = transferData.next_from_height;\n        }\n      }\n\n      const newDays = state.mergeUnconfirmed();\n      if (newDays !== days) {\n        days = newDays;\n        setHistory(days);\n\n        const [walletRecords, err] = await util.try_(instance.getWalletRecords({}));\n        if (walletRecords === undefined) {\n          console.warn('failed to get wallet records', err);\n          continue;\n        }\n\n        const addresses = walletRecords.records.map((record): IAddress => {\n          return {\n            address: record.address,\n            label: record.label,\n          };\n        });\n\n        setAddresses(addresses);\n      }\n    }\n  } catch (err) {\n    alert(`Unexpected error: ${err}\\n\\nPlease try reloading this page.`);\n  } finally {\n    await instance.close();\n  }\n}\n\nconst DEFAULT_MNEMONIC = 'autumn actor sleep rebel fee scissors garage try claim miss maple ribbon alarm size above kite mass gain render grow dice decrease subway calm';\nconst DEFAULT_BYTECOIND_ADDR = 'https://node02.bytecoin.org:8091';\n\nconst MAX_STATUS_DELAY_MS = 100;\n\nconst CONFIRMATIONS = 3;\nexport const CONFIRMED_DEPTH = -CONFIRMATIONS - 1; // TODO is -1 right here?\nconst TX_HISTORY_SIZE = 1000;                      // TODO incremental history loading\nconst TX_CATCH_UP_BATCH_SIZE = 100;\n\nfunction confirmedHeight(height: number): number {\n  return Math.max(height - CONFIRMATIONS, 0);\n}\n\nclass TransferState {\n  private confirmedDays:   IDay[] = []; // reverse chronological order\n  private unconfirmedDays: IDay[] = []; // reverse chronological order\n\n  mergeConfirmedFuture(blocks: walletd.IBlock[]): void {\n    this.confirmedDays = TransferState.mergeFuture(this.confirmedDays, blocks, true);\n  }\n\n  resetUnconfirmedFuture(): void {\n    this.unconfirmedDays = [];\n  }\n\n  mergeUnconfirmedFuture(blocks: walletd.IBlock[]): void {\n    this.unconfirmedDays = TransferState.mergeFuture(this.unconfirmedDays, blocks, false);\n  }\n\n  mergeUnconfirmed(): IDay[] {\n    return TransferState.mergeDays(this.confirmedDays, this.unconfirmedDays);\n  }\n\n  private static mergeFuture(base: IDay[], blocks: walletd.IBlock[], confirmed: boolean): IDay[] {\n    const newBlocks = blocks.map((b) => TransferState.transformBlock(b, confirmed)).reverse();\n    const newBlocksByDateTimestamp = util.groupBy(newBlocks, (block) => block.header.date.valueOf());\n\n    const newDays: IDay[] = [];\n    for (const [timestamp, blocks] of newBlocksByDateTimestamp) {\n      newDays.push({\n        date: new Date(timestamp),\n        blocks,\n      });\n    }\n\n    return TransferState.mergeDays(base, newDays);\n  }\n\n  private static mergeDays(base: IDay[], newDays: IDay[]): IDay[] {\n    if (newDays.length === 0) {\n      return base;\n    }\n\n    if (base.length > 0 && newDays[newDays.length-1].date.valueOf() === base[0].date.valueOf()) {\n      const mergedDay: IDay = {\n        date: newDays[newDays.length-1].date,\n        blocks: [...newDays[newDays.length-1].blocks,  ...base[0].blocks],\n      };\n\n      return [...newDays.slice(0, newDays.length-1), mergedDay, ...base.slice(1)];\n    } else {\n      return [...newDays, ...base];\n    }\n  }\n\n  private static transformBlock(block: walletd.IBlock, confirmed: boolean): IBlock {\n    const transactions: ITransaction[] = (block.transactions || []).map((tx) => {\n      const txKind = txKindFromTransfers(tx.transfers || []);\n\n      const transfers: ITransfer[] = (tx.transfers || []).map((transfer) => ({\n        kind: transferKind(transfer.amount, transfer.ours || false, txKind),\n        address: transfer.address,\n        amount: transfer.amount,\n        message: transfer.message || '',\n        ours: transfer.ours || false,\n        locked: transfer.locked || false,\n        unlockBlockOrTimestamp: transfer.unlock_block_or_timestamp || 0,\n        transactionHash: transfer.transaction_hash || '',\n      }));\n\n      const groupedTransfers = {\n        spend: transfers.filter((t) => t.kind === TransferKind.Spend),\n        send: transfers.filter((t) => t.kind === TransferKind.Send),\n        receive: transfers.filter((t) => t.kind === TransferKind.Receive),\n        change: transfers.filter((t) => t.kind === TransferKind.Change),\n      };\n\n      let summary: ITransfer[] = [];\n      switch (txKind) {\n        case TxKind.Send:\n          summary = groupedTransfers.send;\n          break;\n        case TxKind.Receive:\n          summary = groupedTransfers.receive;\n          break;\n        case TxKind.Redistribute:\n          const transfersByAddr = [...util.groupBy(transfers, (t) => t.address)];\n          summary = transfersByAddr.map(([addr, addrTransfers]): ITransfer => {\n            const totalAmount = addrTransfers.reduce((sum, t) => sum + t.amount, 0);\n            return {\n              kind: totalAmount < 0 ? TransferKind.Spend : TransferKind.Receive,\n              address: addr,\n              amount: totalAmount,\n              message: addrTransfers.map((t) => t.message).filter((msg) => msg.length > 0).join(' | '),\n              ours: true,\n              locked: addrTransfers.some((t) => t.locked),\n              unlockBlockOrTimestamp: 0,\n              transactionHash: tx.hash,\n            };\n          }).sort((t1, t2) => t1.kind - t2.kind);\n          break;\n      }\n\n      return {\n        time: new Date(tx.timestamp * 1000),\n        kind: txKind,\n        hash: tx.hash,\n        fee: tx.fee,\n        summary,\n        transfers: groupedTransfers,\n      };\n    });\n\n    const unlockedTransfers: ITransfer[] = (block.unlocked_transfers || []).map((transfer) => {\n      return {\n        kind: transferKind(transfer.amount, transfer.ours || false, TxKind.Receive),\n        address: transfer.address,\n        amount: transfer.amount,\n        message: transfer.message || '',\n        ours: transfer.ours || false,\n        locked: false,\n        unlockBlockOrTimestamp: 0,\n        transactionHash: transfer.transaction_hash || '',\n      };\n    });\n\n    // mempool \"block\" header can omit timestamps\n    const blockMonotonicTime = block.header.timestamp_median > 0 ?\n      new Date(block.header.timestamp_median * 1000) :\n      transactions.length > 0 ? transactions[0].time : new Date();\n\n    return {\n      header: {\n        confirmed,\n        hash: block.header.hash,\n        height: block.header.height,\n        time: new Date(block.header.timestamp * 1000),\n        date: startOfDay(blockMonotonicTime),\n      },\n      transactions: transactions.reverse(),\n      unlockedTransfers: unlockedTransfers.reverse(),\n    };\n  }\n}\n\nfunction txKindFromTransfers(transfers: {ours?: boolean, amount: number}[]): TxKind {\n  const allOurs = transfers.every((t) => t.ours || false);\n  if (!allOurs) {\n    return TxKind.Send;\n  }\n\n  const allAmountsNonNeg = transfers.every((t) => t.amount >= 0);\n  if (allOurs && allAmountsNonNeg) {\n    return TxKind.Receive;\n  }\n\n  return TxKind.Redistribute;\n}\n\nfunction transferKind(amount: number, ours: boolean, txKind: TxKind): TransferKind {\n  if (!ours) {\n    return TransferKind.Send;\n  }\n\n  if (amount < 0) {\n    return TransferKind.Spend;\n  }\n\n  if (txKind === TxKind.Send) {\n    return TransferKind.Change;\n  }\n\n  return TransferKind.Receive;\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(-0.9526244,0.9526244,-0.9526244,-0.9526244,1074.1836,-92.790252)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowNortheast = function SvgArrowNortheast(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowNortheast, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_northeast.1f67c9d1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(-0.9526244,-0.9526244,0.9526244,-0.9526244,726.74361,805.41781)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowSoutheast = function SvgArrowSoutheast(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowSoutheast, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_southeast.9f3f690f.svg\";\nexport { ForwardRef as ReactComponent };","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useRef, useState} from 'react';\nimport {CSSTransition} from 'react-transition-group';\nimport * as loop from './lib/loop';\nimport * as util from './lib/util';\nimport {ReactComponent as ArrowNE} from './img/Arrow_northeast.svg';\nimport {ReactComponent as ArrowSE} from './img/Arrow_southeast.svg';\nimport ReceiveForm from './ReceiveForm';\nimport SendForm from './SendForm';\nimport logo from './img/logo.svg';\nimport styles from './css/Header.module.css';\n\n// @ts-ignore\nimport NoSleep from 'nosleep.js';\n\nexport const Status = React.memo((props: loop.IStatus) => {\n  const initializing = props.topBlockHash === '';\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n\n  const relTime = util.useRelativeTime(props.topBlockTime);\n\n  return (\n    <div className={styles.status}>\n      <div className={styles.statusIcon}>\n        <img src={logo} alt='Bytecoin'/>\n      </div>\n      <div className={styles.syncStatusSummary}>\n        <div className={styles.syncStatus}>\n          {initializing ? 'Initializing wallet…' :\n              syncing ? <span className={styles.ellipsis}>Syncing</span> : 'Synced'\n          }\n        </div>\n        {props.lowerLevelError ?\n          <div className={styles.syncStatusError}>\n            <code>\n              {props.lowerLevelError} {/*TODO localize*/}\n            </code>\n          </div>\n          :\n          <div className={styles.syncStatusBlock} hidden={props.topBlockHeight === 0}>\n            <a href={`https://explorer.bytecoin.org/block?hash=${props.topBlockHash}`} target='_blank' rel='noreferrer noopener'>\n              {util.formatNumber(props.topBlockHeight)}\n            </a> <span className={styles.syncStatusTimestamp}>\n              {relTime}\n            </span>\n          </div>\n        }\n      </div>\n    </div>\n  );\n});\n\nenum DrawerType {\n  None,\n  Receive,\n  Send,\n}\n\nconst dayMS = 60 * 60 * 24 * 1000;\n\nexport const Controls = React.memo((props: loop.IStatus & loop.IBalance & {addresses: loop.IAddress[]}) => {\n  const initializing = props.topBlockHash === '';\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n  const farBehind = (new Date()).valueOf() - props.topBlockTime.valueOf() > 2 * dayMS;\n  const wantNoSleep = syncing && farBehind && util.isMobile();\n\n  const noSleep = useRef(new NoSleep());\n  const [settingsOpen, setSettingsOpen] = useState(false);\n  const [drawerType, setDrawerType] = useState(DrawerType.None);\n  const [nextDrawerType, setNextDrawerType] = useState(DrawerType.None);\n\n  useEffect(() => {\n    if (!wantNoSleep) {\n      turnNoSleep(false);\n    }\n  }, [wantNoSleep]);\n\n  const turnNoSleep = (on: boolean) => {\n    console.info(`no sleep: ${on}`);\n\n    if (on) {\n      noSleep.current.enable();\n    } else {\n      noSleep.current.disable();\n    }\n  };\n\n  const transitionDrawer = (t: DrawerType) => {\n    if (drawerType === DrawerType.None) {\n      setDrawerType(t);\n    } else if (drawerType === t) {\n      setDrawerType(DrawerType.None);\n    } else {\n      setDrawerType(DrawerType.None);\n      setNextDrawerType(t);\n    }\n  };\n\n  const transitionNextDrawer = () => {\n    if (nextDrawerType !== DrawerType.None) {\n      setDrawerType(nextDrawerType);\n      setNextDrawerType(DrawerType.None);\n    }\n  };\n\n  return (\n    <div className={styles.controls}>\n      <CSSTransition in={settingsOpen} mountOnEnter={true} timeout={300} classNames='balance-drawer-form-up'>\n        <div className={styles.drawer}>\n          <div className={styles.settings}>\n            <div className={styles.noSleepGroup}>\n              <input type='checkbox' id='noSleep' onChange={(e) => turnNoSleep(e.target.checked)}/> <label htmlFor='noSleep'>Prevent device sleep during sync</label>\n            </div>\n\n            <button className={styles.closeWallet}>\n              Close wallet\n            </button>\n          </div>\n        </div>\n      </CSSTransition>\n      <div className={styles.main}>\n        <div className={styles.balance}>\n          <div className={styles.balanceAvailable}>\n            {util.formatBCN(props.spendable)}\n            {!initializing && <button className={`${styles.settingsButton} link-like`} onClick={() => setSettingsOpen(!settingsOpen)}>\n                &#9881;&#65039;\n            </button>}\n          </div>\n          <div className={styles.balancePending}>\n            {!syncing && props.lockedOrUnconfirmed > 0 && `${util.formatBCN(props.lockedOrUnconfirmed, 3)} locked or unconfirmed`}\n          </div>\n        </div>\n        <div className={styles.recv} hidden={initializing}>\n          <button className={`link-like ${drawerType === DrawerType.Receive ? 'active' : ''}`} onClick={() => transitionDrawer(DrawerType.Receive)}>\n            <ArrowSE/> Receive\n          </button>\n        </div>\n        <div className={styles.send} hidden={initializing}>\n          <button className={`link-like ${drawerType === DrawerType.Send ? 'active' : ''}`} onClick={() => transitionDrawer(DrawerType.Send)} disabled={syncing}>\n            <ArrowNE/> Send\n          </button>\n        </div>\n      </div>\n      <CSSTransition in={drawerType === DrawerType.Receive} onExited={transitionNextDrawer} unmountOnExit={true} timeout={300} classNames='balance-drawer-form-down'>\n        <div className={styles.drawer}>\n          <ReceiveForm addresses={props.addresses} dismiss={() => setDrawerType(DrawerType.None)}/>\n        </div>\n      </CSSTransition>\n      <CSSTransition in={drawerType === DrawerType.Send} onExited={transitionNextDrawer} unmountOnExit={true} timeout={300} classNames='balance-drawer-form-down'>\n        <div className={styles.drawer}>\n          <SendForm dismiss={() => setDrawerType(DrawerType.None)}/>\n        </div>\n      </CSSTransition>\n    </div>\n  );\n});\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport * as util from './lib/util';\nimport styles from './css/Avatar.module.css';\n\n// @ts-ignore\nimport {inner} from 'gridy-avatars';\n\nconst Avatar = React.memo((props: {message: string}) => {\n  const [content, setContent] = useState('');\n\n  useEffect(() => {\n    util.digest(props.message.trim()).then((d) => {\n      const arr = new Uint8Array(d);\n\n      const body       = arr[0] & 7;\n      const bodyColor  = arr[1] & 7;\n      const eyes       = arr[2] & 7;\n      const eyesColor  = arr[3] & 7;\n      const mouth      = arr[4] & 7;\n      const mouthColor = arr[5] & 7;\n\n      const svg = [\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"isolation:isolate\" viewBox=\"0 0 24 24\" version=\"1.1\">',\n        inner(`${body}${bodyColor}${eyes}${eyesColor}${mouth}${mouthColor}`),\n        '</svg>'\n      ].join('');\n\n      setContent(svg);\n    });\n  }, [props.message]);\n\n  return (\n    <div className={styles.avatar} dangerouslySetInnerHTML={{__html: content}}>\n    </div>\n  );\n});\n\nexport default Avatar;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React from 'react';\nimport styles from './css/ReceiveForm.module.css';\nimport * as loop from './lib/loop';\nimport Avatar from './Avatar';\n\nconst ReceiveForm = React.memo((props: {addresses: loop.IAddress[], dismiss: () => void}) => {\n  const canShare = (navigator as any).share !== undefined;\n  const share = (addr: string) => {\n    (navigator as any).share({\n      text: addr,\n    });\n  };\n\n  return (\n    <div className={styles.receiveForm}>\n      {\n        props.addresses.map((addr) =>\n          <div key={addr.address} className={styles.address}>\n            <div className={styles.addressIcon} title={addr.address}>\n              <Avatar message={addr.address}/>\n            </div>\n            <div className={styles.addressData}>\n              <div className={styles.addressText}>\n                <span className={styles.addressOurs} role='img' aria-label='wallet address'>&#128091;</span> {addr.address}\n              </div>\n            </div>\n            { canShare &&\n              <div className={styles.share}>\n                <button className='link-like' onClick={() => share(addr.address)}>\n                  Share\n                </button>\n              </div>\n            }\n          </div>\n        )\n      }\n    </div>\n  );\n});\n\nexport default ReceiveForm;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useContext, useState} from 'react';\nimport {checkAddress} from '@bcndev/bytecoin';\nimport styles from './css/SendForm.module.css';\nimport * as util from './lib/util';\nimport * as loop from './lib/loop';\n\n// TODO: messages\n// TODO: multiple recipients\n// TODO: custom fee\nconst SendForm = React.memo((props: {dismiss: () => void}) => {\n  const wallet = useContext(util.WalletContext);\n\n  const [address, setAddress] = useState('');\n  const [amount, setAmount] = useState(0);\n  const [addressValid, setAddressValid] = useState(false);\n  const [amountValid, setAmountValid] = useState(false);\n  const [sending, setSending] = useState(false);\n\n  const send = async () => {\n    setSending(true);\n    await doSend();\n    setSending(false);\n  };\n\n  const doSend = async () => {\n    // TODO derive username from wallet\n    const ok = await util.bioApprove('Bytecoin Zero', 'bytecoin-zero-user', 'Bytecoin Zero User');\n    if (!ok || !wallet) {\n      return;\n    }\n\n    const [txResp, errCreate] = await util.try_(wallet.createTransaction({\n      transaction: {\n        transfers: [{\n          address,\n          amount,\n        }],\n      },\n      any_spend_address: true,\n      change_address: '',\n      confirmed_height_or_depth: loop.CONFIRMED_DEPTH,\n    }));\n    if (txResp === undefined) {\n      alert(`Failed to create transaction: ${errCreate}`);\n      return;\n    }\n\n    const [sendResp, errSend] = await util.try_(wallet.sendTransaction({\n      binary_transaction: txResp.binary_transaction,\n    }));\n    if (sendResp === undefined) {\n      alert(`Failed to send transaction: ${errSend}`);\n      return;\n    }\n\n    props.dismiss();\n  };\n\n  return (\n    <div className={styles.sendForm}>\n      <div className={styles.transfer}>\n        <div className={styles.addressGroup}>\n          <label htmlFor='toAddress'>Address</label>\n          <input className={`${addressValid ? 'valid' : 'invalid'}`}\n                 type='text'\n                 placeholder='bcnZ… or 2…'\n                 id='toAddress'\n                 onChange={(e) => {\n                   const addr = e.target.value;\n                   const ok = checkAddress(addr);\n                   setAddressValid(ok);\n                   if (ok) {\n                     setAddress(addr);\n                   }\n                 }}\n          />\n        </div>\n        <div className={styles.amountGroup}>\n          <label htmlFor='toAmount'>Amount</label>\n          <input className={`${amountValid ? 'valid' : 'invalid'}`}\n                 type='number'\n                 placeholder='0'\n                 id='toAmount'\n                 min='0.01'\n                 step='0.01'\n                 onChange={(e) => {\n                   const am = Math.round(parseFloat(e.target.value) * 1e8); // TODO: exact calculation\n                   const ok = am > 0; // TODO: check upper bound\n                   setAmountValid(ok);\n                   if (ok) {\n                     setAmount(am);\n                   }\n                 }}\n          />\n        </div>\n      </div>\n      <div className={styles.controls}>\n        <button className={styles.cancelButton} onClick={props.dismiss}>\n          Cancel\n        </button>\n        <button className={styles.sendButton} onClick={send} disabled={sending || !addressValid || !amountValid}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n});\n\nexport default SendForm;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(0.9526244,-0.9526244,0.9526244,0.9526244,-171.46445,457.97782)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowSouthwest = function SvgArrowSouthwest(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowSouthwest, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_southwest.781cea01.svg\";\nexport { ForwardRef as ReactComponent };","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState, useContext, useEffect} from 'react';\nimport {CSSTransition, TransitionGroup} from 'react-transition-group';\nimport {flatMap} from 'lodash';\nimport * as loop from './lib/loop';\nimport * as util from './lib/util';\nimport Avatar from './Avatar';\nimport {ReactComponent as ArrowNE} from './img/Arrow_northeast.svg';\nimport {ReactComponent as ArrowSE} from './img/Arrow_southeast.svg';\nimport {ReactComponent as ArrowSW} from './img/Arrow_southwest.svg';\nimport styles from './css/History.module.css';\nimport {formatDateTime, formatTime} from './lib/util';\n\nconst History = React.memo((props: {history: loop.IDay[]}) => {\n  const {history} = props;\n\n  return (\n    <div className={styles.history}>\n      <TransitionGroup component={null}>\n        {history.map((day) =>\n          <CSSTransition key={day.date.valueOf()} timeout={1000} classNames='history-day'>\n            <Day {...day} />\n          </CSSTransition>\n        )}\n      </TransitionGroup>\n    </div>\n  );\n});\n\nconst Day = React.memo((props: loop.IDay) => {\n  return (\n    <div className={styles.historyDay}>\n      <div className={styles.historyDayHeader}>\n        <div className={styles.historyDayDate}>\n          {util.formatDate(props.date)}\n        </div>\n      </div>\n\n      <div className={styles.historyDayRows}>\n        <TransitionGroup component={null} appear={true}>\n        {\n          flatMap(props.blocks, (block) => {\n            const txs = block.transactions.map((transaction) =>\n              <CSSTransition key={transaction.hash} timeout={1000} classNames='history-row'>\n                <Transaction {...transaction} confirmed={block.header.confirmed}/>\n              </CSSTransition>\n            );\n\n            const transfers = block.unlockedTransfers.map((transfer) =>\n              <CSSTransition key={`${transfer.amount}#${transfer.address}@${transfer.transactionHash}`} timeout={1000} classNames='history-row'>\n                <div className={styles.unlockedTransferContainer}>\n                  <Transfer {...transfer} isUnlock={true}/>\n                </div>\n              </CSSTransition>\n            );\n\n            return [...txs, ...transfers];\n          })\n        }\n        </TransitionGroup>\n      </div>\n    </div>\n  );\n});\n\nconst Transaction = React.memo((props: loop.ITransaction & {confirmed: boolean}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [detailsAnimating, setDetailsAnimating] = useState(false);\n\n  const kindClass = loop.TxKind[props.kind];\n\n  return (\n    <div className={`${styles.tx} ${kindClass}`}>\n      <div className={`${styles.txBody} ${expanded ? 'expanded' : ''} ${detailsAnimating ? 'details-animating' : ''} ${props.confirmed ? 'confirmed' : 'unconfirmed'}`} onClick={() => setExpanded(!expanded)}>\n        {\n          props.summary.map((t) =>\n            <Transfer key={t.address} {...t} unconfirmed={!props.confirmed}/>\n          )\n        }\n      </div>\n\n      <CSSTransition in={expanded} unmountOnExit={true} timeout={300} classNames='history-tx-details' onExit={() => setDetailsAnimating(true)} onExited={() => setDetailsAnimating(false)}>\n        <div className={styles.txDetails}>\n          <div className={styles.txMetadata}>\n            <span className={styles.txBlockTime}>\n              {formatTime(props.time)}\n            </span>\n            <a className={styles.txHash} href={`https://explorer.bytecoin.org/tx?hash=${props.hash}`} title={props.hash} target='_blank' rel='noreferrer noopener'>\n              {props.hash}\n            </a>\n            <span className={styles.txFee}>\n              Fee {util.formatBCN(props.fee, 3)}\n            </span>\n          </div>\n          {\n            props.transfers.spend.map((t) =>\n              <Transfer key={`spend-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.send.map((t) =>\n              <Transfer key={`send-${t.address}`} detailed={true} genSendproof={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.receive.map((t) =>\n              <Transfer key={`receive-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.change.map((t) =>\n              <Transfer key={`change-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n        </div>\n      </CSSTransition>\n    </div>\n  );\n});\n\nconst Transfer = React.memo((props: loop.ITransfer & {unconfirmed?: boolean, genSendproof?: boolean, detailed?: boolean, isUnlock?: boolean}) => {\n  const isSpend = props.kind === loop.TransferKind.Spend;\n  const isSend = props.kind === loop.TransferKind.Send;\n  const isReceive = props.kind === loop.TransferKind.Receive;\n\n  const lockedUntil = props.unlockBlockOrTimestamp > 0 ?\n    props.unlockBlockOrTimestamp > loop.MAX_BLOCK_NUMBER ?\n      `Locked until ${formatDateTime(new Date(props.unlockBlockOrTimestamp * 1000))}` :\n      `Locked until block #${props.unlockBlockOrTimestamp}` : '';\n\n  const [sendproof, setSendproof] = useState('');\n  const wallet = useContext(util.WalletContext);\n\n  let help = props.isUnlock ? 'Unlocked transfer' : isReceive ? 'Received to' : isSend ? 'Sent to' : isSpend ? 'Sent from' : 'Change';\n  if (props.locked) {\n    help += ' (locked)'\n  }\n\n  const amountClass = props.isUnlock ? `Unlocked` : props.locked ? 'Locked' : '';\n\n  useEffect(() => {\n    if (!props.genSendproof || !wallet) {\n      return;\n    }\n\n    wallet.createSendproof({\n      transaction_hash: props.transactionHash,\n      address: props.address,\n    }).then((req) => {\n      setSendproof(req.sendproof)\n    });\n  }, [wallet, props.genSendproof, props.transactionHash, props.address]);\n\n  return (\n    <div className={styles.transfer}>\n      <div className={styles.transferLeft}>\n        <div className={styles.transferKind}>\n          {isReceive ? <ArrowSE/> : isSend ? <ArrowNE/> : isSpend ? <ArrowSW/> : <ArrowSE/>}\n        </div>\n        <div className={styles.transferDetails}>\n          <div className={styles.transferIcon}>\n            <AddressIcon address={props.address}/>\n          </div>\n          <div className={styles.transferDescription}>\n            <div className={styles.transferHelp}>\n              {help}\n            </div>\n            <div className={styles.transferAddress}>\n              {props.ours && <span className={styles.transferAddressOurs} role='img' aria-label='wallet address'>&#128091;</span>} {props.address}\n            </div>\n\n            <div className={styles.transferMessage}>\n              {props.message && <q>{props.message}</q>}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className={styles.transferRight}>\n        {\n          props.detailed && props.locked &&\n            <div className={styles.transferUnlockTime}>\n              {lockedUntil}\n            </div>\n        }\n        <div className={`${styles.transferAmount} ${amountClass}`}>\n          {util.formatBCNDelta(props.amount, props.detailed ? 3 : 2, props.ours)}\n          {props.locked && <span className={styles.transferAmountLocked}>&#128274;</span>}\n          {props.isUnlock && <span className={styles.transferAmountUnlocked}>&#128275;</span>}\n          {props.unconfirmed && <span className={styles.transferUnconfirmed}>&#9203;</span>}\n        </div>\n        {\n          sendproof &&\n          <div className={styles.transferSendproof}>\n            <a href={`https://explorer.bytecoin.org/search?search=${sendproof}`} title='See sendproof in Bytecoin Explorer' target='_blank' rel='noreferrer noopener'>\n              Sendproof\n            </a>\n          </div>\n        }\n      </div>\n    </div>\n  );\n});\n\nconst AddressIcon = React.memo((props: {address: string}) => {\n  return (\n    <div className={styles.addressIcon} title={props.address}>\n      <Avatar message={props.address}/>\n    </div>\n  );\n});\n\nexport default History;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport * as walletd from './lib/walletd';\nimport * as loop from './lib/loop';\nimport * as util from './lib/util';\nimport {Status, Controls} from './Header';\nimport History from './History';\nimport styles from './css/Wallet.module.css';\n\nconst initialStatus: loop.IStatus = {\n  topBlockHeight: 0,\n  topBlockTime: new Date(0), // TODO use date just before wallet creation timestamp\n  topBlockHash: '',\n  topKnownBlockHeight: 0,\n  lowerLevelError: '',\n};\n\nconst initialBalance: loop.IBalance = {\n  spendable: 0,\n  lockedOrUnconfirmed: 0,\n};\n\nconst Wallet = React.memo(() => {\n  const [wallet, setWallet] = useState<walletd.Walletd | null>(null);\n  const [status, setStatus] = useState<loop.IStatus>(initialStatus);\n  const [balance, setBalance] = useState<loop.IBalance>(initialBalance);\n  const [addresses, setAddresses] = useState<loop.IAddress[]>([]);\n  const [history, setHistory] = useState<loop.IDay[]>([]);\n\n  useEffect(() => {\n    loop.start(setWallet, setStatus, setBalance, setAddresses, setHistory).then(() => {console.error('THE END')});\n  }, []);\n\n  return (\n    <div className={`${styles.wallet} container`}>\n      <util.WalletContext.Provider value={wallet}>\n        <Status {...status}/>\n        <Controls {...status} {...balance} addresses={addresses}/>\n\n        <History history={history}/>\n\n        <div className={styles.footer}>\n          © 2019 The Bytecoin developers · <a href='https://github.com/bcndev/bytecoin-zero/blob/master/doc/index.md' target='_blank' rel='noreferrer noopener'>Documentation</a>\n        </div>\n        <div className={styles.warning}>\n          Unstable development version. For testing only.\n        </div>\n      </util.WalletContext.Provider>\n    </div>\n  );\n});\n\nexport default Wallet;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport './css/bootstrap-reboot.css';\nimport './css/index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Wallet from './Wallet';\n\nReactDOM.render(<Wallet />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"Header_status__3GdbX\",\"statusIcon\":\"Header_statusIcon__3l5kg\",\"syncStatusSummary\":\"Header_syncStatusSummary__13R4E\",\"syncStatus\":\"Header_syncStatus__2bShQ\",\"syncStatusBlock\":\"Header_syncStatusBlock__QGm0w\",\"syncStatusTimestamp\":\"Header_syncStatusTimestamp__3CIJb\",\"syncStatusError\":\"Header_syncStatusError__D0k4Z\",\"ellipsis\":\"Header_ellipsis__18Dt5\",\"controls\":\"Header_controls__c8U9c\",\"main\":\"Header_main__3Ub_W\",\"balance\":\"Header_balance__1vbiD\",\"recv\":\"Header_recv__2kAPq\",\"send\":\"Header_send__vE6ox\",\"settingsButton\":\"Header_settingsButton__2x0bg\",\"balanceAvailable\":\"Header_balanceAvailable__3OcSq\",\"balancePending\":\"Header_balancePending__OPnZB\",\"drawer\":\"Header_drawer__6QQ6R\",\"settings\":\"Header_settings__fwyj8\",\"noSleepGroup\":\"Header_noSleepGroup__xKP52\",\"closeWallet\":\"Header_closeWallet__cU-hB\"};"],"sourceRoot":""}