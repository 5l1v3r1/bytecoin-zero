{"version":3,"sources":["lib/util.ts","lib/loop.ts","OpenForm.tsx","lib/walletd.ts","img/Arrow_northeast.svg","img/Arrow_southeast.svg","Header.tsx","Avatar.tsx","ReceiveForm.tsx","SendForm.tsx","img/Arrow_southwest.svg","History.tsx","Wallet.tsx","App.tsx","index.tsx","css/OpenForm.module.css","css/ReceiveForm.module.css","css/SendForm.module.css","img/logo.svg","css/App.module.css","css/History.module.css","css/Avatar.module.css","css/Wallet.module.css","css/Header.module.css"],"names":["try_","promise","then","data","catch","err","undefined","groupBy","items","keyGetter","m","Map","forEach","item","key","group","get","push","set","delay","ms","prev","Promise","resolve","offset","Date","now","timeout","Math","max","setTimeout","curLocale","localeId","navigator","language","replace","shortLocaleId","slice","locales","formatTimeRelative","t","formatDistance","addSuffix","locale","formatBCN","amount","frac","arguments","length","Number","MAX_SAFE_INTEGER","console","warn","concat","toLocaleString","style","currency","currencyDisplay","minimumFractionDigits","WalletContext","React","createContext","digest","_x","_digest","apply","this","_callee","message","enc","regenerator_default","a","wrap","_context","next","TextEncoder","encode","abrupt","window","crypto","subtle","stop","bioApprove","_x2","_x3","_x4","_bioApprove","_callee2","rpName","userName","userDisplayName","pkCred","storageKey","prevPK","credentials","challenge","opts","_ref","_ref2","pk","_opts","_ref3","_ref4","_pk","_err","_context2","PublicKeyCredential","log","isUserVerifyingPlatformAuthenticatorAvailable","sent","localStorage","getItem","Uint8Array","getRandomValues","userVerification","allowCredentials","type","id","hex","match","map","h","parseInt","publicKey","Object","slicedToArray","t0","name","t1","t2","t3","t4","displayName","t5","t6","t7","alg","t8","authenticatorAttachment","rp","user","pubKeyCredParams","authenticatorSelection","create","setItem","buf","rawId","Array","from","b","toString","padStart","join","TxKind","TransferKind","DEFAULT_MNEMONIC","OpenForm","memo","props","firstGen","useRef","_useState","useState","_useState2","description","setDescription","_useState3","_useState4","genDescription","setGenDescription","_useState5","_useState6","descriptionValid","setDescriptionValid","_useState7","_useState8","opening","setOpening","open","asyncToGenerator","mark","doOpen","desc","util","trim","toLowerCase","onOpen","react_default","createElement","className","styles","openForm","logo","src","alt","body","descGroup","placeholder","rows","autoCapitalize","autoComplete","spellCheck","maxLength","value","onChange","e","target","ok","validateMnemonic","englishWordlist","controls","genButton","onClick","current","generateMnemonic","openButton","disabled","Walletd","bytecoindAddr","classCallCheck","n","closed","cn_walletd_start","createClass","_close","closeWallet","req","rpc","method","params","_this","reject","json","jsonrpc","label","time","postJSON","resp","timeEnd","hasOwnProperty","msg","error","code","Error","result","_create","mnemonic","timestamp","w","info","createWallet","creation_timestamp","path","JSON","stringify","handle","cn_http_server_call","status","parse","cn_http_server_cancel","isWalletClosedErr","indexOf","isNew","setWallet","setStatus","setBalance","setAddresses","setHistory","_ref6","_ref7","instance","lastStatusTime","lastStatusReq","state","height","_days","_ref8","_ref9","_status","errStatus","_ref10","_ref11","_balance","errBalance","confHeight","_req","_ref12","_ref13","transferData","_req2","_ref14","_ref15","_transferData","_err2","mempoolHeight","unconfirmedHeight","_req3","_ref16","_ref17","_transferData2","_err3","newDays","_ref18","_ref19","walletRecords","_err4","_addresses","round","valueOf","walletd","DEFAULT_BYTECOIND_ADDR","alert","TransferState","days","MAX_STATUS_DELAY_MS","getStatus","top_known_block_height","top_block_hash","transaction_pool_version","lower_level_error","topBlockHeight","top_block_height","topBlockTime","top_block_timestamp","topBlockHash","topKnownBlockHeight","lowerLevelError","height_or_depth","CONFIRMED_DEPTH","getBalance","balance","spendable","lockedOrUnconfirmed","locked_or_unconfirmed","confirmedHeight","from_height","to_height","forward","desired_transaction_count","TX_HISTORY_SIZE","getTransfers","mergeConfirmedFuture","blocks","reverse","TX_CATCH_UP_BATCH_SIZE","next_from_height","resetUnconfirmedFuture","mergeUnconfirmedFuture","mergeUnconfirmed","getWalletRecords","addresses","records","record","address","close","finish","CONFIRMATIONS","confirmedDays","unconfirmedDays","mergeFuture","mergeDays","base","confirmed","newBlocksByDateTimestamp","transformBlock","block","header","date","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","return","mergedDay","toConsumableArray","transactions","tx","txKind","transfers","allOurs","every","ours","Send","allAmountsNonNeg","Receive","Redistribute","txKindFromTransfers","transfer","kind","transferKind","locked","unlockBlockOrTimestamp","unlock_block_or_timestamp","transactionHash","transaction_hash","groupedTransfers","spend","filter","Spend","send","receive","change","Change","summary","_ref5","addr","addrTransfers","totalAmount","reduce","sum","some","hash","sort","fee","unlockedTransfers","unlocked_transfers","blockMonotonicTime","timestamp_median","startOfDay","_extends","assign","i","source","prototype","call","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","Arrow_northeast_ref2","Arrow_northeast_ref3","transform","points","Arrow_northeast_SvgArrowNortheast","svgRef","width","viewBox","xmlSpace","ref","ForwardRef","forwardRef","__webpack_require__","p","Arrow_southeast_extends","Arrow_southeast_objectWithoutProperties","Arrow_southeast_objectWithoutPropertiesLoose","DrawerType","Arrow_southeast_ref2","Arrow_southeast_ref3","Arrow_southeast_SvgArrowSoutheast","Arrow_southeast_ForwardRef","Avatar","content","setContent","useEffect","d","arr","bodyColor","eyes","eyesColor","mouth","mouthColor","svg","inner","avatar","dangerouslySetInnerHTML","__html","ReceiveForm","canShare","share","receiveForm","addressIcon","title","src_Avatar","addressData","addressText","addressOurs","role","aria-label","text","SendForm","wallet","useContext","setAddress","setAmount","addressValid","setAddressValid","amountValid","setAmountValid","_useState9","_useState10","sending","setSending","doSend","txResp","errCreate","sendResp","errSend","createTransaction","transaction","any_spend_address","change_address","confirmed_height_or_depth","loop","sendTransaction","binary_transaction","dismiss","sendForm","addressGroup","htmlFor","checkAddress","amountGroup","min","step","am","parseFloat","cancelButton","sendButton","Status","initializing","syncing","relTime","updateInterval","setRelTime","setInterval","clearInterval","statusIcon","syncStatusSummary","syncStatus","ellipsis","syncStatusError","syncStatusBlock","hidden","href","rel","syncStatusTimestamp","Controls","farBehind","wantNoSleep","test","userAgent","noSleep","NoSleep","settingsOpen","setSettingsOpen","None","drawerType","setDrawerType","nextDrawerType","setNextDrawerType","turnNoSleep","on","enable","disable","transitionDrawer","transitionNextDrawer","CSSTransition","in","mountOnEnter","classNames","drawer","settings","noSleepGroup","checked","main","balanceAvailable","settingsButton","balancePending","recv","onExited","unmountOnExit","src_ReceiveForm","src_SendForm","Arrow_southwest_extends","Arrow_southwest_objectWithoutProperties","Arrow_southwest_objectWithoutPropertiesLoose","Arrow_southwest_ref2","Arrow_southwest_ref3","Arrow_southwest_SvgArrowSouthwest","Arrow_southwest_ForwardRef","History","history","TransitionGroup","component","day","Day","historyDay","historyDayHeader","historyDayDate","toLocaleDateString","weekday","month","year","historyDayRows","appear","flatMap","txs","Transaction","unlockedTransferContainer","Transfer","isUnlock","expanded","setExpanded","detailsAnimating","setDetailsAnimating","kindClass","txBody","unconfirmed","onExit","txDetails","txMetadata","txBlockTime","toLocaleTimeString","hour","minute","txHash","txFee","detailed","genSendproof","isSpend","isSend","isReceive","lockedUntil","sendproof","setSendproof","help","amountClass","createSendproof","transferLeft","transferDetails","transferIcon","AddressIcon","transferDescription","transferHelp","transferAddress","transferAddressOurs","transferMessage","transferRight","transferUnlockTime","transferAmount","sign","abs","transferAmountLocked","transferAmountUnlocked","transferUnconfirmed","transferSendproof","initialStatus","initialBalance","Wallet","_x5","_x6","_x7","_start","onClose","Provider","src_History","App","walletDescription","setWalletDescription","walletNew","setWalletNew","app","SwitchTransition","Fragment","src_OpenForm","src_Wallet","footer","warning","ReactDOM","render","src_App","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.ed3ffca6.chunk.js","sourcesContent":["// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport {formatDistance} from 'date-fns';\nimport * as locales from 'date-fns/locale';\nimport * as walletd from './walletd';\n\nexport function try_<T, U = Error> (promise: Promise<T>): Promise<[T | undefined, U | null]> {\n  return promise\n    .then<[T, null]>((data: T) => [data, null])\n    .catch<[undefined, U]>((err: U) => [undefined, err])\n  ;\n}\n\nexport function buf2hex(buf: ArrayBuffer): string {\n  return Array.from(new Uint8Array(buf)).map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function hex2buf(hex: string): ArrayBuffer {\n  return new Uint8Array((hex.match(/[\\da-f]{2}/gi) || []).map((h) => parseInt(h, 16)));\n}\n\nexport function groupBy<T, U>(items: T[], keyGetter: (item: T) => U): Map<U, T[]> {\n  const m = new Map();\n\n  items.forEach((item) => {\n    const key = keyGetter(item);\n\n    const group = m.get(key);\n    if (!group) {\n      m.set(key, [item]);\n    } else {\n      group.push(item);\n    }\n  });\n\n  return m;\n}\n\nexport function isMobile(): boolean {\n  return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n}\n\nexport function delay(ms: number, prev?: number): Promise<number> {\n  return new Promise((resolve) => {\n    const offset = prev !== undefined ? Date.now() - prev : 0;\n    const timeout = Math.max(ms - offset, 1);\n\n    setTimeout(() => resolve(Date.now()), timeout)\n  });\n}\n\nexport function formatDateTime(d: Date): string {\n  return d.toLocaleString(navigator.language, {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n}\n\nexport function formatDate(d: Date): string {\n  return d.toLocaleDateString(navigator.language, {\n    weekday: 'short',\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  });\n}\n\nexport function formatTime(d: Date): string {\n  return d.toLocaleTimeString(navigator.language, {\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n}\n\nfunction curLocale() {\n  const localeId = navigator.language.replace('-', '');\n  const shortLocaleId = localeId.slice(0, 2);\n  return (locales as any)[localeId] || (locales as any)[shortLocaleId] || locales.enUS;\n}\n\nexport function formatTimeRelative(t: Date): string {\n  return formatDistance(t, Date.now(), {\n    addSuffix: true,\n    locale: curLocale(),\n  });\n}\n\nexport function formatNumber(n: number): string {\n  return n.toLocaleString(navigator.language);\n}\n\nexport function formatBCN(amount: number, frac: number = 2): string {\n  if (amount >= Number.MAX_SAFE_INTEGER) {\n    console.warn(`amount ${amount} too big to be exactly represented in JavaScript`);\n  }\n\n  return (amount / 1e8).toLocaleString(navigator.language, {\n    style: 'currency',\n    currency: 'BCN',\n    currencyDisplay: 'code',\n    minimumFractionDigits: frac,\n  });\n}\n\nexport function formatBCNDelta(amount: number, frac: number = 2, showSign: boolean = false): string {\n  const sign = amount > 0 ? '+' : (amount < 0 ? '−' : '');\n\n  return ((!showSign || sign === '') ? '' : (sign + '\\u202F')) + formatBCN(Math.abs(amount), frac);\n}\n\nexport function useRelativeTime(t: Date, updateInterval: number = 15 * 1000) {\n  const [relTime, setRelTime] = useState(formatTimeRelative(t));\n\n  useEffect(() => {\n    setRelTime(formatTimeRelative(t));\n\n    const handle = setInterval(() => {\n      setRelTime(formatTimeRelative(t));\n    }, updateInterval);\n\n    return () => {\n      clearInterval(handle);\n    };\n  }, [t, updateInterval]);\n\n  return relTime;\n}\n\nexport const WalletContext = React.createContext<walletd.Walletd | null>(null);\n\nexport async function digest(message: string): Promise<ArrayBuffer> {\n  const enc = new TextEncoder();\n  const data = enc.encode(message);\n  return window.crypto.subtle.digest('SHA-256', data);\n}\n\nexport async function bioApprove(rpName: string, userName: string, userDisplayName: string): Promise<boolean> {\n  const pkCred = (window as any).PublicKeyCredential;\n  if (!pkCred) {\n    console.log(`skipping authentication for ${userName}@${rpName} due to lacking platform support (public key credentials)`);\n    return true;\n  }\n\n  const available = await pkCred.isUserVerifyingPlatformAuthenticatorAvailable();\n  if (!available) {\n    console.log(`skipping authentication for ${userName}@${rpName} due to lacking platform support (user verification)`);\n    return true;\n  }\n\n  const storageKey = `bio-approve ${userName}@${rpName}`;\n  const timeout = 30 * 1000;\n  const prevPK = window.localStorage.getItem(storageKey) || '';\n  const credentials = (window.navigator as any).credentials;\n\n  const challenge = new Uint8Array(32);\n  window.crypto.getRandomValues(challenge);\n\n  if (prevPK) {\n    const opts = {\n      challenge,\n      timeout,\n      userVerification: 'required',\n      allowCredentials: [{\n        type: 'public-key',\n        id: hex2buf(prevPK),\n      }],\n    };\n\n    const [pk, err] = await try_(credentials.get({ publicKey: opts }));\n    if (err !== null) {\n      console.warn(`authentication for ${userName}@${rpName} failed: ${err}`);\n      return false;\n    }\n\n    console.log(`successfully authenticated ${userName}@${rpName} with ${pk.id}`);\n\n    return true;\n  } else {\n    const opts = {\n      rp: {\n        name: rpName,\n      },\n      user: {\n        id: await digest(`${userName}@${rpName}`),\n        name: userName,\n        displayName: userDisplayName,\n      },\n      challenge,\n      timeout,\n      userVerification: 'required',\n      pubKeyCredParams: [{\n        type: 'public-key',\n        alg: -7, // ECDSA\n      }],\n      authenticatorSelection: {\n        authenticatorAttachment: 'platform',\n        userVerification: 'required',\n      },\n    };\n\n    const [pk, err] = await try_(credentials.create({ publicKey: opts }));\n    if (err !== null) {\n      console.warn(`first authentication for ${userName}@${rpName} failed: ${err}`);\n      return false;\n    }\n\n    window.localStorage.setItem(storageKey, buf2hex(pk.rawId));\n    console.log(`successfully authenticated ${userName}@${rpName} for the first time with ${pk.id}`);\n\n    return true;\n  }\n}\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport {startOfDay} from 'date-fns';\nimport * as walletd from './walletd';\nimport * as util from './util';\n\nexport interface IStatus {\n  readonly topBlockHeight: number;\n  readonly topBlockTime: Date;\n  readonly topBlockHash: string;\n  readonly topKnownBlockHeight: number;\n  readonly lowerLevelError: string;\n}\n\nexport interface IBalance {\n  readonly spendable: number;\n  readonly lockedOrUnconfirmed: number;\n}\n\nexport interface IAddress {\n  readonly address: string;\n  readonly label: string;\n}\n\nexport interface IBlockHeader {\n  readonly confirmed: boolean;\n  readonly hash: string;\n  readonly height: number;\n  readonly time: Date;\n  readonly date: Date; // guaranteed to be monotonically increasing, unlike time\n}\n\nexport interface IBlock {\n  readonly header: IBlockHeader;\n  readonly transactions: ITransaction[];\n  readonly unlockedTransfers: ITransfer[];\n}\n\nexport interface IDay {\n  readonly date: Date;\n  readonly blocks: IBlock[];\n}\n\nexport enum TxKind {\n  Send         = 0, // outgoing, balance delta <= 0\n  Receive      = 1, // incoming, balance delta >= 0\n  Redistribute = 2, // internal, balance delta == 0\n}\n\nexport interface ITransaction {\n  readonly time: Date;\n  readonly kind: TxKind;\n  readonly hash: string;\n  readonly fee: number;\n  readonly summary: ITransfer[];\n  readonly transfers: IGroupedTransfers;\n}\n\nexport interface IGroupedTransfers {\n  readonly spend: ITransfer[];\n  readonly send: ITransfer[];\n  readonly receive: ITransfer[];\n  readonly change: ITransfer[];\n}\n\nexport enum TransferKind {\n  Spend   = 0, //  ours, amount <  0\n  Send    = 1, // !ours, amount >= 0 (only in TxKind.Send)\n  Receive = 2, //  ours, amount >= 0\n  Change  = 3, //  ours, amount >  0 (only in TxKind.Send)\n}\n\nexport interface ITransfer {\n  readonly kind: TransferKind;\n  readonly address: string;\n  readonly amount: number;\n  readonly message: string;\n  readonly ours: boolean;\n  readonly locked: boolean;\n  readonly unlockBlockOrTimestamp: number;\n  readonly transactionHash: string;\n}\n\nexport const MAX_BLOCK_NUMBER = 500000000;\n\nfunction isWalletClosedErr(err: Error | null): boolean {\n  return err !== null && (err.message.indexOf('#-32600: Wallet closed') !== -1 || err.message.indexOf('#-32600: Wallet must be open') !== -1);\n}\n\nexport async function start(\n  description: string,\n  isNew: boolean,\n  setWallet: (wallet: walletd.Walletd) => void,\n  setStatus: (status: IStatus) => void,\n  setBalance: (balance: IBalance) => void,\n  setAddresses: (addresses: IAddress[]) => void,\n  setHistory: (days: IDay[]) => void,\n) {\n  const timestamp = isNew ? Math.round(Date.now().valueOf() / 1000) : 0;\n\n  const [instance, err] = await util.try_(walletd.Walletd.create(DEFAULT_BYTECOIND_ADDR, description, timestamp));\n  if (instance === undefined) {\n    alert(`Failed to open wallet: ${err}`);\n    return;\n  }\n\n  try {\n    setWallet(instance);\n\n    let lastStatusTime = Date.now();\n    let lastStatusReq: walletd.IGetStatusReq = {};\n\n    let state = new TransferState();\n    let height = 0;\n    let days: IDay[] = [];\n\nsyncLoop:\n    while (height >= 0) {\n      lastStatusTime = await util.delay(MAX_STATUS_DELAY_MS, lastStatusTime);\n\n      const [status, errStatus] = await util.try_(instance.getStatus(lastStatusReq));\n      if (status === undefined) {\n        console.warn('failed to get status', lastStatusReq, errStatus);\n        if (isWalletClosedErr(errStatus)) {\n          return;\n        } else {\n          continue;\n        }\n      } else if (status.top_known_block_height === 0) {\n        continue;\n      }\n\n      lastStatusReq = {\n        top_block_hash: status.top_block_hash,\n        transaction_pool_version: status.transaction_pool_version,\n        lower_level_error: status.lower_level_error,\n      };\n\n      setStatus({\n        topBlockHeight: status.top_block_height,\n        topBlockTime: new Date(status.top_block_timestamp * 1000),\n        topBlockHash: status.top_block_hash,\n        topKnownBlockHeight: status.top_known_block_height,\n        lowerLevelError: status.lower_level_error,\n      });\n\n      const req = {\n        height_or_depth: CONFIRMED_DEPTH, // do not use confirmedHeight() here to avoid an error during fast sync\n      };\n      const [balance, errBalance] = await util.try_(instance.getBalance(req));\n      if (balance === undefined) {\n        console.warn('failed to get balance', req, errBalance);\n        if (isWalletClosedErr(errBalance)) {\n          return;\n        } else {\n          continue;\n        }\n      }\n      setBalance({\n        spendable: balance.spendable,\n        lockedOrUnconfirmed: balance.locked_or_unconfirmed,\n      });\n\n      const confHeight = confirmedHeight(status.top_block_height);\n\n      if (height === 0 && confHeight !== 0) {\n        const req = {\n          from_height: height,\n          to_height: confHeight,\n          forward: false,\n          desired_transaction_count: TX_HISTORY_SIZE,\n        };\n        const [transferData, err] = await util.try_(instance.getTransfers(req));\n        if (transferData === undefined) {\n          console.warn('failed to get history transfers', req, err);\n          if (isWalletClosedErr(err)) {\n            return;\n          } else {\n            continue;\n          }\n        }\n\n        state.mergeConfirmedFuture((transferData.blocks || []).reverse());\n        height = confHeight;\n      } else {\n        while (height < confHeight) {\n          const req = {\n            from_height: height,\n            to_height: confHeight,\n            forward: true,\n            desired_transaction_count: TX_CATCH_UP_BATCH_SIZE,\n          };\n\n          const [transferData, err] = await util.try_(instance.getTransfers(req));\n          if (transferData === undefined) {\n            console.warn('failed to get transfers', req, err);\n            if (isWalletClosedErr(err)) {\n              return;\n            } else {\n              continue syncLoop;\n            }\n          }\n\n          state.mergeConfirmedFuture(transferData.blocks || []);\n          height = transferData.next_from_height;\n        }\n\n        state.resetUnconfirmedFuture();\n        const mempoolHeight = status.top_block_height + 1;\n        let unconfirmedHeight = height;\n\n        while (unconfirmedHeight < mempoolHeight) {\n          const req = {\n            from_height: unconfirmedHeight,\n            to_height: mempoolHeight,\n            forward: true,\n            desired_transaction_count: TX_CATCH_UP_BATCH_SIZE,\n          };\n\n          const [transferData, err] = await util.try_(instance.getTransfers(req));\n          if (transferData === undefined) {\n            console.warn('failed to get future transfers', req, err);\n            if (isWalletClosedErr(err)) {\n              return;\n            } else {\n              continue syncLoop;\n            }\n          }\n\n          state.mergeUnconfirmedFuture(transferData.blocks || []);\n          unconfirmedHeight = transferData.next_from_height;\n        }\n      }\n\n      const newDays = state.mergeUnconfirmed();\n      if (newDays !== days) {\n        days = newDays;\n        setHistory(days);\n\n        const [walletRecords, err] = await util.try_(instance.getWalletRecords({}));\n        if (walletRecords === undefined) {\n          console.warn('failed to get wallet records', err);\n          if (isWalletClosedErr(err)) {\n            return;\n          } else {\n            continue;\n          }\n        }\n\n        const addresses = walletRecords.records.map((record): IAddress => {\n          return {\n            address: record.address,\n            label: record.label,\n          };\n        });\n\n        setAddresses(addresses);\n      }\n    }\n  } catch (err) {\n    alert(`Unexpected error: ${err}\\n\\nPlease try reloading this page.`);\n  } finally {\n    await instance.close();\n  }\n}\n\nconst DEFAULT_BYTECOIND_ADDR = 'https://node02.bytecoin.org:8091';\n\nconst MAX_STATUS_DELAY_MS = 100;\n\nconst CONFIRMATIONS = 3;\nexport const CONFIRMED_DEPTH = -CONFIRMATIONS - 1; // TODO is -1 right here?\nconst TX_HISTORY_SIZE = 1000;                      // TODO incremental history loading\nconst TX_CATCH_UP_BATCH_SIZE = 100;\n\nfunction confirmedHeight(height: number): number {\n  return Math.max(height - CONFIRMATIONS, 0);\n}\n\nclass TransferState {\n  private confirmedDays:   IDay[] = []; // reverse chronological order\n  private unconfirmedDays: IDay[] = []; // reverse chronological order\n\n  mergeConfirmedFuture(blocks: walletd.IBlock[]): void {\n    this.confirmedDays = TransferState.mergeFuture(this.confirmedDays, blocks, true);\n  }\n\n  resetUnconfirmedFuture(): void {\n    this.unconfirmedDays = [];\n  }\n\n  mergeUnconfirmedFuture(blocks: walletd.IBlock[]): void {\n    this.unconfirmedDays = TransferState.mergeFuture(this.unconfirmedDays, blocks, false);\n  }\n\n  mergeUnconfirmed(): IDay[] {\n    return TransferState.mergeDays(this.confirmedDays, this.unconfirmedDays);\n  }\n\n  private static mergeFuture(base: IDay[], blocks: walletd.IBlock[], confirmed: boolean): IDay[] {\n    const newBlocks = blocks.map((b) => TransferState.transformBlock(b, confirmed)).reverse();\n    const newBlocksByDateTimestamp = util.groupBy(newBlocks, (block) => block.header.date.valueOf());\n\n    const newDays: IDay[] = [];\n    for (const [timestamp, blocks] of newBlocksByDateTimestamp) {\n      newDays.push({\n        date: new Date(timestamp),\n        blocks,\n      });\n    }\n\n    return TransferState.mergeDays(base, newDays);\n  }\n\n  private static mergeDays(base: IDay[], newDays: IDay[]): IDay[] {\n    if (newDays.length === 0) {\n      return base;\n    }\n\n    if (base.length > 0 && newDays[newDays.length-1].date.valueOf() === base[0].date.valueOf()) {\n      const mergedDay: IDay = {\n        date: newDays[newDays.length-1].date,\n        blocks: [...newDays[newDays.length-1].blocks,  ...base[0].blocks],\n      };\n\n      return [...newDays.slice(0, newDays.length-1), mergedDay, ...base.slice(1)];\n    } else {\n      return [...newDays, ...base];\n    }\n  }\n\n  private static transformBlock(block: walletd.IBlock, confirmed: boolean): IBlock {\n    const transactions: ITransaction[] = (block.transactions || []).map((tx) => {\n      const txKind = txKindFromTransfers(tx.transfers || []);\n\n      const transfers: ITransfer[] = (tx.transfers || []).map((transfer) => ({\n        kind: transferKind(transfer.amount, transfer.ours || false, txKind),\n        address: transfer.address,\n        amount: transfer.amount,\n        message: transfer.message || '',\n        ours: transfer.ours || false,\n        locked: transfer.locked || false,\n        unlockBlockOrTimestamp: transfer.unlock_block_or_timestamp || 0,\n        transactionHash: transfer.transaction_hash || '',\n      }));\n\n      const groupedTransfers = {\n        spend: transfers.filter((t) => t.kind === TransferKind.Spend),\n        send: transfers.filter((t) => t.kind === TransferKind.Send),\n        receive: transfers.filter((t) => t.kind === TransferKind.Receive),\n        change: transfers.filter((t) => t.kind === TransferKind.Change),\n      };\n\n      let summary: ITransfer[] = [];\n      switch (txKind) {\n        case TxKind.Send:\n          summary = groupedTransfers.send;\n          break;\n        case TxKind.Receive:\n          summary = groupedTransfers.receive;\n          break;\n        case TxKind.Redistribute:\n          const transfersByAddr = [...util.groupBy(transfers, (t) => t.address)];\n          summary = transfersByAddr.map(([addr, addrTransfers]): ITransfer => {\n            const totalAmount = addrTransfers.reduce((sum, t) => sum + t.amount, 0);\n            return {\n              kind: totalAmount < 0 ? TransferKind.Spend : TransferKind.Receive,\n              address: addr,\n              amount: totalAmount,\n              message: addrTransfers.map((t) => t.message).filter((msg) => msg.length > 0).join(' | '),\n              ours: true,\n              locked: addrTransfers.some((t) => t.locked),\n              unlockBlockOrTimestamp: 0,\n              transactionHash: tx.hash,\n            };\n          }).sort((t1, t2) => t1.kind - t2.kind);\n          break;\n      }\n\n      return {\n        time: new Date(tx.timestamp * 1000),\n        kind: txKind,\n        hash: tx.hash,\n        fee: tx.fee,\n        summary,\n        transfers: groupedTransfers,\n      };\n    });\n\n    const unlockedTransfers: ITransfer[] = (block.unlocked_transfers || []).map((transfer) => {\n      return {\n        kind: transferKind(transfer.amount, transfer.ours || false, TxKind.Receive),\n        address: transfer.address,\n        amount: transfer.amount,\n        message: transfer.message || '',\n        ours: transfer.ours || false,\n        locked: false,\n        unlockBlockOrTimestamp: 0,\n        transactionHash: transfer.transaction_hash || '',\n      };\n    });\n\n    // mempool \"block\" header can omit timestamps\n    const blockMonotonicTime = block.header.timestamp_median > 0 ?\n      new Date(block.header.timestamp_median * 1000) :\n      transactions.length > 0 ? transactions[0].time : new Date();\n\n    return {\n      header: {\n        confirmed,\n        hash: block.header.hash,\n        height: block.header.height,\n        time: new Date(block.header.timestamp * 1000),\n        date: startOfDay(blockMonotonicTime),\n      },\n      transactions: transactions.reverse(),\n      unlockedTransfers: unlockedTransfers.reverse(),\n    };\n  }\n}\n\nfunction txKindFromTransfers(transfers: {ours?: boolean, amount: number}[]): TxKind {\n  const allOurs = transfers.every((t) => t.ours || false);\n  if (!allOurs) {\n    return TxKind.Send;\n  }\n\n  const allAmountsNonNeg = transfers.every((t) => t.amount >= 0);\n  if (allOurs && allAmountsNonNeg) {\n    return TxKind.Receive;\n  }\n\n  return TxKind.Redistribute;\n}\n\nfunction transferKind(amount: number, ours: boolean, txKind: TxKind): TransferKind {\n  if (!ours) {\n    return TransferKind.Send;\n  }\n\n  if (amount < 0) {\n    return TransferKind.Spend;\n  }\n\n  if (txKind === TxKind.Send) {\n    return TransferKind.Change;\n  }\n\n  return TransferKind.Receive;\n}\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState, useRef} from 'react';\nimport {generateMnemonic, validateMnemonic} from 'bip39';\nimport englishWordlist from 'bip39/src/wordlists/english.json';\nimport * as util from './lib/util';\nimport logo from './img/logo.svg';\nimport styles from './css/OpenForm.module.css';\n\nconst DEFAULT_MNEMONIC = 'autumn actor sleep rebel fee scissors garage try claim miss maple ribbon alarm size above kite mass gain render grow dice decrease subway calm';\n\nconst OpenForm = React.memo((props: {onOpen: (desc: string, isNew: boolean) => void}) => {\n  const firstGen = useRef(true);\n  const [description, setDescription] = useState('');\n  const [genDescription, setGenDescription] = useState('');\n  const [descriptionValid, setDescriptionValid] = useState(false);\n  const [opening, setOpening] = useState(false);\n\n  const generate = () => {\n    const desc = firstGen.current ? DEFAULT_MNEMONIC : generateMnemonic(256, undefined, englishWordlist);\n    firstGen.current = false;\n\n    setDescription(desc);\n    setGenDescription(desc);\n    setDescriptionValid(true);\n  };\n\n  const open = async () => {\n    setOpening(true);\n    await doOpen();\n    setOpening(false);\n  };\n\n  const doOpen = async () => {\n    const ok = await util.bioApprove('Bytecoin Zero', 'bytecoin-zero-user', 'Bytecoin Zero User');\n    if (!ok) {\n      return;\n    }\n\n    const desc = description.trim().toLowerCase();\n    props.onOpen(desc, desc === genDescription && desc !== DEFAULT_MNEMONIC);\n  };\n\n  return (\n    <div className={styles.openForm}>\n      <div className={styles.logo}>\n        <img src={logo} alt='Bytecoin'/>\n      </div>\n\n      <div className={styles.body}>\n        <div className={styles.descGroup}>\n          <textarea className={`${descriptionValid ? 'valid' : 'invalid'}`}\n                    placeholder='BIP39 mnemonic of Bytecoin wallet'\n                    rows={7}\n                    autoCapitalize='none'\n                    autoComplete='off'\n                    spellCheck={false}\n                    maxLength={256}\n                    value={description}\n                    onChange={(e) => {\n                      const desc = e.target.value;\n                      const ok = validateMnemonic(desc.trim().toLowerCase(), englishWordlist);\n                      setDescriptionValid(ok);\n                      setDescription(desc);\n                    }}\n          />\n        </div>\n\n        <div className={styles.controls}>\n          <button className={styles.genButton} onClick={generate}>\n            Generate mnemonic\n          </button>\n\n          <button className={styles.openButton} onClick={open} disabled={opening || !descriptionValid}>\n            Open wallet\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default OpenForm;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\ntype ModuleHTTPHandle = number;\n\ndeclare function cn_walletd_start(argv: string[]): void;\ndeclare function cn_http_server_call(method: string, path: string, body: string, callback: (status: number, body: string) => void): ModuleHTTPHandle;\ndeclare function cn_http_server_cancel(handle: ModuleHTTPHandle): void;\n\ninterface IWalletCreateReq {\n  readonly mnemonic: string;\n  readonly creation_timestamp: number;\n}\n\nexport class Walletd {\n  private n: number = 0;\n  private closed = false;\n\n  private constructor(bytecoindAddr: string) {\n    cn_walletd_start([`--bytecoind-remote-address=${bytecoindAddr}`]);\n  }\n\n  static async create(bytecoindAddr: string, mnemonic: string, timestamp: number): Promise<Walletd> {\n    console.info('opening wallet:', mnemonic, new Date(timestamp * 1000));\n\n    let w = new Walletd(bytecoindAddr);\n    await w.createWallet({\n      mnemonic: mnemonic,\n      creation_timestamp: timestamp,\n    });\n\n    return w;\n  }\n\n  async close(): Promise<void> {\n    if (!this.closed) {\n      this.closed = true;\n      return this.closeWallet();\n    }\n  }\n\n  private createWallet(req: IWalletCreateReq): Promise<void> {\n    return this.rpc('ext_create_wallet', req);\n  }\n\n  private closeWallet(): Promise<void> {\n    return this.rpc('ext_close_wallet', {});\n  }\n\n  getStatus(req: IGetStatusReq): Promise<IGetStatusResp> {\n    return this.rpc('get_status', req);\n  }\n\n  getBalance(req: IGetBalanceReq): Promise<IGetBalanceResp> {\n    return this.rpc('get_balance', req);\n  }\n\n  getWalletRecords(req: IGetWalletRecordsReq): Promise<IGetWalletRecordsResp> {\n    return this.rpc('get_wallet_records', req);\n  }\n\n  getTransfers(req: IGetTransfersReq): Promise<IGetTransfersResp> {\n    return this.rpc('get_transfers', req);\n  }\n\n  createSendproof(req: ICreateSendproofReq): Promise<ICreateSendproofResp> {\n    return this.rpc('create_sendproof', req);\n  }\n\n  createTransaction(req: ICreateTransactionReq): Promise<ICreateTransactionResp> {\n    return this.rpc('create_transaction', req);\n  }\n\n  sendTransaction(req: ISendTransactionReq): Promise<ISendTransactionResp> {\n    return this.rpc('send_transaction', req);\n  }\n\n  private rpc<TReq, TResp>(method: string, params: TReq): Promise<TResp> {\n    return new Promise((resolve, reject) => {\n      const json = {\n        jsonrpc: '2.0',\n        id: '0',\n        method: method,\n        params: params,\n      };\n\n      const label = `RPC ${method} #${this.n}`;\n      this.n++;\n\n      console.time(label);\n      Walletd.postJSON(method, '/json_rpc', json, (resp) => {\n        console.timeEnd(label);\n\n        if (resp.hasOwnProperty('error')) {\n          const msg = `[${method}] JSON-RPC error #${resp.error.code}: ${resp.error.message}`;\n          console.warn(msg);\n          reject(new Error(msg));\n        } else {\n          resolve(resp.result)\n        }\n      }, reject);\n    });\n  }\n\n  private static postJSON(id: string, path: string, json: any, resolve: (value: any) => void, reject: (error: any) => void) {\n    const params = JSON.stringify(json);\n    const handle = cn_http_server_call('POST', path, params, (status: number, body: string) => {\n      if (status === 200) {\n        try {\n          const result = JSON.parse(body);\n          resolve(result);\n        } catch (err) {\n          console.warn(`[${id}] JSON reply parsing failed`, err);\n          reject(err);\n        }\n      } else {\n        const msg = `[${id}] HTTP status ${status}`;\n        console.warn(msg);\n        reject(new Error(msg));\n      }\n    });\n\n    return () => {\n      cn_http_server_cancel(handle);\n    };\n  }\n}\n\nexport interface ITransfer {\n  readonly address: string;\n  readonly amount: number;\n  readonly message?: string;\n  readonly unlock_block_or_timestamp?: number;\n  readonly ours?: boolean;\n  readonly locked?: boolean;\n  readonly transaction_hash?: string;\n}\n\nexport interface INewTransaction {\n  readonly unlock_block_or_timestamp?: number;\n  readonly transfers?: ITransfer[];\n  readonly payment_id?: string;\n  readonly anonymity?: number;\n}\n\nexport interface ICreatedTransaction extends INewTransaction {\n  readonly hash: string;\n  readonly fee: number;\n  readonly public_key: string;\n  readonly extra: string;\n  readonly coinbase: boolean;\n  readonly amount: number;\n}\n\nexport interface IBlockTransaction extends ICreatedTransaction {\n  readonly block_height: number;\n  readonly block_hash: string;\n  readonly timestamp: number;\n  readonly size?: number;\n}\n\nexport interface IBlockHeader {\n  readonly major_version: number;\n  readonly minor_version: number;\n  readonly timestamp: number;\n  readonly previous_block_hash: string;\n  readonly nonce: number;\n  readonly binary_nonce: string;\n\n  readonly height: number;\n  readonly hash: string;\n  readonly reward: number;\n  readonly cumulative_difficulty: number;\n  readonly cumulative_difficulty_hi: number;\n  readonly difficulty: number;\n  readonly base_reward: number;\n  readonly block_size: number;\n  readonly transactions_size: number;\n  readonly already_generated_key_outputs: number;\n  readonly already_generated_coins: number;\n  readonly already_generated_transactions: number;\n  readonly size_median: number;\n  readonly effective_size_median: number;\n  readonly timestamp_median: number;\n  readonly block_capacity_vote: number;\n  readonly block_capacity_vote_median: number;\n  readonly transactions_fee: number;\n}\n\nexport interface IBlock {\n  readonly header: IBlockHeader;\n  readonly transactions?: IBlockTransaction[];\n  readonly unlocked_transfers?: ITransfer[];\n}\n\nexport interface IBalance {\n  readonly spendable: number;\n  readonly spendable_dust: number;\n  readonly locked_or_unconfirmed: number;\n  readonly spendable_outputs: number;\n  readonly spendable_dust_outputs: number;\n  readonly locked_or_unconfirmed_outputs: number;\n}\n\nexport interface IGetStatusReq {\n  top_block_hash?: string;\n  transaction_pool_version?: number;\n  incoming_peer_count?: number;\n  outgoing_peer_count?: number;\n  lower_level_error?: string;\n}\n\nexport interface IGetStatusResp {\n  readonly top_block_hash: string;\n  readonly top_block_difficulty: number;\n  readonly top_block_cumulative_difficulty: number;\n  readonly top_block_height: number;\n  readonly top_block_timestamp: number;\n  readonly top_block_timestamp_median: number;\n  readonly top_known_block_height: number;\n  readonly transaction_pool_version: number;\n  readonly incoming_peer_count: number;\n  readonly outgoing_peer_count: number;\n  readonly lower_level_error: string;\n  readonly next_block_effective_median_size: number;\n  readonly recommended_fee_per_byte: number;\n  readonly recommended_max_transaction_size: number;\n}\n\nexport interface IGetBalanceReq {\n  address?: string;\n  height_or_depth?: number;\n}\n\nexport interface IGetBalanceResp extends IBalance {\n}\n\nexport interface IWalletRecord {\n  readonly address: string;\n  readonly label: string;\n  readonly index: number;\n  readonly public_spend_key: string;\n  readonly secret_spend_key?: string;\n}\n\nexport interface IGetWalletRecordsReq {\n  need_secrets?: boolean;\n  create?: boolean;\n  index?: number;\n  count?: number;\n}\n\nexport interface IGetWalletRecordsResp {\n  readonly records: IWalletRecord[];\n  readonly total_count: number;\n}\n\nexport interface IGetTransfersReq {\n  address?: string;\n  from_height: number;\n  to_height: number;\n  forward: boolean;\n  desired_transaction_count: number;\n}\n\nexport interface IGetTransfersResp {\n  readonly blocks?: IBlock[];\n  readonly next_from_height: number;\n  readonly next_to_height: number;\n}\n\nexport interface ICreateSendproofReq {\n  transaction_hash: string;\n  address: string;\n  message?: string;\n}\n\nexport interface ICreateSendproofResp {\n  readonly sendproof: string;\n}\n\nexport interface ICreateTransactionReq {\n  transaction: INewTransaction;\n  spend_addresses?: string[];\n  any_spend_address: boolean;\n  change_address: string;\n  confirmed_height_or_depth: number;\n  fee_per_byte?: number;\n  optimization?: string;\n  subtract_fee_from_amount?: boolean;\n}\n\nexport interface ICreateTransactionResp {\n  readonly transaction: ICreatedTransaction;\n  readonly binary_transaction: string;\n}\n\nexport interface ISendTransactionReq {\n  binary_transaction: string;\n}\n\nexport interface ISendTransactionResp {\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(-0.9526244,0.9526244,-0.9526244,-0.9526244,1074.1836,-92.790252)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowNortheast = function SvgArrowNortheast(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowNortheast, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_northeast.1f67c9d1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(-0.9526244,-0.9526244,0.9526244,-0.9526244,726.74361,805.41781)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowSoutheast = function SvgArrowSoutheast(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowSoutheast, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_southeast.9f3f690f.svg\";\nexport { ForwardRef as ReactComponent };","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useContext, useEffect, useRef, useState} from 'react';\nimport {CSSTransition} from 'react-transition-group';\nimport * as loop from './lib/loop';\nimport * as util from './lib/util';\nimport {ReactComponent as ArrowNE} from './img/Arrow_northeast.svg';\nimport {ReactComponent as ArrowSE} from './img/Arrow_southeast.svg';\nimport ReceiveForm from './ReceiveForm';\nimport SendForm from './SendForm';\nimport logo from './img/logo.svg';\nimport styles from './css/Header.module.css';\n\n// @ts-ignore\nimport NoSleep from 'nosleep.js';\n\nexport const Status = React.memo((props: loop.IStatus) => {\n  const initializing = props.topBlockHash === '';\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n\n  const relTime = util.useRelativeTime(props.topBlockTime);\n\n  return (\n    <div className={styles.status}>\n      <div className={styles.statusIcon}>\n        <img src={logo} alt='Bytecoin'/>\n      </div>\n      <div className={styles.syncStatusSummary}>\n        <div className={styles.syncStatus}>\n          {initializing ? 'Initializing wallet…' :\n              syncing ? <span className={styles.ellipsis}>Syncing</span> : 'Synced'\n          }\n        </div>\n        {props.lowerLevelError ?\n          <div className={styles.syncStatusError}>\n            <code>\n              {props.lowerLevelError} {/*TODO localize*/}\n            </code>\n          </div>\n          :\n          <div className={styles.syncStatusBlock} hidden={props.topBlockHeight === 0}>\n            <a href={`https://explorer.bytecoin.org/block?hash=${props.topBlockHash}`} target='_blank' rel='noreferrer noopener'>\n              {util.formatNumber(props.topBlockHeight)}\n            </a> <span className={styles.syncStatusTimestamp}>\n              {relTime}\n            </span>\n          </div>\n        }\n      </div>\n    </div>\n  );\n});\n\nenum DrawerType {\n  None,\n  Receive,\n  Send,\n}\n\nconst dayMS = 60 * 60 * 24 * 1000;\n\nexport const Controls = React.memo((props: loop.IStatus & loop.IBalance & {addresses: loop.IAddress[]}) => {\n  const wallet = useContext(util.WalletContext);\n\n  const initializing = props.topBlockHash === '';\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n  const farBehind = (new Date()).valueOf() - props.topBlockTime.valueOf() > 2 * dayMS;\n  const wantNoSleep = syncing && farBehind && util.isMobile();\n\n  const noSleep = useRef(new NoSleep());\n  const [settingsOpen, setSettingsOpen] = useState(false);\n  const [drawerType, setDrawerType] = useState(DrawerType.None);\n  const [nextDrawerType, setNextDrawerType] = useState(DrawerType.None);\n\n  useEffect(() => {\n    if (!wantNoSleep) {\n      turnNoSleep(false);\n    }\n  }, [wantNoSleep]);\n\n  const turnNoSleep = (on: boolean) => {\n    console.info(`no sleep: ${on}`);\n\n    if (on) {\n      noSleep.current.enable();\n    } else {\n      noSleep.current.disable();\n    }\n  };\n\n  const transitionDrawer = (t: DrawerType) => {\n    if (drawerType === DrawerType.None) {\n      setDrawerType(t);\n    } else if (drawerType === t) {\n      setDrawerType(DrawerType.None);\n    } else {\n      setDrawerType(DrawerType.None);\n      setNextDrawerType(t);\n    }\n  };\n\n  const transitionNextDrawer = () => {\n    if (nextDrawerType !== DrawerType.None) {\n      setDrawerType(nextDrawerType);\n      setNextDrawerType(DrawerType.None);\n    }\n  };\n\n  const closeWallet = async () => {\n    if (wallet) {\n      await wallet.close();\n    }\n  };\n\n  return (\n    <div className={styles.controls}>\n      <CSSTransition in={settingsOpen} mountOnEnter={true} timeout={300} classNames='balance-drawer-form-up'>\n        <div className={styles.drawer}>\n          <div className={styles.settings}>\n            <div className={styles.noSleepGroup}>\n              <input type='checkbox' id='noSleep' onChange={(e) => turnNoSleep(e.target.checked)}/> <label htmlFor='noSleep'>Prevent device sleep during sync</label>\n            </div>\n\n            <button className={styles.closeWallet} onClick={closeWallet}>\n              Close wallet\n            </button>\n          </div>\n        </div>\n      </CSSTransition>\n      <div className={styles.main}>\n        <div className={styles.balance}>\n          <div className={styles.balanceAvailable}>\n            {util.formatBCN(props.spendable)}\n            {!initializing && <button className={`${styles.settingsButton} link-like`} onClick={() => setSettingsOpen(!settingsOpen)}>\n                &#9881;&#65039;\n            </button>}\n          </div>\n          <div className={styles.balancePending}>\n            {!syncing && props.lockedOrUnconfirmed > 0 && `${util.formatBCN(props.lockedOrUnconfirmed, 3)} locked or unconfirmed`}\n          </div>\n        </div>\n        <div className={styles.recv} hidden={initializing}>\n          <button className={`link-like ${drawerType === DrawerType.Receive ? 'active' : ''}`} onClick={() => transitionDrawer(DrawerType.Receive)}>\n            <ArrowSE/> Receive\n          </button>\n        </div>\n        <div className={styles.send} hidden={initializing}>\n          <button className={`link-like ${drawerType === DrawerType.Send ? 'active' : ''}`} onClick={() => transitionDrawer(DrawerType.Send)} disabled={syncing}>\n            <ArrowNE/> Send\n          </button>\n        </div>\n      </div>\n      <CSSTransition in={drawerType === DrawerType.Receive} onExited={transitionNextDrawer} unmountOnExit={true} timeout={300} classNames='balance-drawer-form-down'>\n        <div className={styles.drawer}>\n          <ReceiveForm addresses={props.addresses} dismiss={() => setDrawerType(DrawerType.None)}/>\n        </div>\n      </CSSTransition>\n      <CSSTransition in={drawerType === DrawerType.Send} onExited={transitionNextDrawer} unmountOnExit={true} timeout={300} classNames='balance-drawer-form-down'>\n        <div className={styles.drawer}>\n          <SendForm dismiss={() => setDrawerType(DrawerType.None)}/>\n        </div>\n      </CSSTransition>\n    </div>\n  );\n});\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport * as util from './lib/util';\nimport styles from './css/Avatar.module.css';\n\n// @ts-ignore\nimport {inner} from 'gridy-avatars';\n\nconst Avatar = React.memo((props: {message: string}) => {\n  const [content, setContent] = useState('');\n\n  useEffect(() => {\n    util.digest(props.message.trim()).then((d) => {\n      const arr = new Uint8Array(d);\n\n      const body       = arr[0] & 7;\n      const bodyColor  = arr[1] & 7;\n      const eyes       = arr[2] & 7;\n      const eyesColor  = arr[3] & 7;\n      const mouth      = arr[4] & 7;\n      const mouthColor = arr[5] & 7;\n\n      const svg = [\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"isolation:isolate\" viewBox=\"0 0 24 24\" version=\"1.1\">',\n        inner(`${body}${bodyColor}${eyes}${eyesColor}${mouth}${mouthColor}`),\n        '</svg>'\n      ].join('');\n\n      setContent(svg);\n    });\n  }, [props.message]);\n\n  return (\n    <div className={styles.avatar} dangerouslySetInnerHTML={{__html: content}}>\n    </div>\n  );\n});\n\nexport default Avatar;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React from 'react';\nimport styles from './css/ReceiveForm.module.css';\nimport * as loop from './lib/loop';\nimport Avatar from './Avatar';\n\nconst ReceiveForm = React.memo((props: {addresses: loop.IAddress[], dismiss: () => void}) => {\n  const canShare = (navigator as any).share !== undefined;\n  const share = (addr: string) => {\n    (navigator as any).share({\n      text: addr,\n    });\n  };\n\n  return (\n    <div className={styles.receiveForm}>\n      {\n        props.addresses.map((addr) =>\n          <div key={addr.address} className={styles.address}>\n            <div className={styles.addressIcon} title={addr.address}>\n              <Avatar message={addr.address}/>\n            </div>\n            <div className={styles.addressData}>\n              <div className={styles.addressText}>\n                <span className={styles.addressOurs} role='img' aria-label='wallet address'>&#128091;</span> {addr.address}\n              </div>\n            </div>\n            { canShare &&\n              <div className={styles.share}>\n                <button className='link-like' onClick={() => share(addr.address)}>\n                  Share\n                </button>\n              </div>\n            }\n          </div>\n        )\n      }\n    </div>\n  );\n});\n\nexport default ReceiveForm;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useContext, useState} from 'react';\nimport {checkAddress} from '@bcndev/bytecoin';\nimport styles from './css/SendForm.module.css';\nimport * as util from './lib/util';\nimport * as loop from './lib/loop';\n\n// TODO: messages\n// TODO: multiple recipients\n// TODO: custom fee\nconst SendForm = React.memo((props: {dismiss: () => void}) => {\n  const wallet = useContext(util.WalletContext);\n\n  const [address, setAddress] = useState('');\n  const [amount, setAmount] = useState(0);\n  const [addressValid, setAddressValid] = useState(false);\n  const [amountValid, setAmountValid] = useState(false);\n  const [sending, setSending] = useState(false);\n\n  const send = async () => {\n    setSending(true);\n    await doSend();\n    setSending(false);\n  };\n\n  const doSend = async () => {\n    // TODO derive username from wallet\n    const ok = await util.bioApprove('Bytecoin Zero', 'bytecoin-zero-user', 'Bytecoin Zero User');\n    if (!ok || !wallet) {\n      return;\n    }\n\n    const [txResp, errCreate] = await util.try_(wallet.createTransaction({\n      transaction: {\n        transfers: [{\n          address,\n          amount,\n        }],\n      },\n      any_spend_address: true,\n      change_address: '',\n      confirmed_height_or_depth: loop.CONFIRMED_DEPTH,\n    }));\n    if (txResp === undefined) {\n      alert(`Failed to create transaction: ${errCreate}`);\n      return;\n    }\n\n    const [sendResp, errSend] = await util.try_(wallet.sendTransaction({\n      binary_transaction: txResp.binary_transaction,\n    }));\n    if (sendResp === undefined) {\n      alert(`Failed to send transaction: ${errSend}`);\n      return;\n    }\n\n    props.dismiss();\n  };\n\n  return (\n    <div className={styles.sendForm}>\n      <div className={styles.transfer}>\n        <div className={styles.addressGroup}>\n          <label htmlFor='toAddress'>Address</label>\n          <input className={`${addressValid ? 'valid' : 'invalid'}`}\n                 type='text'\n                 placeholder='bcnZ… or 2…'\n                 id='toAddress'\n                 onChange={(e) => {\n                   const addr = e.target.value;\n                   const ok = checkAddress(addr);\n                   setAddressValid(ok);\n                   if (ok) {\n                     setAddress(addr);\n                   }\n                 }}\n          />\n        </div>\n        <div className={styles.amountGroup}>\n          <label htmlFor='toAmount'>Amount</label>\n          <input className={`${amountValid ? 'valid' : 'invalid'}`}\n                 type='number'\n                 placeholder='0'\n                 id='toAmount'\n                 min='0.01'\n                 step='0.01'\n                 onChange={(e) => {\n                   const am = Math.round(parseFloat(e.target.value) * 1e8); // TODO: exact calculation\n                   const ok = am > 0; // TODO: check upper bound\n                   setAmountValid(ok);\n                   if (ok) {\n                     setAmount(am);\n                   }\n                 }}\n          />\n        </div>\n      </div>\n      <div className={styles.controls}>\n        <button className={styles.cancelButton} onClick={props.dismiss}>\n          Cancel\n        </button>\n        <button className={styles.sendButton} onClick={send} disabled={sending || !addressValid || !amountValid}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n});\n\nexport default SendForm;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(0.9526244,-0.9526244,0.9526244,0.9526244,-171.46445,457.97782)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowSouthwest = function SvgArrowSouthwest(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowSouthwest, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_southwest.781cea01.svg\";\nexport { ForwardRef as ReactComponent };","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState, useContext, useEffect} from 'react';\nimport {CSSTransition, TransitionGroup} from 'react-transition-group';\nimport {flatMap} from 'lodash';\nimport * as loop from './lib/loop';\nimport * as util from './lib/util';\nimport Avatar from './Avatar';\nimport {ReactComponent as ArrowNE} from './img/Arrow_northeast.svg';\nimport {ReactComponent as ArrowSE} from './img/Arrow_southeast.svg';\nimport {ReactComponent as ArrowSW} from './img/Arrow_southwest.svg';\nimport styles from './css/History.module.css';\nimport {formatDateTime, formatTime} from './lib/util';\n\nconst History = React.memo((props: {history: loop.IDay[]}) => {\n  const {history} = props;\n\n  return (\n    <div className={styles.history}>\n      <TransitionGroup component={null}>\n        {history.map((day) =>\n          <CSSTransition key={day.date.valueOf()} timeout={1000} classNames='history-day'>\n            <Day {...day} />\n          </CSSTransition>\n        )}\n      </TransitionGroup>\n    </div>\n  );\n});\n\nconst Day = React.memo((props: loop.IDay) => {\n  return (\n    <div className={styles.historyDay}>\n      <div className={styles.historyDayHeader}>\n        <div className={styles.historyDayDate}>\n          {util.formatDate(props.date)}\n        </div>\n      </div>\n\n      <div className={styles.historyDayRows}>\n        <TransitionGroup component={null} appear={true}>\n        {\n          flatMap(props.blocks, (block) => {\n            const txs = block.transactions.map((transaction) =>\n              <CSSTransition key={transaction.hash} timeout={1000} classNames='history-row'>\n                <Transaction {...transaction} confirmed={block.header.confirmed}/>\n              </CSSTransition>\n            );\n\n            const transfers = block.unlockedTransfers.map((transfer) =>\n              <CSSTransition key={`${transfer.amount}#${transfer.address}@${transfer.transactionHash}`} timeout={1000} classNames='history-row'>\n                <div className={styles.unlockedTransferContainer}>\n                  <Transfer {...transfer} isUnlock={true}/>\n                </div>\n              </CSSTransition>\n            );\n\n            return [...txs, ...transfers];\n          })\n        }\n        </TransitionGroup>\n      </div>\n    </div>\n  );\n});\n\nconst Transaction = React.memo((props: loop.ITransaction & {confirmed: boolean}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [detailsAnimating, setDetailsAnimating] = useState(false);\n\n  const kindClass = loop.TxKind[props.kind];\n\n  return (\n    <div className={`${styles.tx} ${kindClass}`}>\n      <div className={`${styles.txBody} ${expanded ? 'expanded' : ''} ${detailsAnimating ? 'details-animating' : ''} ${props.confirmed ? 'confirmed' : 'unconfirmed'}`} onClick={() => setExpanded(!expanded)}>\n        {\n          props.summary.map((t) =>\n            <Transfer key={t.address} {...t} unconfirmed={!props.confirmed}/>\n          )\n        }\n      </div>\n\n      <CSSTransition in={expanded} unmountOnExit={true} timeout={300} classNames='history-tx-details' onExit={() => setDetailsAnimating(true)} onExited={() => setDetailsAnimating(false)}>\n        <div className={styles.txDetails}>\n          <div className={styles.txMetadata}>\n            <span className={styles.txBlockTime}>\n              {formatTime(props.time)}\n            </span>\n            <a className={styles.txHash} href={`https://explorer.bytecoin.org/tx?hash=${props.hash}`} title={props.hash} target='_blank' rel='noreferrer noopener'>\n              {props.hash}\n            </a>\n            <span className={styles.txFee}>\n              Fee {util.formatBCN(props.fee, 3)}\n            </span>\n          </div>\n          {\n            props.transfers.spend.map((t) =>\n              <Transfer key={`spend-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.send.map((t) =>\n              <Transfer key={`send-${t.address}`} detailed={true} genSendproof={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.receive.map((t) =>\n              <Transfer key={`receive-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.change.map((t) =>\n              <Transfer key={`change-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n        </div>\n      </CSSTransition>\n    </div>\n  );\n});\n\nconst Transfer = React.memo((props: loop.ITransfer & {unconfirmed?: boolean, genSendproof?: boolean, detailed?: boolean, isUnlock?: boolean}) => {\n  const isSpend = props.kind === loop.TransferKind.Spend;\n  const isSend = props.kind === loop.TransferKind.Send;\n  const isReceive = props.kind === loop.TransferKind.Receive;\n\n  const lockedUntil = props.unlockBlockOrTimestamp > 0 ?\n    props.unlockBlockOrTimestamp > loop.MAX_BLOCK_NUMBER ?\n      `Locked until ${formatDateTime(new Date(props.unlockBlockOrTimestamp * 1000))}` :\n      `Locked until block #${props.unlockBlockOrTimestamp}` : '';\n\n  const [sendproof, setSendproof] = useState('');\n  const wallet = useContext(util.WalletContext);\n\n  let help = props.isUnlock ? 'Unlocked transfer' : isReceive ? 'Received to' : isSend ? 'Sent to' : isSpend ? 'Sent from' : 'Change';\n  if (props.locked) {\n    help += ' (locked)'\n  }\n\n  const amountClass = props.isUnlock ? `Unlocked` : props.locked ? 'Locked' : '';\n\n  useEffect(() => {\n    if (!props.genSendproof || !wallet) {\n      return;\n    }\n\n    wallet.createSendproof({\n      transaction_hash: props.transactionHash,\n      address: props.address,\n    }).then((req) => {\n      setSendproof(req.sendproof)\n    });\n  }, [wallet, props.genSendproof, props.transactionHash, props.address]);\n\n  return (\n    <div className={styles.transfer}>\n      <div className={styles.transferLeft}>\n        <div className={styles.transferKind}>\n          {isReceive ? <ArrowSE/> : isSend ? <ArrowNE/> : isSpend ? <ArrowSW/> : <ArrowSE/>}\n        </div>\n        <div className={styles.transferDetails}>\n          <div className={styles.transferIcon}>\n            <AddressIcon address={props.address}/>\n          </div>\n          <div className={styles.transferDescription}>\n            <div className={styles.transferHelp}>\n              {help}\n            </div>\n            <div className={styles.transferAddress}>\n              {props.ours && <span className={styles.transferAddressOurs} role='img' aria-label='wallet address'>&#128091;</span>} {props.address}\n            </div>\n\n            <div className={styles.transferMessage}>\n              {props.message && <q>{props.message}</q>}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className={styles.transferRight}>\n        {\n          props.detailed && props.locked &&\n            <div className={styles.transferUnlockTime}>\n              {lockedUntil}\n            </div>\n        }\n        <div className={`${styles.transferAmount} ${amountClass}`}>\n          {util.formatBCNDelta(props.amount, props.detailed ? 3 : 2, props.ours)}\n          {props.locked && <span className={styles.transferAmountLocked}>&#128274;</span>}\n          {props.isUnlock && <span className={styles.transferAmountUnlocked}>&#128275;</span>}\n          {props.unconfirmed && <span className={styles.transferUnconfirmed}>&#9203;</span>}\n        </div>\n        {\n          sendproof &&\n          <div className={styles.transferSendproof}>\n            <a href={`https://explorer.bytecoin.org/search?search=${sendproof}`} title='See sendproof in Bytecoin Explorer' target='_blank' rel='noreferrer noopener'>\n              Sendproof\n            </a>\n          </div>\n        }\n      </div>\n    </div>\n  );\n});\n\nconst AddressIcon = React.memo((props: {address: string}) => {\n  return (\n    <div className={styles.addressIcon} title={props.address}>\n      <Avatar message={props.address}/>\n    </div>\n  );\n});\n\nexport default History;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport * as walletd from './lib/walletd';\nimport * as loop from './lib/loop';\nimport * as util from './lib/util';\nimport {Status, Controls} from './Header';\nimport History from './History';\nimport styles from './css/Wallet.module.css';\n\nconst initialStatus: loop.IStatus = {\n  topBlockHeight: 0,\n  topBlockTime: new Date(0), // TODO use date just before wallet creation timestamp\n  topBlockHash: '',\n  topKnownBlockHeight: 0,\n  lowerLevelError: '',\n};\n\nconst initialBalance: loop.IBalance = {\n  spendable: 0,\n  lockedOrUnconfirmed: 0,\n};\n\nconst Wallet = React.memo((props: {description: string, isNew: boolean, onClose: () => void}) => {\n  const [wallet, setWallet] = useState<walletd.Walletd | null>(null);\n  const [status, setStatus] = useState<loop.IStatus>(initialStatus);\n  const [balance, setBalance] = useState<loop.IBalance>(initialBalance);\n  const [addresses, setAddresses] = useState<loop.IAddress[]>([]);\n  const [history, setHistory] = useState<loop.IDay[]>([]);\n\n  useEffect(() => {\n    loop.start(props.description, props.isNew, setWallet, setStatus, setBalance, setAddresses, setHistory).then(() => {\n      console.info('wallet closed');\n      props.onClose();\n    });\n  }, [props]);\n\n  return (\n    <div className={styles.wallet}>\n      <util.WalletContext.Provider value={wallet}>\n        <Status {...status}/>\n        <Controls {...status} {...balance} addresses={addresses}/>\n\n        <History history={history}/>\n      </util.WalletContext.Provider>\n    </div>\n  );\n});\n\nexport default Wallet;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState} from 'react';\nimport {SwitchTransition, CSSTransition} from 'react-transition-group';\nimport styles from './css/App.module.css';\nimport OpenForm from './OpenForm';\nimport Wallet from './Wallet';\n\nconst App = React.memo(() => {\n  const [walletDescription, setWalletDescription] = useState('');\n  const [walletNew, setWalletNew] = useState(false);\n\n  return (\n    <div className={`${styles.app} container`}>\n      <SwitchTransition>\n        <CSSTransition timeout={300} key={walletDescription} mountOnEnter={true} unmountOnExit={true} classNames='app-main'>\n          <>\n            {!walletDescription &&\n              <OpenForm onOpen={(desc, isNew) => {\n                setWalletDescription(desc);\n                setWalletNew(isNew);\n              }}/>\n            }\n            {walletDescription &&\n              <Wallet description={walletDescription} isNew={walletNew} onClose={() => setWalletDescription('')}/>\n            }\n          </>\n        </CSSTransition>\n      </SwitchTransition>\n\n      <div className={styles.footer}>\n        © 2019 The Bytecoin developers · <a href='https://github.com/bcndev/bytecoin-zero/blob/master/doc/index.md' target='_blank' rel='noreferrer noopener'>Documentation</a>\n      </div>\n      <div className={styles.warning}>\n        Unstable development version. For testing only.\n      </div>\n    </div>\n  );\n});\n\nexport default App;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport './css/bootstrap-reboot.css';\nimport './css/index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"openForm\":\"OpenForm_openForm__2ypzS\",\"logo\":\"OpenForm_logo__1ffzy\",\"body\":\"OpenForm_body__1a3h9\",\"descGroup\":\"OpenForm_descGroup__2PBWN\",\"controls\":\"OpenForm_controls__1ZRJV\",\"genButton\":\"OpenForm_genButton__YZEW6\",\"openButton\":\"OpenForm_openButton__1i5vT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"receiveForm\":\"ReceiveForm_receiveForm__3S8Rf\",\"address\":\"ReceiveForm_address__3gtEd\",\"addressIcon\":\"ReceiveForm_addressIcon__3oUN-\",\"addressOurs\":\"ReceiveForm_addressOurs__3ABdK\",\"addressData\":\"ReceiveForm_addressData__3OJnP\",\"addressText\":\"ReceiveForm_addressText__RdNp7\",\"share\":\"ReceiveForm_share__1AbGJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sendForm\":\"SendForm_sendForm__1ZDqj\",\"transfer\":\"SendForm_transfer__21yxz\",\"addressGroup\":\"SendForm_addressGroup__3yNWl\",\"amountGroup\":\"SendForm_amountGroup__1Wz5t\",\"controls\":\"SendForm_controls__dTO2_\",\"cancelButton\":\"SendForm_cancelButton__19jKN\",\"sendButton\":\"SendForm_sendButton__29F46\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5575295b.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__31x5q\",\"footer\":\"App_footer__2CXQ2\",\"warning\":\"App_warning__20zto\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"History_history__3m48Z\",\"historyDay\":\"History_historyDay__MS_O1\",\"historyDayHeader\":\"History_historyDayHeader__QQ7e6\",\"historyDayDate\":\"History_historyDayDate__3yrV-\",\"historyDayRows\":\"History_historyDayRows__16fnV\",\"tx\":\"History_tx__2fPJs\",\"txBody\":\"History_txBody__2Agvz\",\"transfer\":\"History_transfer__2KCQp\",\"transferLeft\":\"History_transferLeft__1M3ZX\",\"transferRight\":\"History_transferRight__291Rd\",\"transferKind\":\"History_transferKind__2_rsq\",\"transferDetails\":\"History_transferDetails__2--cR\",\"transferIcon\":\"History_transferIcon__3CLzM\",\"transferDescription\":\"History_transferDescription__1nIrR\",\"transferAddress\":\"History_transferAddress__13N9Z\",\"transferAddressOurs\":\"History_transferAddressOurs__2QuZW\",\"transferHelp\":\"History_transferHelp__QlVmn\",\"transferMessage\":\"History_transferMessage__3wR4k\",\"transferUnlockTime\":\"History_transferUnlockTime__12h5U\",\"transferAmount\":\"History_transferAmount__3HBML\",\"unlockedTransferContainer\":\"History_unlockedTransferContainer__1xP2t\",\"transferAmountLocked\":\"History_transferAmountLocked__iubWj\",\"transferAmountUnlocked\":\"History_transferAmountUnlocked__2IThK\",\"transferUnconfirmed\":\"History_transferUnconfirmed__2QYx5\",\"transferSendproof\":\"History_transferSendproof__3t8ZJ\",\"addressIcon\":\"History_addressIcon__3IPXL\",\"txDetails\":\"History_txDetails__2fFz9\",\"txMetadata\":\"History_txMetadata__26edo\",\"txBlockTime\":\"History_txBlockTime__34qQ0\",\"txHash\":\"History_txHash__3VJ4U\",\"txFee\":\"History_txFee__2frgk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__1VVPr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wallet\":\"Wallet_wallet__dvihQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"Header_status__3GdbX\",\"statusIcon\":\"Header_statusIcon__3l5kg\",\"syncStatusSummary\":\"Header_syncStatusSummary__13R4E\",\"syncStatus\":\"Header_syncStatus__2bShQ\",\"syncStatusBlock\":\"Header_syncStatusBlock__QGm0w\",\"syncStatusTimestamp\":\"Header_syncStatusTimestamp__3CIJb\",\"syncStatusError\":\"Header_syncStatusError__D0k4Z\",\"ellipsis\":\"Header_ellipsis__18Dt5\",\"controls\":\"Header_controls__c8U9c\",\"main\":\"Header_main__3Ub_W\",\"balance\":\"Header_balance__1vbiD\",\"recv\":\"Header_recv__2kAPq\",\"send\":\"Header_send__vE6ox\",\"settingsButton\":\"Header_settingsButton__2x0bg\",\"balanceAvailable\":\"Header_balanceAvailable__3OcSq\",\"balancePending\":\"Header_balancePending__OPnZB\",\"drawer\":\"Header_drawer__6QQ6R\",\"settings\":\"Header_settings__fwyj8\",\"noSleepGroup\":\"Header_noSleepGroup__xKP52\",\"closeWallet\":\"Header_closeWallet__cU-hB\"};"],"sourceRoot":""}