{"version":3,"sources":["css/Header.module.css","css/OpenForm.module.css","lib/util.ts","lib/sync.ts","Avatar.tsx","OpenForm.tsx","lib/walletd.ts","img/Arrow_northeast.svg","img/Arrow_southeast.svg","Header.tsx","SettingsForm.tsx","ReceiveForm.tsx","SendForm.tsx","img/Arrow_southwest.svg","History.tsx","Wallet.tsx","App.tsx","index.tsx","css/ReceiveForm.module.css","css/SendForm.module.css","css/SettingsForm.module.css","img/logo.svg","css/App.module.css","css/Avatar.module.css","css/History.module.css","css/Wallet.module.css"],"names":["module","exports","try_","promise","then","data","catch","err","undefined","groupBy","items","keyGetter","m","Map","forEach","item","key","group","get","push","set","delay","ms","prev","Promise","resolve","offset","Date","now","timeout","Math","max","setTimeout","formatDateTime","d","toLocaleString","navigator","language","year","month","day","hour","minute","curLocale","localeId","replace","shortLocaleId","slice","locales","formatTimeRelative","t","formatDistance","addSuffix","locale","formatBCN","amount","frac","Number","MAX_SAFE_INTEGER","console","warn","style","currency","currencyDisplay","minimumFractionDigits","WalletContext","React","createContext","digest","message","a","enc","TextEncoder","encode","window","crypto","subtle","bioApprove","rpName","userName","userDisplayName","pkCred","PublicKeyCredential","log","isUserVerifyingPlatformAuthenticatorAvailable","storageKey","prevPK","localStorage","getItem","credentials","challenge","Uint8Array","getRandomValues","opts","userVerification","allowCredentials","type","id","hex","match","map","h","parseInt","publicKey","pk","name","displayName","alg","authenticatorAttachment","rp","user","pubKeyCredParams","authenticatorSelection","create","setItem","buf","rawId","Array","from","b","toString","padStart","join","TxKind","TransferKind","Avatar","memo","props","useState","content","setContent","useEffect","util","trim","normalize","arr","body","bodyColor","eyes","eyesColor","mouth","mouthColor","svg","inner","className","styles","avatar","dangerouslySetInnerHTML","__html","OpenForm","description","setDescription","genDescription","setGenDescription","descriptionValid","setDescriptionValid","opening","setOpening","existingWallets","setExistingWallets","w","i","length","addr","substring","checkAddressFormat","info","JSON","parse","wInfo","filename","hasOwnProperty","firstAddress","viewOnly","lastOpen","sort","reverse","open","isFile","desc","isNew","onOpen","openForm","logo","src","alt","fromDescription","descGroup","placeholder","rows","autoCapitalize","autoComplete","spellCheck","maxLength","value","onChange","e","target","ok","auditPattern","test","checkAuditFormat","validateMnemonic","toLowerCase","englishWordlist","controls","genButton","onClick","generateMnemonic","openButton","disabled","walletFile","walletDesc","walletDetails","title","Walletd","bytecoindAddr","n","closed","cn_walletd_start","this","closeWallet","req","rpc","method","params","reject","json","jsonrpc","label","time","postJSON","resp","timeEnd","msg","error","code","Error","result","timestamp","openWallet","wallet_file","wallet_password","createWallet","mnemonic","creation_timestamp","path","stringify","handle","cn_http_server_call","status","cn_http_server_cancel","isWalletClosedErr","indexOf","setWallet","setStatus","setBalance","setAddresses","setHistory","round","valueOf","walletd","DEFAULT_BYTECOIND_ADDR","instance","alert","lastStatusTime","lastStatusReq","state","TransferState","height","days","MAX_STATUS_DELAY_MS","getStatus","errStatus","top_known_block_height","top_block_hash","transaction_pool_version","lower_level_error","topBlockHeight","top_block_height","topBlockTime","top_block_timestamp","topBlockHash","topKnownBlockHeight","lowerLevelError","height_or_depth","CONFIRMED_DEPTH","getBalance","balance","errBalance","spendable","lockedOrUnconfirmed","locked_or_unconfirmed","confHeight","confirmedHeight","from_height","to_height","forward","desired_transaction_count","TX_HISTORY_SIZE","getTransfers","transferData","mergeConfirmedFuture","blocks","TX_CATCH_UP_BATCH_SIZE","next_from_height","resetUnconfirmedFuture","mempoolHeight","unconfirmedHeight","mergeUnconfirmedFuture","newDays","mergeUnconfirmed","getWalletRecords","walletRecords","getFilename","records","address","addresses","record","close","CONFIRMATIONS","confirmedDays","unconfirmedDays","mergeFuture","mergeDays","base","confirmed","newBlocksByDateTimestamp","transformBlock","block","header","date","mergedDay","transactions","tx","txKind","transfers","allOurs","every","ours","Send","allAmountsNonNeg","Receive","Redistribute","txKindFromTransfers","transfer","kind","transferKind","locked","unlockBlockOrTimestamp","unlock_block_or_timestamp","transactionHash","transaction_hash","groupedTransfers","spend","filter","Spend","send","receive","change","Change","summary","addrTransfers","totalAmount","reduce","sum","some","hash","t1","t2","fee","unlockedTransfers","unlocked_transfers","blockMonotonicTime","timestamp_median","startOfDay","_extends","Object","assign","arguments","source","prototype","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","transform","points","_ref","svgRef","width","viewBox","xmlSpace","ref","ForwardRef","forwardRef","DrawerType","SettingsForm","syncing","farBehind","wantNoSleep","userAgent","wallet","useContext","noSleep","useRef","NoSleep","turnNoSleep","on","current","enable","disable","exportMnemonic","getWalletInfo","need_secrets","document","write","first_address","print","settingsForm","noSleepGroup","checked","htmlFor","exportMnemonicGroup","dismiss","ReceiveForm","creatingAddress","setCreatingAddress","canShare","share","addAddress","doAddAddress","createAddresses","secret_spend_keys","errCreate","receiveForm","addressIcon","addressData","addressText","text","SendForm","setAddress","setAmount","addressValid","setAddressValid","amountValid","setAmountValid","sending","setSending","doSend","createTransaction","transaction","any_spend_address","change_address","confirmed_height_or_depth","sync","txResp","confirm","sendTransaction","binary_transaction","sendResp","errSend","sendForm","addressViz","transferBody","addressGroup","amountGroup","min","step","am","parseFloat","sendButton","cancelButton","Status","initializing","relTime","updateInterval","setRelTime","setInterval","clearInterval","statusIcon","syncStatusSummary","syncStatus","ellipsis","syncStatusError","syncStatusBlock","hidden","href","rel","syncStatusTimestamp","Controls","settingsOpen","setSettingsOpen","None","drawerType","setDrawerType","nextDrawerType","setNextDrawerType","transitionDrawer","transitionNextDrawer","CSSTransition","in","mountOnEnter","classNames","drawer","main","balanceAvailable","settingsButton","balancePending","recv","onExited","unmountOnExit","History","history","emptyHistory","TransitionGroup","component","Day","historyDay","historyDayHeader","historyDayDate","toLocaleDateString","weekday","historyDayRows","appear","flatMap","txs","Transaction","unlockedTransferContainer","Transfer","isUnlock","expanded","setExpanded","detailsAnimating","setDetailsAnimating","kindClass","txBody","unconfirmed","onExit","txDetails","txMetadata","txBlockTime","toLocaleTimeString","txHash","txFee","detailed","genSendproof","isSpend","isSend","isReceive","lockedUntil","sendproof","setSendproof","help","amountClass","createSendproof","transferLeft","transferDetails","transferIcon","AddressIcon","transferDescription","transferHelp","transferAddress","transferAddressOurs","role","aria-label","transferMessage","transferRight","transferUnlockTime","transferAmount","sign","abs","transferAmountLocked","transferAmountUnlocked","transferUnconfirmed","transferSendproof","initialStatus","initialBalance","Wallet","onClose","Provider","App","walletIsExistingFile","setWalletIsExistingFile","walletDescription","setWalletDescription","walletNew","setWalletNew","walletViewOnly","setWalletViewOnly","app","SwitchTransition","footer","process","warning","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d0e43e41.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"status\":\"Header_status__3GdbX\",\"statusIcon\":\"Header_statusIcon__3l5kg\",\"syncStatusSummary\":\"Header_syncStatusSummary__13R4E\",\"syncStatus\":\"Header_syncStatus__2bShQ\",\"syncStatusBlock\":\"Header_syncStatusBlock__QGm0w\",\"syncStatusTimestamp\":\"Header_syncStatusTimestamp__3CIJb\",\"syncStatusError\":\"Header_syncStatusError__D0k4Z\",\"ellipsis\":\"Header_ellipsis__18Dt5\",\"controls\":\"Header_controls__c8U9c\",\"main\":\"Header_main__3Ub_W\",\"recv\":\"Header_recv__2kAPq\",\"send\":\"Header_send__vE6ox\",\"balance\":\"Header_balance__1vbiD\",\"settingsButton\":\"Header_settingsButton__2x0bg\",\"balanceAvailable\":\"Header_balanceAvailable__3OcSq\",\"balancePending\":\"Header_balancePending__OPnZB\",\"drawer\":\"Header_drawer__6QQ6R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"openForm\":\"OpenForm_openForm__2ypzS\",\"logo\":\"OpenForm_logo__1ffzy\",\"fromDescription\":\"OpenForm_fromDescription__2kFmQ\",\"descGroup\":\"OpenForm_descGroup__2PBWN\",\"controls\":\"OpenForm_controls__1ZRJV\",\"genButton\":\"OpenForm_genButton__YZEW6\",\"openButton\":\"OpenForm_openButton__1i5vT\",\"existingWallets\":\"OpenForm_existingWallets__3mAK0\",\"walletFile\":\"OpenForm_walletFile__1P-7c\",\"avatar\":\"OpenForm_avatar__24yda\",\"walletDesc\":\"OpenForm_walletDesc__1-9lA\",\"walletDetails\":\"OpenForm_walletDetails__3rRmy\",\"viewOnly\":\"OpenForm_viewOnly__GJgmw\",\"lastOpen\":\"OpenForm_lastOpen__1zk6s\",\"firstAddress\":\"OpenForm_firstAddress__3UVzR\"};","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport {formatDistance} from 'date-fns';\nimport * as locales from 'date-fns/locale';\nimport * as walletd from './walletd';\n\nexport function try_<T, U = Error> (promise: Promise<T>): Promise<[T | undefined, U | null]> {\n  return promise\n    .then<[T, null]>((data: T) => [data, null])\n    .catch<[undefined, U]>((err: U) => [undefined, err])\n  ;\n}\n\nexport function buf2hex(buf: ArrayBuffer): string {\n  return Array.from(new Uint8Array(buf)).map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function hex2buf(hex: string): ArrayBuffer {\n  return new Uint8Array((hex.match(/[\\da-f]{2}/gi) || []).map((h) => parseInt(h, 16)));\n}\n\nexport function groupBy<T, U>(items: T[], keyGetter: (item: T) => U): Map<U, T[]> {\n  const m = new Map();\n\n  items.forEach((item) => {\n    const key = keyGetter(item);\n\n    const group = m.get(key);\n    if (!group) {\n      m.set(key, [item]);\n    } else {\n      group.push(item);\n    }\n  });\n\n  return m;\n}\n\nexport function isMobile(): boolean {\n  return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n}\n\nexport function delay(ms: number, prev?: number): Promise<number> {\n  return new Promise((resolve) => {\n    const offset = prev !== undefined ? Date.now() - prev : 0;\n    const timeout = Math.max(ms - offset, 1);\n\n    setTimeout(() => resolve(Date.now()), timeout)\n  });\n}\n\nexport function formatDateTime(d: Date): string {\n  return d.toLocaleString(navigator.language, {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n}\n\nexport function formatDate(d: Date): string {\n  return d.toLocaleDateString(navigator.language, {\n    weekday: 'short',\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  });\n}\n\nexport function formatTime(d: Date): string {\n  return d.toLocaleTimeString(navigator.language, {\n    hour: 'numeric',\n    minute: 'numeric',\n  });\n}\n\nfunction curLocale() {\n  const localeId = navigator.language.replace('-', '');\n  const shortLocaleId = localeId.slice(0, 2);\n  return (locales as any)[localeId] || (locales as any)[shortLocaleId] || locales.enUS;\n}\n\nexport function formatTimeRelative(t: Date): string {\n  return formatDistance(t, Date.now(), {\n    addSuffix: true,\n    locale: curLocale(),\n  });\n}\n\nexport function formatNumber(n: number): string {\n  return n.toLocaleString(navigator.language);\n}\n\nexport function formatBCN(amount: number, frac: number = 2): string {\n  if (amount >= Number.MAX_SAFE_INTEGER) {\n    console.warn(`amount ${amount} too big to be exactly represented in JavaScript`);\n  }\n\n  return (amount / 1e8).toLocaleString(navigator.language, {\n    style: 'currency',\n    currency: 'BCN',\n    currencyDisplay: 'code',\n    minimumFractionDigits: frac,\n  });\n}\n\nexport function formatBCNDelta(amount: number, frac: number = 2, showSign: boolean = false): string {\n  const sign = amount > 0 ? '+' : (amount < 0 ? '−' : '');\n\n  return ((!showSign || sign === '') ? '' : (sign + '\\u202F')) + formatBCN(Math.abs(amount), frac);\n}\n\nexport function useRelativeTime(t: Date, updateInterval: number = 15 * 1000) {\n  const [relTime, setRelTime] = useState(formatTimeRelative(t));\n\n  useEffect(() => {\n    setRelTime(formatTimeRelative(t));\n\n    const handle = setInterval(() => {\n      setRelTime(formatTimeRelative(t));\n    }, updateInterval);\n\n    return () => {\n      clearInterval(handle);\n    };\n  }, [t, updateInterval]);\n\n  return relTime;\n}\n\nexport const WalletContext = React.createContext<walletd.Walletd | null>(null);\n\nexport async function digest(message: string): Promise<ArrayBuffer> {\n  const enc = new TextEncoder();\n  const data = enc.encode(message);\n  return window.crypto.subtle.digest('SHA-256', data);\n}\n\nexport async function bioApprove(rpName: string, userName: string, userDisplayName: string): Promise<boolean> {\n  const pkCred = (window as any).PublicKeyCredential;\n  if (!pkCred) {\n    console.log(`skipping authentication for ${userName}@${rpName} due to lacking platform support (public key credentials)`);\n    return true;\n  }\n\n  const available = await pkCred.isUserVerifyingPlatformAuthenticatorAvailable();\n  if (!available) {\n    console.log(`skipping authentication for ${userName}@${rpName} due to lacking platform support (user verification)`);\n    return true;\n  }\n\n  const storageKey = `bio-approve ${userName}@${rpName}`;\n  const timeout = 30 * 1000;\n  const prevPK = window.localStorage.getItem(storageKey) || '';\n  const credentials = (window.navigator as any).credentials;\n\n  const challenge = new Uint8Array(32);\n  window.crypto.getRandomValues(challenge);\n\n  if (prevPK) {\n    const opts = {\n      challenge,\n      timeout,\n      userVerification: 'required',\n      allowCredentials: [{\n        type: 'public-key',\n        id: hex2buf(prevPK),\n      }],\n    };\n\n    const [pk, err] = await try_(credentials.get({ publicKey: opts }));\n    if (err !== null) {\n      console.warn(`authentication for ${userName}@${rpName} failed: ${err}`);\n      return false;\n    }\n\n    console.log(`successfully authenticated ${userName}@${rpName} with ${pk.id}`);\n\n    return true;\n  } else {\n    const opts = {\n      rp: {\n        name: rpName,\n      },\n      user: {\n        id: await digest(`${userName}@${rpName}`),\n        name: userName,\n        displayName: userDisplayName,\n      },\n      challenge,\n      timeout,\n      userVerification: 'required',\n      pubKeyCredParams: [{\n        type: 'public-key',\n        alg: -7, // ECDSA\n      }],\n      authenticatorSelection: {\n        authenticatorAttachment: 'platform',\n        userVerification: 'required',\n      },\n    };\n\n    const [pk, err] = await try_(credentials.create({ publicKey: opts }));\n    if (err !== null) {\n      console.warn(`first authentication for ${userName}@${rpName} failed: ${err}`);\n      return false;\n    }\n\n    window.localStorage.setItem(storageKey, buf2hex(pk.rawId));\n    console.log(`successfully authenticated ${userName}@${rpName} for the first time with ${pk.id}`);\n\n    return true;\n  }\n}\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport {startOfDay} from 'date-fns';\nimport * as walletd from './walletd';\nimport * as util from './util';\n\nexport interface IStatus {\n  readonly topBlockHeight: number;\n  readonly topBlockTime: Date;\n  readonly topBlockHash: string;\n  readonly topKnownBlockHeight: number;\n  readonly lowerLevelError: string;\n}\n\nexport interface IBalance {\n  readonly spendable: number;\n  readonly lockedOrUnconfirmed: number;\n}\n\nexport interface IAddress {\n  readonly address: string;\n  readonly label: string;\n}\n\nexport interface IBlockHeader {\n  readonly confirmed: boolean;\n  readonly hash: string;\n  readonly height: number;\n  readonly time: Date;\n  readonly date: Date; // guaranteed to be monotonically increasing, unlike time\n}\n\nexport interface IBlock {\n  readonly header: IBlockHeader;\n  readonly transactions: ITransaction[];\n  readonly unlockedTransfers: ITransfer[];\n}\n\nexport interface IDay {\n  readonly date: Date;\n  readonly blocks: IBlock[];\n}\n\nexport enum TxKind {\n  Send         = 0, // outgoing, balance delta <= 0\n  Receive      = 1, // incoming, balance delta >= 0\n  Redistribute = 2, // internal, balance delta == 0\n}\n\nexport interface ITransaction {\n  readonly time: Date;\n  readonly kind: TxKind;\n  readonly hash: string;\n  readonly fee: number;\n  readonly summary: ITransfer[];\n  readonly transfers: IGroupedTransfers;\n}\n\nexport interface IGroupedTransfers {\n  readonly spend: ITransfer[];\n  readonly send: ITransfer[];\n  readonly receive: ITransfer[];\n  readonly change: ITransfer[];\n}\n\nexport enum TransferKind {\n  Spend   = 0, //  ours, amount <  0\n  Send    = 1, // !ours, amount >= 0 (only in TxKind.Send)\n  Receive = 2, //  ours, amount >= 0\n  Change  = 3, //  ours, amount >  0 (only in TxKind.Send)\n}\n\nexport interface ITransfer {\n  readonly kind: TransferKind;\n  readonly address: string;\n  readonly amount: number;\n  readonly message: string;\n  readonly ours: boolean;\n  readonly locked: boolean;\n  readonly unlockBlockOrTimestamp: number;\n  readonly transactionHash: string;\n}\n\nexport interface IWalletInstanceInfo {\n  readonly viewOnly: boolean;\n  readonly lastOpen: number;\n}\n\nexport interface IAddressWalletsInfo {\n  [filename: string]: IWalletInstanceInfo;\n}\n\nexport interface IExistingWalletInfo {\n  [addr: string]: IAddressWalletsInfo;\n}\n\nexport const MAX_BLOCK_NUMBER = 500000000;\n\nfunction isWalletClosedErr(err: Error | null): boolean {\n  return err !== null && (err.message.indexOf('#-32600: Wallet closed') !== -1 || err.message.indexOf('#-32600: Wallet must be open') !== -1);\n}\n\nexport async function start(\n  isFile: boolean,\n  description: string,\n  isNew: boolean,\n  viewOnly: boolean,\n  setWallet: (wallet: walletd.Walletd) => void,\n  setStatus: (status: IStatus) => void,\n  setBalance: (balance: IBalance) => void,\n  setAddresses: (addresses: IAddress[]) => void,\n  setHistory: (days: IDay[]) => void,\n) {\n  const timestamp = isNew ? Math.round(Date.now().valueOf() / 1000) : 0;\n\n  const [instance, err] = await util.try_(walletd.Walletd.create(DEFAULT_BYTECOIND_ADDR, isFile, description, timestamp));\n  if (instance === undefined) {\n    alert(`Failed to open wallet: ${err}`);\n    return;\n  }\n\n  try {\n    setWallet(instance);\n\n    let lastStatusTime = Date.now();\n    let lastStatusReq: walletd.IGetStatusReq = {};\n\n    let state = new TransferState();\n    let height = 0;\n    let days: IDay[] = [];\n\nsyncLoop:\n    while (height >= 0) {\n      lastStatusTime = await util.delay(MAX_STATUS_DELAY_MS, lastStatusTime);\n\n      const [status, errStatus] = await util.try_(instance.getStatus(lastStatusReq));\n      if (status === undefined) {\n        console.warn('failed to get status', lastStatusReq, errStatus);\n        if (isWalletClosedErr(errStatus)) {\n          return;\n        } else {\n          continue;\n        }\n      } else if (status.top_known_block_height === 0) {\n        continue;\n      }\n\n      lastStatusReq = {\n        top_block_hash: status.top_block_hash,\n        transaction_pool_version: status.transaction_pool_version,\n        lower_level_error: status.lower_level_error,\n      };\n\n      setStatus({\n        topBlockHeight: status.top_block_height,\n        topBlockTime: new Date(status.top_block_timestamp * 1000),\n        topBlockHash: status.top_block_hash,\n        topKnownBlockHeight: status.top_known_block_height,\n        lowerLevelError: status.lower_level_error,\n      });\n\n      const req = {\n        height_or_depth: CONFIRMED_DEPTH, // do not use confirmedHeight() here to avoid an error during fast sync\n      };\n      const [balance, errBalance] = await util.try_(instance.getBalance(req));\n      if (balance === undefined) {\n        console.warn('failed to get balance', req, errBalance);\n        if (isWalletClosedErr(errBalance)) {\n          return;\n        } else {\n          continue;\n        }\n      }\n      setBalance({\n        spendable: balance.spendable,\n        lockedOrUnconfirmed: balance.locked_or_unconfirmed,\n      });\n\n      const confHeight = confirmedHeight(status.top_block_height);\n\n      if (height === 0 && confHeight !== 0) {\n        const req = {\n          from_height: height,\n          to_height: confHeight,\n          forward: false,\n          desired_transaction_count: TX_HISTORY_SIZE,\n        };\n        const [transferData, err] = await util.try_(instance.getTransfers(req));\n        if (transferData === undefined) {\n          console.warn('failed to get history transfers', req, err);\n          if (isWalletClosedErr(err)) {\n            return;\n          } else {\n            continue;\n          }\n        }\n\n        state.mergeConfirmedFuture((transferData.blocks || []).reverse());\n        height = confHeight;\n      } else {\n        while (height < confHeight) {\n          const req = {\n            from_height: height,\n            to_height: confHeight,\n            forward: true,\n            desired_transaction_count: TX_CATCH_UP_BATCH_SIZE,\n          };\n\n          const [transferData, err] = await util.try_(instance.getTransfers(req));\n          if (transferData === undefined) {\n            console.warn('failed to get transfers', req, err);\n            if (isWalletClosedErr(err)) {\n              return;\n            } else {\n              continue syncLoop;\n            }\n          }\n\n          state.mergeConfirmedFuture(transferData.blocks || []);\n          height = transferData.next_from_height;\n        }\n\n        state.resetUnconfirmedFuture();\n        const mempoolHeight = status.top_block_height + 1;\n        let unconfirmedHeight = height;\n\n        while (unconfirmedHeight < mempoolHeight) {\n          const req = {\n            from_height: unconfirmedHeight,\n            to_height: mempoolHeight,\n            forward: true,\n            desired_transaction_count: TX_CATCH_UP_BATCH_SIZE,\n          };\n\n          const [transferData, err] = await util.try_(instance.getTransfers(req));\n          if (transferData === undefined) {\n            console.warn('failed to get future transfers', req, err);\n            if (isWalletClosedErr(err)) {\n              return;\n            } else {\n              continue syncLoop;\n            }\n          }\n\n          state.mergeUnconfirmedFuture(transferData.blocks || []);\n          unconfirmedHeight = transferData.next_from_height;\n        }\n      }\n\n      const newDays = state.mergeUnconfirmed();\n      if (newDays !== days) {\n        days = newDays;\n        setHistory(days);\n\n        const [walletRecords, err] = await util.try_(instance.getWalletRecords({}));\n        if (walletRecords === undefined) {\n          console.warn('failed to get wallet records', err);\n          if (isWalletClosedErr(err)) {\n            return;\n          } else {\n            continue;\n          }\n        }\n\n        if (instance.getFilename() !== '' && walletRecords.records.length > 0) {\n          const key = `wallet.${walletRecords.records[0].address}`;\n          const info: IAddressWalletsInfo = JSON.parse(window.localStorage.getItem(key) || '{}');\n          info[instance.getFilename()] = {\n            lastOpen: Date.now().valueOf(),\n            viewOnly,\n          };\n          window.localStorage.setItem(key, JSON.stringify(info));\n        }\n\n        const addresses = walletRecords.records.map((record): IAddress => {\n          return {\n            address: record.address,\n            label: record.label,\n          };\n        });\n\n        setAddresses(addresses);\n      }\n    }\n  } catch (err) {\n    alert(`Unexpected error: ${err}\\n\\nPlease try reloading this page.`);\n  } finally {\n    await instance.close();\n  }\n}\n\nconst DEFAULT_BYTECOIND_ADDR = 'https://node02.bytecoin.org:8091';\n\nconst MAX_STATUS_DELAY_MS = 100;\n\nconst CONFIRMATIONS = 3;\nexport const CONFIRMED_DEPTH = -CONFIRMATIONS - 1; // TODO is -1 right here?\nconst TX_HISTORY_SIZE = 1000;                      // TODO incremental history loading\nconst TX_CATCH_UP_BATCH_SIZE = 100;\n\nfunction confirmedHeight(height: number): number {\n  return Math.max(height - CONFIRMATIONS, 0);\n}\n\nclass TransferState {\n  private confirmedDays:   IDay[] = []; // reverse chronological order\n  private unconfirmedDays: IDay[] = []; // reverse chronological order\n\n  mergeConfirmedFuture(blocks: walletd.IBlock[]): void {\n    this.confirmedDays = TransferState.mergeFuture(this.confirmedDays, blocks, true);\n  }\n\n  resetUnconfirmedFuture(): void {\n    this.unconfirmedDays = [];\n  }\n\n  mergeUnconfirmedFuture(blocks: walletd.IBlock[]): void {\n    this.unconfirmedDays = TransferState.mergeFuture(this.unconfirmedDays, blocks, false);\n  }\n\n  mergeUnconfirmed(): IDay[] {\n    return TransferState.mergeDays(this.confirmedDays, this.unconfirmedDays);\n  }\n\n  private static mergeFuture(base: IDay[], blocks: walletd.IBlock[], confirmed: boolean): IDay[] {\n    const newBlocks = blocks.map((b) => TransferState.transformBlock(b, confirmed)).reverse();\n    const newBlocksByDateTimestamp = util.groupBy(newBlocks, (block) => block.header.date.valueOf());\n\n    const newDays: IDay[] = [];\n    for (const [timestamp, blocks] of newBlocksByDateTimestamp) {\n      newDays.push({\n        date: new Date(timestamp),\n        blocks,\n      });\n    }\n\n    return TransferState.mergeDays(base, newDays);\n  }\n\n  private static mergeDays(base: IDay[], newDays: IDay[]): IDay[] {\n    if (newDays.length === 0) {\n      return base;\n    }\n\n    if (base.length > 0 && newDays[newDays.length-1].date.valueOf() === base[0].date.valueOf()) {\n      const mergedDay: IDay = {\n        date: newDays[newDays.length-1].date,\n        blocks: [...newDays[newDays.length-1].blocks,  ...base[0].blocks],\n      };\n\n      return [...newDays.slice(0, newDays.length-1), mergedDay, ...base.slice(1)];\n    } else {\n      return [...newDays, ...base];\n    }\n  }\n\n  private static transformBlock(block: walletd.IBlock, confirmed: boolean): IBlock {\n    const transactions: ITransaction[] = (block.transactions || []).map((tx) => {\n      const txKind = txKindFromTransfers(tx.transfers || []);\n\n      const transfers: ITransfer[] = (tx.transfers || []).map((transfer) => ({\n        kind: transferKind(transfer.amount, transfer.ours || false, txKind),\n        address: transfer.address,\n        amount: transfer.amount,\n        message: transfer.message || '',\n        ours: transfer.ours || false,\n        locked: transfer.locked || false,\n        unlockBlockOrTimestamp: transfer.unlock_block_or_timestamp || 0,\n        transactionHash: transfer.transaction_hash || '',\n      }));\n\n      const groupedTransfers = {\n        spend: transfers.filter((t) => t.kind === TransferKind.Spend),\n        send: transfers.filter((t) => t.kind === TransferKind.Send),\n        receive: transfers.filter((t) => t.kind === TransferKind.Receive),\n        change: transfers.filter((t) => t.kind === TransferKind.Change),\n      };\n\n      let summary: ITransfer[] = [];\n      switch (txKind) {\n        case TxKind.Send:\n          summary = groupedTransfers.send;\n          break;\n        case TxKind.Receive:\n          summary = groupedTransfers.receive;\n          break;\n        case TxKind.Redistribute:\n          const transfersByAddr = [...util.groupBy(transfers, (t) => t.address)];\n          summary = transfersByAddr.map(([addr, addrTransfers]): ITransfer => {\n            const totalAmount = addrTransfers.reduce((sum, t) => sum + t.amount, 0);\n            return {\n              kind: totalAmount < 0 ? TransferKind.Spend : TransferKind.Receive,\n              address: addr,\n              amount: totalAmount,\n              message: addrTransfers.map((t) => t.message).filter((msg) => msg.length > 0).join(' | '),\n              ours: true,\n              locked: addrTransfers.some((t) => t.locked),\n              unlockBlockOrTimestamp: 0,\n              transactionHash: tx.hash,\n            };\n          }).sort((t1, t2) => t1.kind - t2.kind);\n          break;\n      }\n\n      return {\n        time: new Date(tx.timestamp * 1000),\n        kind: txKind,\n        hash: tx.hash,\n        fee: tx.fee,\n        summary,\n        transfers: groupedTransfers,\n      };\n    });\n\n    const unlockedTransfers: ITransfer[] = (block.unlocked_transfers || []).map((transfer) => {\n      return {\n        kind: transferKind(transfer.amount, transfer.ours || false, TxKind.Receive),\n        address: transfer.address,\n        amount: transfer.amount,\n        message: transfer.message || '',\n        ours: transfer.ours || false,\n        locked: false,\n        unlockBlockOrTimestamp: 0,\n        transactionHash: transfer.transaction_hash || '',\n      };\n    });\n\n    // mempool \"block\" header can omit timestamps\n    const blockMonotonicTime = block.header.timestamp_median > 0 ?\n      new Date(block.header.timestamp_median * 1000) :\n      transactions.length > 0 ? transactions[0].time : new Date();\n\n    return {\n      header: {\n        confirmed,\n        hash: block.header.hash,\n        height: block.header.height,\n        time: new Date(block.header.timestamp * 1000),\n        date: startOfDay(blockMonotonicTime),\n      },\n      transactions: transactions.reverse(),\n      unlockedTransfers: unlockedTransfers.reverse(),\n    };\n  }\n}\n\nfunction txKindFromTransfers(transfers: {ours?: boolean, amount: number}[]): TxKind {\n  const allOurs = transfers.every((t) => t.ours || false);\n  if (!allOurs) {\n    return TxKind.Send;\n  }\n\n  const allAmountsNonNeg = transfers.every((t) => t.amount >= 0);\n  if (allOurs && allAmountsNonNeg) {\n    return TxKind.Receive;\n  }\n\n  return TxKind.Redistribute;\n}\n\nfunction transferKind(amount: number, ours: boolean, txKind: TxKind): TransferKind {\n  if (!ours) {\n    return TransferKind.Send;\n  }\n\n  if (amount < 0) {\n    return TransferKind.Spend;\n  }\n\n  if (txKind === TxKind.Send) {\n    return TransferKind.Change;\n  }\n\n  return TransferKind.Receive;\n}\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport * as util from './lib/util';\nimport styles from './css/Avatar.module.css';\n\n// @ts-ignore\nimport {inner} from 'gridy-avatars';\n\nconst Avatar = React.memo((props: {message: string}) => {\n  const [content, setContent] = useState('');\n\n  useEffect(() => {\n    util.digest(props.message.trim().normalize('NFKD')).then((d) => {\n      const arr = new Uint8Array(d);\n\n      const body       = arr[0] & 7;\n      const bodyColor  = arr[1] & 7;\n      const eyes       = arr[2] & 7;\n      const eyesColor  = arr[3] & 7;\n      const mouth      = arr[4] & 7;\n      const mouthColor = arr[5] & 7;\n\n      const svg = [\n        '<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"isolation:isolate\" viewBox=\"0 0 24 24\" version=\"1.1\">',\n        inner(`${body}${bodyColor}${eyes}${eyesColor}${mouth}${mouthColor}`),\n        '</svg>'\n      ].join('');\n\n      setContent(svg);\n    });\n  }, [props.message]);\n\n  return (\n    <div className={styles.avatar} dangerouslySetInnerHTML={{__html: content}}>\n    </div>\n  );\n});\n\nexport default Avatar;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState, useEffect} from 'react';\nimport {generateMnemonic, validateMnemonic} from 'bip39';\nimport {checkAddressFormat, checkAuditFormat, auditPattern} from \"@bcndev/bytecoin\";\nimport englishWordlist from 'bip39/src/wordlists/english.json';\nimport Avatar from './Avatar';\nimport * as util from './lib/util';\nimport * as sync from './lib/sync';\nimport logo from './img/logo.svg';\nimport styles from './css/OpenForm.module.css';\n\ninterface IWalletInstanceInfo {\n  readonly firstAddress: string;\n  readonly filename: string;\n  readonly viewOnly: boolean;\n  readonly lastOpen: number;\n}\n\nconst OpenForm = React.memo((props: {onOpen: (isFile: boolean, desc: string, isNew: boolean, viewOnly: boolean) => void}) => {\n  const [description, setDescription] = useState('');\n  const [genDescription, setGenDescription] = useState('');\n  const [descriptionValid, setDescriptionValid] = useState(false);\n  const [opening, setOpening] = useState(false);\n  const [existingWallets, setExistingWallets] = useState<IWalletInstanceInfo[]>([]);\n\n  useEffect(() => {\n    const w: IWalletInstanceInfo[] = [];\n\n    for (let i = 0; i < window.localStorage.length; i++) {\n      const key = window.localStorage.key(i) || '';\n      const addr = key.substring('wallet.'.length);\n      if (checkAddressFormat(addr)) {\n        const info: sync.IAddressWalletsInfo = JSON.parse(window.localStorage.getItem(key) || '{}');\n        const wInfo: IWalletInstanceInfo[] = [];\n        for (let filename in info) {\n          if (info.hasOwnProperty(filename)) {\n            wInfo.push({\n              firstAddress: addr,\n              filename,\n              viewOnly: info[filename].viewOnly,\n              lastOpen: info[filename].lastOpen,\n            });\n          }\n        }\n        w.push(...wInfo);\n      }\n    }\n\n    w.sort((a, b) => a.lastOpen - b.lastOpen);\n    setExistingWallets(w.reverse());\n  }, []);\n\n  const generate = () => {\n    const desc = generateMnemonic(256, undefined, englishWordlist);\n\n    setDescription(desc);\n    setGenDescription(desc);\n    setDescriptionValid(true);\n  };\n\n  const open = async (isFile: boolean, desc: string, isNew: boolean, viewOnly: boolean) => {\n    if (opening) {\n      return;\n    }\n\n    setOpening(true);\n    props.onOpen(isFile, desc, isNew, viewOnly);\n    setOpening(false);\n  };\n\n  return (\n    <div className={styles.openForm}>\n      <div className={styles.logo}>\n        <img src={logo} alt='Bytecoin'/>\n      </div>\n\n      <div className={styles.fromDescription}>\n        <div className={styles.descGroup}>\n          <textarea className={`${descriptionValid ? 'valid' : 'invalid'}`}\n                    placeholder='Bytecoin BIP39 mnemonic or an audit secret'\n                    rows={7}\n                    autoCapitalize='none'\n                    autoComplete='off'\n                    spellCheck={false}\n                    maxLength={512}\n                    value={description}\n                    onChange={(e) => {\n                      const desc = e.target.value;\n                      const audit = auditPattern.test(desc.trim());\n                      const ok = audit ? checkAuditFormat(desc.trim()) : validateMnemonic(desc.trim().toLowerCase(), englishWordlist);\n                      setDescriptionValid(ok);\n                      setDescription(desc);\n                    }}\n          />\n        </div>\n\n        <div className={styles.controls}>\n          <button className={styles.genButton} onClick={generate}>\n            Generate mnemonic\n          </button>\n\n          <button className={styles.openButton} disabled={opening || !descriptionValid} onClick={async () => {\n            const audit = auditPattern.test(description.trim());\n            if (audit) {\n              const desc = description.trim();\n              await open(false, desc, false, true);\n            } else {\n              const desc = description.trim().toLowerCase();\n              await open(false, desc,desc === genDescription, false);\n            }\n          }}>\n            Open wallet\n          </button>\n        </div>\n      </div>\n\n      <div className={styles.existingWallets}>\n        {\n          existingWallets.map(info =>\n            <div key={info.filename} className={styles.walletFile} onClick={async () => {\n              const desc = info.filename;\n              await open(true, desc, false, info.viewOnly);\n            }}>\n              <div className={styles.avatar}>\n                <Avatar message={info.firstAddress}/>\n              </div>\n              <div className={styles.walletDesc}>\n                <div className={styles.walletDetails}>\n                  <span className={styles.lastOpen}>Last opened: {util.formatDateTime(new Date(info.lastOpen))}</span> {info.viewOnly && <span className={styles.viewOnly}>View only</span>}\n                </div>\n                <div className={styles.firstAddress} title='First address'>\n                  {info.firstAddress}\n                </div>\n              </div>\n            </div>\n          )\n        }\n      </div>\n    </div>\n  );\n});\n\nexport default OpenForm;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\ntype ModuleHTTPHandle = number;\n\ndeclare function cn_walletd_start(argv: string[]): void;\ndeclare function cn_http_server_call(method: string, path: string, body: string, callback: (status: number, body: string) => void): ModuleHTTPHandle;\ndeclare function cn_http_server_cancel(handle: ModuleHTTPHandle): void;\n\ninterface IWalletCreateReq {\n  mnemonic: string;\n  creation_timestamp: number;\n}\n\ninterface IWalletCreateResp {\n  readonly wallet_file: string;\n}\n\ninterface IWalletOpenReq {\n  wallet_file: string;\n  wallet_password: string;\n}\n\nexport class Walletd {\n  private n = 0;\n  private closed = false;\n  private filename = '';\n\n  private constructor(bytecoindAddr: string) {\n    cn_walletd_start([`--bytecoind-remote-address=${bytecoindAddr}`, '--secrets-via-api']);\n  }\n\n  static async create(bytecoindAddr: string, isFile: boolean, description: string, timestamp: number): Promise<Walletd> {\n    console.info('opening wallet:', description, new Date(timestamp * 1000));\n\n    const w = new Walletd(bytecoindAddr);\n\n    if (isFile) {\n      await w.openWallet({\n        wallet_file: description,\n        wallet_password: '',\n      });\n\n      w.filename = description;\n    } else {\n      const resp = await w.createWallet({\n        mnemonic: description,\n        creation_timestamp: timestamp,\n      });\n\n      w.filename = resp.wallet_file;\n    }\n    console.log('created/opened wallet, filename:', w.filename);\n\n    return w;\n  }\n\n  async close(): Promise<void> {\n    if (!this.closed) {\n      this.closed = true;\n      return this.closeWallet();\n    }\n  }\n\n  getFilename(): string {\n    return this.filename;\n  }\n\n  private createWallet(req: IWalletCreateReq): Promise<IWalletCreateResp> {\n    return this.rpc('ext_create_wallet', req);\n  }\n\n  private openWallet(req: IWalletOpenReq): Promise<void> {\n    return this.rpc('ext_open_wallet', req);\n  }\n\n  private closeWallet(): Promise<void> {\n    return this.rpc('ext_close_wallet', {});\n  }\n\n  getStatus(req: IGetStatusReq): Promise<IGetStatusResp> {\n    return this.rpc('get_status', req);\n  }\n\n  getWalletInfo(req: IGetWalletInfoReq): Promise<IGetWalletInfoResp> {\n    return this.rpc('get_wallet_info', req);\n  }\n\n  getBalance(req: IGetBalanceReq): Promise<IGetBalanceResp> {\n    return this.rpc('get_balance', req);\n  }\n\n  getWalletRecords(req: IGetWalletRecordsReq): Promise<IGetWalletRecordsResp> {\n    return this.rpc('get_wallet_records', req);\n  }\n\n  getTransfers(req: IGetTransfersReq): Promise<IGetTransfersResp> {\n    return this.rpc('get_transfers', req);\n  }\n\n  createAddresses(req: ICreateAddressesReq): Promise<ICreateAddressesResp> {\n    return this.rpc('create_addresses', req);\n  }\n\n  createSendproof(req: ICreateSendproofReq): Promise<ICreateSendproofResp> {\n    return this.rpc('create_sendproof', req);\n  }\n\n  createTransaction(req: ICreateTransactionReq): Promise<ICreateTransactionResp> {\n    return this.rpc('create_transaction', req);\n  }\n\n  sendTransaction(req: ISendTransactionReq): Promise<ISendTransactionResp> {\n    return this.rpc('send_transaction', req);\n  }\n\n  private rpc<TReq, TResp>(method: string, params: TReq): Promise<TResp> {\n    return new Promise((resolve, reject) => {\n      const json = {\n        jsonrpc: '2.0',\n        id: '0',\n        method: method,\n        params: params,\n      };\n\n      const label = `RPC ${method} #${this.n}`;\n      this.n++;\n\n      console.time(label);\n      Walletd.postJSON(method, '/json_rpc', json, (resp) => {\n        console.timeEnd(label);\n\n        if (resp.hasOwnProperty('error')) {\n          const msg = `[${method}] JSON-RPC error #${resp.error.code}: ${resp.error.message}`;\n          console.warn(msg);\n          reject(new Error(msg));\n        } else {\n          resolve(resp.result)\n        }\n      }, reject);\n    });\n  }\n\n  private static postJSON(id: string, path: string, json: any, resolve: (value: any) => void, reject: (error: any) => void) {\n    const params = JSON.stringify(json);\n    const handle = cn_http_server_call('POST', path, params, (status: number, body: string) => {\n      if (status === 200) {\n        try {\n          const result = JSON.parse(body);\n          resolve(result);\n        } catch (err) {\n          console.warn(`[${id}] JSON reply parsing failed`, err);\n          reject(err);\n        }\n      } else {\n        const msg = `[${id}] HTTP status ${status}`;\n        console.warn(msg);\n        reject(new Error(msg));\n      }\n    });\n\n    return () => {\n      cn_http_server_cancel(handle);\n    };\n  }\n}\n\nexport interface ITransfer {\n  readonly address: string;\n  readonly amount: number;\n  readonly message?: string;\n  readonly unlock_block_or_timestamp?: number;\n  readonly ours?: boolean;\n  readonly locked?: boolean;\n  readonly transaction_hash?: string;\n}\n\nexport interface INewTransaction {\n  readonly unlock_block_or_timestamp?: number;\n  readonly transfers?: ITransfer[];\n  readonly payment_id?: string;\n  readonly anonymity?: number;\n}\n\nexport interface ICreatedTransaction extends INewTransaction {\n  readonly hash: string;\n  readonly fee: number;\n  readonly public_key: string;\n  readonly extra: string;\n  readonly coinbase: boolean;\n  readonly amount: number;\n}\n\nexport interface IBlockTransaction extends ICreatedTransaction {\n  readonly block_height: number;\n  readonly block_hash: string;\n  readonly timestamp: number;\n  readonly size?: number;\n}\n\nexport interface IBlockHeader {\n  readonly major_version: number;\n  readonly minor_version: number;\n  readonly timestamp: number;\n  readonly previous_block_hash: string;\n  readonly nonce: number;\n  readonly binary_nonce: string;\n\n  readonly height: number;\n  readonly hash: string;\n  readonly reward: number;\n  readonly cumulative_difficulty: number;\n  readonly cumulative_difficulty_hi: number;\n  readonly difficulty: number;\n  readonly base_reward: number;\n  readonly block_size: number;\n  readonly transactions_size: number;\n  readonly already_generated_key_outputs: number;\n  readonly already_generated_coins: number;\n  readonly already_generated_transactions: number;\n  readonly size_median: number;\n  readonly effective_size_median: number;\n  readonly timestamp_median: number;\n  readonly block_capacity_vote: number;\n  readonly block_capacity_vote_median: number;\n  readonly transactions_fee: number;\n}\n\nexport interface IBlock {\n  readonly header: IBlockHeader;\n  readonly transactions?: IBlockTransaction[];\n  readonly unlocked_transfers?: ITransfer[];\n}\n\nexport interface IBalance {\n  readonly spendable: number;\n  readonly spendable_dust: number;\n  readonly locked_or_unconfirmed: number;\n  readonly spendable_outputs: number;\n  readonly spendable_dust_outputs: number;\n  readonly locked_or_unconfirmed_outputs: number;\n}\n\nexport interface IGetStatusReq {\n  top_block_hash?: string;\n  transaction_pool_version?: number;\n  incoming_peer_count?: number;\n  outgoing_peer_count?: number;\n  lower_level_error?: string;\n}\n\nexport interface IGetStatusResp {\n  readonly top_block_hash: string;\n  readonly top_block_difficulty: number;\n  readonly top_block_cumulative_difficulty: number;\n  readonly top_block_height: number;\n  readonly top_block_timestamp: number;\n  readonly top_block_timestamp_median: number;\n  readonly top_known_block_height: number;\n  readonly transaction_pool_version: number;\n  readonly incoming_peer_count: number;\n  readonly outgoing_peer_count: number;\n  readonly lower_level_error: string;\n  readonly next_block_effective_median_size: number;\n  readonly recommended_fee_per_byte: number;\n  readonly recommended_max_transaction_size: number;\n}\n\nexport interface IGetWalletInfoReq {\n  need_secrets?: boolean;\n}\n\nexport interface IGetWalletInfoResp {\n  readonly view_only: boolean;\n  readonly wallet_type: string;\n  readonly can_view_outgoing_addresses: boolean;\n  readonly has_view_secret_key: boolean;\n  readonly creation_timestamp: number;\n  readonly first_address: string;\n  readonly total_address_count: number;\n  readonly net: string;\n  readonly secret_view_key: string;\n  readonly public_view_key: string;\n  readonly mnemonic: string;\n}\n\nexport interface IGetBalanceReq {\n  address?: string;\n  height_or_depth?: number;\n}\n\nexport interface IGetBalanceResp extends IBalance {\n}\n\nexport interface IWalletRecord {\n  readonly address: string;\n  readonly label: string;\n  readonly index: number;\n  readonly public_spend_key: string;\n  readonly secret_spend_key?: string;\n}\n\nexport interface IGetWalletRecordsReq {\n  need_secrets?: boolean;\n  create?: boolean;\n  index?: number;\n  count?: number;\n}\n\nexport interface IGetWalletRecordsResp {\n  readonly records: IWalletRecord[];\n  readonly total_count: number;\n}\n\nexport interface IGetTransfersReq {\n  address?: string;\n  from_height: number;\n  to_height: number;\n  forward: boolean;\n  desired_transaction_count: number;\n}\n\nexport interface IGetTransfersResp {\n  readonly blocks?: IBlock[];\n  readonly next_from_height: number;\n  readonly next_to_height: number;\n}\n\nexport interface ICreateAddressesReq {\n  secret_spend_keys: string[];\n  creation_timestamp?: number;\n}\n\nexport interface ICreateAddressesResp {\n  readonly addresses: string[];\n  readonly secret_spend_keys: string[];\n}\n\nexport interface ICreateSendproofReq {\n  transaction_hash: string;\n  address: string;\n  message?: string;\n}\n\nexport interface ICreateSendproofResp {\n  readonly sendproof: string;\n}\n\nexport interface ICreateTransactionReq {\n  transaction: INewTransaction;\n  spend_addresses?: string[];\n  any_spend_address: boolean;\n  change_address: string;\n  confirmed_height_or_depth: number;\n  fee_per_byte?: number;\n  optimization?: string;\n  subtract_fee_from_amount?: boolean;\n}\n\nexport interface ICreateTransactionResp {\n  readonly transaction: ICreatedTransaction;\n  readonly binary_transaction: string;\n}\n\nexport interface ISendTransactionReq {\n  binary_transaction: string;\n}\n\nexport interface ISendTransactionResp {\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(-0.9526244,0.9526244,-0.9526244,-0.9526244,1074.1836,-92.790252)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowNortheast = function SvgArrowNortheast(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowNortheast, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_northeast.1f67c9d1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(-0.9526244,-0.9526244,0.9526244,-0.9526244,726.74361,805.41781)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowSoutheast = function SvgArrowSoutheast(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowSoutheast, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_southeast.9f3f690f.svg\";\nexport { ForwardRef as ReactComponent };","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState} from 'react';\nimport {CSSTransition} from 'react-transition-group';\nimport * as sync from './lib/sync';\nimport * as util from './lib/util';\nimport {ReactComponent as ArrowNE} from './img/Arrow_northeast.svg';\nimport {ReactComponent as ArrowSE} from './img/Arrow_southeast.svg';\nimport SettingsForm from './SettingsForm';\nimport ReceiveForm from './ReceiveForm';\nimport SendForm from './SendForm';\nimport logo from './img/logo.svg';\nimport styles from './css/Header.module.css';\n\nexport const Status = React.memo((props: sync.IStatus) => {\n  const initializing = props.topBlockHash === '';\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n\n  const relTime = util.useRelativeTime(props.topBlockTime);\n\n  return (\n    <div className={styles.status}>\n      <div className={styles.statusIcon}>\n        <img src={logo} alt='Bytecoin'/>\n      </div>\n      <div className={styles.syncStatusSummary}>\n        <div className={styles.syncStatus}>\n          {initializing ? 'Initializing wallet…' :\n              syncing ? <span className={styles.ellipsis}>Syncing</span> : 'Synced'\n          }\n        </div>\n        {props.lowerLevelError ?\n          <div className={styles.syncStatusError}>\n            <code>\n              {props.lowerLevelError} {/*TODO localize*/}\n            </code>\n          </div>\n          :\n          <div className={styles.syncStatusBlock} hidden={props.topBlockHeight === 0}>\n            <a href={`https://explorer.bytecoin.org/block?hash=${props.topBlockHash}`} target='_blank' rel='noreferrer noopener'>\n              {util.formatNumber(props.topBlockHeight)}\n            </a> <span className={styles.syncStatusTimestamp}>\n              {relTime}\n            </span>\n          </div>\n        }\n      </div>\n    </div>\n  );\n});\n\nenum DrawerType {\n  None,\n  Receive,\n  Send,\n}\n\nexport const Controls = React.memo((props: sync.IStatus & sync.IBalance & {\n  viewOnly: boolean,\n  addresses: sync.IAddress[],\n  setAddresses: (addresses: sync.IAddress[]) => void,\n}) => {\n  const initializing = props.topBlockHash === '';\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n\n  const [settingsOpen, setSettingsOpen] = useState(false);\n  const [drawerType, setDrawerType] = useState(DrawerType.None);\n  const [nextDrawerType, setNextDrawerType] = useState(DrawerType.None);\n\n  const transitionDrawer = (t: DrawerType) => {\n    if (drawerType === DrawerType.None) {\n      setDrawerType(t);\n    } else if (drawerType === t) {\n      setDrawerType(DrawerType.None);\n    } else {\n      setDrawerType(DrawerType.None);\n      setNextDrawerType(t);\n    }\n  };\n\n  const transitionNextDrawer = () => {\n    if (nextDrawerType !== DrawerType.None) {\n      setDrawerType(nextDrawerType);\n      setNextDrawerType(DrawerType.None);\n    }\n  };\n\n  return (\n    <div className={styles.controls}>\n      <CSSTransition in={settingsOpen} mountOnEnter={true} timeout={300} classNames='balance-drawer-form-up'>\n        <div className={styles.drawer}>\n          <SettingsForm viewOnly={props.viewOnly} topBlockHeight={props.topBlockHeight} topKnownBlockHeight={props.topKnownBlockHeight} topBlockTime={props.topBlockTime} dismiss={() => setSettingsOpen(false)}/>\n        </div>\n      </CSSTransition>\n      <div className={styles.main}>\n        <div className={styles.balance}>\n          <div className={styles.balanceAvailable}>\n            {util.formatBCN(props.spendable)}\n            {!initializing && <button className={`${styles.settingsButton} link-like`} onClick={() => setSettingsOpen(!settingsOpen)}>\n                &#9881;&#65039;\n            </button>}\n          </div>\n          <div className={styles.balancePending}>\n            {!syncing && props.lockedOrUnconfirmed > 0 && `${util.formatBCN(props.lockedOrUnconfirmed, 3)} locked or unconfirmed`}\n          </div>\n        </div>\n        <div className={styles.recv} hidden={initializing}>\n          <button className={`link-like ${drawerType === DrawerType.Receive ? 'active' : ''}`} onClick={() => transitionDrawer(DrawerType.Receive)}>\n            <ArrowSE/> Receive ({props.addresses.length > 1 ? `${props.addresses.length} addresses` : '1 address'})\n          </button>\n        </div>\n        <div className={styles.send} hidden={initializing}>\n          <button className={`link-like ${drawerType === DrawerType.Send ? 'active' : ''}`} onClick={() => transitionDrawer(DrawerType.Send)} disabled={syncing || props.viewOnly}>\n            <ArrowNE/> Send\n          </button>\n        </div>\n      </div>\n      <CSSTransition in={drawerType === DrawerType.Receive} onExited={transitionNextDrawer} unmountOnExit={true} timeout={300} classNames='balance-drawer-form-down'>\n        <div className={styles.drawer}>\n          <ReceiveForm viewOnly={props.viewOnly} addresses={props.addresses} setAddresses={props.setAddresses} dismiss={() => setDrawerType(DrawerType.None)}/>\n        </div>\n      </CSSTransition>\n      <CSSTransition in={drawerType === DrawerType.Send} onExited={transitionNextDrawer} unmountOnExit={true} timeout={300} classNames='balance-drawer-form-down'>\n        <div className={styles.drawer}>\n          <SendForm dismiss={() => setDrawerType(DrawerType.None)}/>\n        </div>\n      </CSSTransition>\n    </div>\n  );\n});\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useContext, useEffect, useRef} from 'react';\nimport * as util from './lib/util';\nimport styles from './css/SettingsForm.module.css';\n\n// @ts-ignore\nimport NoSleep from 'nosleep.js';\n\nconst dayMS = 60 * 60 * 24 * 1000;\n\nconst SettingsForm = React.memo((props: {\n  viewOnly: boolean,\n  topBlockHeight: number,\n  topKnownBlockHeight: number,\n  topBlockTime: Date,\n  dismiss: () => void,\n}) => {\n  const syncing = props.topBlockHeight !== props.topKnownBlockHeight;\n  const farBehind = (new Date()).valueOf() - props.topBlockTime.valueOf() > 2 * dayMS;\n  const wantNoSleep = syncing && farBehind && util.isMobile();\n\n  const wallet = useContext(util.WalletContext);\n  const noSleep = useRef(new NoSleep());\n\n  useEffect(() => {\n    if (!wantNoSleep) {\n      turnNoSleep(false);\n    }\n  }, [wantNoSleep]);\n\n  const turnNoSleep = (on: boolean) => {\n    console.info(`no sleep: ${on}`);\n\n    if (on) {\n      noSleep.current.enable();\n    } else {\n      noSleep.current.disable();\n    }\n  };\n\n  const closeWallet = async () => {\n    if (wallet) {\n      await wallet.close();\n    }\n  };\n\n  const exportMnemonic = async () => {\n    if (wallet === null)  {\n      alert('Wallet closed');\n      return;\n    }\n\n    const w = window.open();\n    if (w === null) {\n      alert('Failed to open window with mnemonic text');\n      return;\n    }\n\n    const [resp, err] = await util.try_(wallet.getWalletInfo({\n      need_secrets: true,\n    }));\n    if (resp === undefined) {\n      w.close();\n      alert(`Failed to get wallet info: ${err}`);\n      return;\n    }\n\n    w.document.write(`\n    <html lang=\"en\">\n        <head><title>Bytecoin Mnemonic Backup</title></head>\n        <body onafterprint=\"self.close()\">\n            <code style=\"word-break:break-all\">${resp.first_address}</code><br/><br/><code>${resp.mnemonic}</code>\n        </body>\n    </html>\n    `);\n    w.print();\n  };\n\n  return (\n    <div className={styles.settingsForm}>\n      <div className={styles.noSleepGroup}>\n        <input type='checkbox' id='noSleep' onChange={(e) => turnNoSleep(e.target.checked)}/> <label htmlFor='noSleep'>Prevent device sleep during sync</label>\n      </div>\n\n      <div className={styles.exportMnemonicGroup}>\n        <button className='link-like' onClick={exportMnemonic} disabled={props.viewOnly}>\n          Export mnemonic\n        </button> — print or save as PDF\n      </div>\n\n      <div className={styles.controls}>\n        <button className={styles.closeWallet} onClick={closeWallet}>\n          Close wallet\n        </button>\n\n        <button className={styles.dismiss} onClick={props.dismiss}>\n          OK\n        </button>\n      </div>\n    </div>\n  )\n});\n\nexport default SettingsForm;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useContext, useState} from 'react';\nimport styles from './css/ReceiveForm.module.css';\nimport * as util from './lib/util';\nimport * as sync from './lib/sync';\nimport Avatar from './Avatar';\n\nconst ReceiveForm = React.memo((props: {\n  viewOnly: boolean,\n  addresses: sync.IAddress[],\n  setAddresses: (addresses: sync.IAddress[]) => void,\n  dismiss: () => void,\n}) => {\n  const wallet = useContext(util.WalletContext);\n\n  const [creatingAddress, setCreatingAddress] = useState(false);\n\n  const canShare = (navigator as any).share !== undefined;\n  const share = (addr: string) => {\n    (navigator as any).share({\n      text: addr,\n    });\n  };\n\n  const addAddress = async () => {\n    setCreatingAddress(true);\n    await doAddAddress();\n    setCreatingAddress(false);\n  };\n\n  const doAddAddress = async () => {\n    if (wallet === null) {\n      return;\n    }\n\n    const [resp, errCreate] = await util.try_(wallet.createAddresses({\n      secret_spend_keys: [''],\n    }));\n    if (resp === undefined) {\n      alert(`Failed to create address: ${errCreate}`);\n      return;\n    }\n\n    props.setAddresses([...props.addresses, {\n      address: resp.addresses[0],\n      label: '',\n    }]);\n  };\n\n  return (\n    <div className={styles.receiveForm}>\n      <div className={styles.addresses}>{\n        props.addresses.map((addr) =>\n          <div key={addr.address} className={styles.address}>\n            <div className={styles.addressIcon} title={addr.address}>\n              <Avatar message={addr.address}/>\n            </div>\n            <div className={styles.addressData}>\n              <div className={styles.addressText}>\n                {addr.address}\n              </div>\n            </div>\n            { canShare &&\n              <div className={styles.share}>\n                <button className='link-like' onClick={() => share(addr.address)}>\n                  Share\n                </button>\n              </div>\n            }\n          </div>\n        )\n      }</div>\n\n      <div className={styles.controls}>\n        <button className={styles.addAddress} onClick={addAddress} disabled={props.viewOnly || creatingAddress}>\n          Add address\n        </button>\n\n        <button className={styles.dismiss} onClick={props.dismiss}>\n          OK\n        </button>\n      </div>\n    </div>\n  );\n});\n\nexport default ReceiveForm;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useContext, useState} from 'react';\nimport {checkAddressFormat} from '@bcndev/bytecoin';\nimport * as util from './lib/util';\nimport * as sync from './lib/sync';\nimport Avatar from './Avatar';\nimport styles from './css/SendForm.module.css';\n\n// TODO: messages\n// TODO: multiple recipients\n// TODO: custom fee\nconst SendForm = React.memo((props: {dismiss: () => void}) => {\n  const wallet = useContext(util.WalletContext);\n\n  const [address, setAddress] = useState('');\n  const [amount, setAmount] = useState(0);\n  const [addressValid, setAddressValid] = useState(false);\n  const [amountValid, setAmountValid] = useState(false);\n  const [sending, setSending] = useState(false);\n\n  const send = async () => {\n    if (sending) {\n      return;\n    }\n\n    setSending(true);\n    await doSend();\n    setSending(false);\n  };\n\n  const doSend = async () => {\n    if (!wallet) {\n      return;\n    }\n\n    const [txResp, errCreate] = await util.try_(wallet.createTransaction({\n      transaction: {\n        transfers: [{\n          address,\n          amount,\n        }],\n      },\n      any_spend_address: true,\n      change_address: '',\n      confirmed_height_or_depth: sync.CONFIRMED_DEPTH,\n    }));\n    if (txResp === undefined) {\n      alert(`Failed to create transaction: ${errCreate}`);\n      return;\n    }\n\n    const approve = window.confirm(`Send ${util.formatBCN(amount)} to ${address}?`);\n    if (!approve) {\n      return;\n    }\n\n    // TODO derive username from wallet\n    const ok = await util.bioApprove('Bytecoin Zero', 'bytecoin-zero-user', 'Bytecoin Zero User');\n    if (!ok) {\n      return;\n    }\n\n    const [sendResp, errSend] = await util.try_(wallet.sendTransaction({\n      binary_transaction: txResp.binary_transaction,\n    }));\n    if (sendResp === undefined) {\n      alert(`Failed to send transaction: ${errSend}`);\n      return;\n    }\n\n    props.dismiss();\n  };\n\n  return (\n    <div className={styles.sendForm}>\n      <div className={styles.transfer}>\n        {addressValid && <div className={styles.addressViz}>\n            <Avatar message={address}/>\n        </div>}\n        <div className={styles.transferBody}>\n          <div className={styles.addressGroup}>\n            <input className={`${addressValid ? 'valid' : 'invalid'}`}\n                   type='text'\n                   placeholder='Bytecoin address: bcnZ… or 2…'\n                   onChange={(e) => {\n                     const addr = e.target.value;\n                     const ok = checkAddressFormat(addr);\n                     setAddressValid(ok);\n                     if (ok) {\n                       setAddress(addr);\n                     }\n                   }}\n            />\n          </div>\n          <div className={styles.amountGroup}>\n            <input className={`${amountValid ? 'valid' : 'invalid'}`}\n                   type='number'\n                   placeholder={util.formatBCN(0)}\n                   min='0.01'\n                   step='0.01'\n                   onChange={(e) => {\n                     const am = Math.round(parseFloat(e.target.value) * 1e8); // TODO: exact calculation\n                     const ok = am > 0; // TODO: check upper bound\n                     setAmountValid(ok);\n                     if (ok) {\n                       setAmount(am);\n                     }\n                   }}\n            />\n          </div>\n        </div>\n      </div>\n      <div className={styles.controls}>\n        <button className={styles.sendButton} onClick={send} disabled={sending || !addressValid || !amountValid}>\n          Send\n        </button>\n\n        <button className={styles.cancelButton} onClick={props.dismiss}>\n          Cancel\n        </button>\n      </div>\n    </div>\n  );\n});\n\nexport default SendForm;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"defs\", {\n  id: \"defs2874\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"g\", {\n  transform: \"matrix(0.9526244,-0.9526244,0.9526244,0.9526244,-171.46445,457.97782)\",\n  id: \"Ebene_1\"\n}, React.createElement(\"polygon\", {\n  points: \"902.25049,222.98633 233.17773,222.98633 233.17773,364.71875 0,182.35938 233.17773,0 233.17773,141.73242 902.25049,141.73242 902.25049,222.98633 \",\n  id: \"path2050\"\n}));\n\nvar SvgArrowSouthwest = function SvgArrowSouthwest(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 800,\n    height: 800,\n    viewBox: \"0 0 902.25049 364.71875\",\n    id: \"svg2868\",\n    xmlSpace: \"preserve\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgArrowSouthwest, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Arrow_southwest.781cea01.svg\";\nexport { ForwardRef as ReactComponent };","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState, useContext, useEffect} from 'react';\nimport {CSSTransition, TransitionGroup} from 'react-transition-group';\nimport {flatMap} from 'lodash';\nimport * as sync from './lib/sync';\nimport * as util from './lib/util';\nimport Avatar from './Avatar';\nimport {ReactComponent as ArrowNE} from './img/Arrow_northeast.svg';\nimport {ReactComponent as ArrowSE} from './img/Arrow_southeast.svg';\nimport {ReactComponent as ArrowSW} from './img/Arrow_southwest.svg';\nimport styles from './css/History.module.css';\nimport {formatDateTime, formatTime} from './lib/util';\n\nconst History = React.memo((props: {history: sync.IDay[]}) => {\n  const {history} = props;\n\n  return (\n    <div className={styles.history}>\n      {\n        history.length === 0 &&\n        <div className={styles.emptyHistory}>\n            No transactions yet\n        </div>\n      }\n      <TransitionGroup component={null}>\n        {history.map((day) =>\n          <CSSTransition key={day.date.valueOf()} timeout={1000} classNames='history-day'>\n            <Day {...day} />\n          </CSSTransition>\n        )}\n      </TransitionGroup>\n    </div>\n  );\n});\n\nconst Day = React.memo((props: sync.IDay) => {\n  return (\n    <div className={styles.historyDay}>\n      <div className={styles.historyDayHeader}>\n        <div className={styles.historyDayDate}>\n          {util.formatDate(props.date)}\n        </div>\n      </div>\n\n      <div className={styles.historyDayRows}>\n        <TransitionGroup component={null} appear={true}>\n        {\n          flatMap(props.blocks, (block) => {\n            const txs = block.transactions.map((transaction) =>\n              <CSSTransition key={transaction.hash} timeout={1000} classNames='history-row'>\n                <Transaction {...transaction} confirmed={block.header.confirmed}/>\n              </CSSTransition>\n            );\n\n            const transfers = block.unlockedTransfers.map((transfer) =>\n              <CSSTransition key={`${transfer.amount}#${transfer.address}@${transfer.transactionHash}`} timeout={1000} classNames='history-row'>\n                <div className={styles.unlockedTransferContainer}>\n                  <Transfer {...transfer} isUnlock={true}/>\n                </div>\n              </CSSTransition>\n            );\n\n            return [...txs, ...transfers];\n          })\n        }\n        </TransitionGroup>\n      </div>\n    </div>\n  );\n});\n\nconst Transaction = React.memo((props: sync.ITransaction & {confirmed: boolean}) => {\n  const [expanded, setExpanded] = useState(false);\n  const [detailsAnimating, setDetailsAnimating] = useState(false);\n\n  const kindClass = sync.TxKind[props.kind];\n\n  return (\n    <div className={`${styles.tx} ${kindClass}`}>\n      <div className={`${styles.txBody} ${expanded ? 'expanded' : ''} ${detailsAnimating ? 'details-animating' : ''} ${props.confirmed ? 'confirmed' : 'unconfirmed'}`} onClick={() => setExpanded(!expanded)}>\n        {\n          props.summary.map((t) =>\n            <Transfer key={t.address} {...t} unconfirmed={!props.confirmed}/>\n          )\n        }\n      </div>\n\n      <CSSTransition in={expanded} unmountOnExit={true} timeout={300} classNames='history-tx-details' onExit={() => setDetailsAnimating(true)} onExited={() => setDetailsAnimating(false)}>\n        <div className={styles.txDetails}>\n          <div className={styles.txMetadata}>\n            <span className={styles.txBlockTime}>\n              {formatTime(props.time)}\n            </span>\n            <a className={styles.txHash} href={`https://explorer.bytecoin.org/tx?hash=${props.hash}`} title={props.hash} target='_blank' rel='noreferrer noopener'>\n              {props.hash}\n            </a>\n            <span className={styles.txFee}>\n              Fee {util.formatBCN(props.fee, 3)}\n            </span>\n          </div>\n          {\n            props.transfers.spend.map((t) =>\n              <Transfer key={`spend-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.send.map((t) =>\n              <Transfer key={`send-${t.address}`} detailed={true} genSendproof={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.receive.map((t) =>\n              <Transfer key={`receive-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n          {\n            props.transfers.change.map((t) =>\n              <Transfer key={`change-${t.address}`} detailed={true} {...t}/>\n            )\n          }\n        </div>\n      </CSSTransition>\n    </div>\n  );\n});\n\nconst Transfer = React.memo((props: sync.ITransfer & {unconfirmed?: boolean, genSendproof?: boolean, detailed?: boolean, isUnlock?: boolean}) => {\n  const isSpend = props.kind === sync.TransferKind.Spend;\n  const isSend = props.kind === sync.TransferKind.Send;\n  const isReceive = props.kind === sync.TransferKind.Receive;\n\n  const lockedUntil = props.unlockBlockOrTimestamp > 0 ?\n    props.unlockBlockOrTimestamp > sync.MAX_BLOCK_NUMBER ?\n      `Locked until ${formatDateTime(new Date(props.unlockBlockOrTimestamp * 1000))}` :\n      `Locked until block #${props.unlockBlockOrTimestamp}` : '';\n\n  const [sendproof, setSendproof] = useState('');\n  const wallet = useContext(util.WalletContext);\n\n  let help = props.isUnlock ? 'Unlocked transfer' : isReceive ? 'Received to' : isSend ? 'Sent to' : isSpend ? 'Sent from' : 'Change';\n  if (props.locked) {\n    help += ' (locked)'\n  }\n\n  const amountClass = props.isUnlock ? `Unlocked` : props.locked ? 'Locked' : '';\n\n  useEffect(() => {\n    if (!props.genSendproof || !wallet) {\n      return;\n    }\n\n    wallet.createSendproof({\n      transaction_hash: props.transactionHash,\n      address: props.address,\n    }).then((req) => {\n      setSendproof(req.sendproof)\n    });\n  }, [wallet, props.genSendproof, props.transactionHash, props.address]);\n\n  return (\n    <div className={styles.transfer}>\n      <div className={styles.transferLeft}>\n        <div className={styles.transferKind}>\n          {isReceive ? <ArrowSE/> : isSend ? <ArrowNE/> : isSpend ? <ArrowSW/> : <ArrowSE/>}\n        </div>\n        <div className={styles.transferDetails}>\n          <div className={styles.transferIcon}>\n            <AddressIcon address={props.address}/>\n          </div>\n          <div className={styles.transferDescription}>\n            <div className={styles.transferHelp}>\n              {help}\n            </div>\n            <div className={styles.transferAddress}>\n              {props.ours && <span className={styles.transferAddressOurs} role='img' aria-label='wallet address'>&#128091;</span>} {props.address}\n            </div>\n\n            <div className={styles.transferMessage}>\n              {props.message && <q>{props.message}</q>}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className={styles.transferRight}>\n        {\n          props.detailed && props.locked &&\n            <div className={styles.transferUnlockTime}>\n              {lockedUntil}\n            </div>\n        }\n        <div className={`${styles.transferAmount} ${amountClass}`}>\n          {util.formatBCNDelta(props.amount, props.detailed ? 3 : 2, props.ours)}\n          {props.locked && <span className={styles.transferAmountLocked}>&#128274;</span>}\n          {props.isUnlock && <span className={styles.transferAmountUnlocked}>&#128275;</span>}\n          {props.unconfirmed && <span className={styles.transferUnconfirmed}>&#9203;</span>}\n        </div>\n        {\n          sendproof &&\n          <div className={styles.transferSendproof}>\n            <a href={`https://explorer.bytecoin.org/search?search=${sendproof}`} title='See sendproof in Bytecoin Explorer' target='_blank' rel='noreferrer noopener'>\n              Sendproof\n            </a>\n          </div>\n        }\n      </div>\n    </div>\n  );\n});\n\nconst AddressIcon = React.memo((props: {address: string}) => {\n  return (\n    <div className={styles.addressIcon} title={props.address}>\n      <Avatar message={props.address}/>\n    </div>\n  );\n});\n\nexport default History;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useEffect, useState} from 'react';\nimport * as walletd from './lib/walletd';\nimport * as sync from './lib/sync';\nimport * as util from './lib/util';\nimport {Status, Controls} from './Header';\nimport History from './History';\nimport styles from './css/Wallet.module.css';\n\nconst initialStatus: sync.IStatus = {\n  topBlockHeight: 0,\n  topBlockTime: new Date(0), // TODO use date just before wallet creation timestamp\n  topBlockHash: '',\n  topKnownBlockHeight: 0,\n  lowerLevelError: '',\n};\n\nconst initialBalance: sync.IBalance = {\n  spendable: 0,\n  lockedOrUnconfirmed: 0,\n};\n\nconst Wallet = React.memo((props: {description: string, isFile: boolean, isNew: boolean, viewOnly: boolean, onClose: () => void}) => {\n  const [wallet, setWallet] = useState<walletd.Walletd | null>(null);\n  const [status, setStatus] = useState<sync.IStatus>(initialStatus);\n  const [balance, setBalance] = useState<sync.IBalance>(initialBalance);\n  const [addresses, setAddresses] = useState<sync.IAddress[]>([]);\n  const [history, setHistory] = useState<sync.IDay[]>([]);\n\n  useEffect(() => {\n    sync.start(props.isFile, props.description, props.isNew, props.viewOnly, setWallet, setStatus, setBalance, setAddresses, setHistory).then(() => {\n      console.info('wallet closed');\n      props.onClose();\n    });\n  }, [props]);\n\n  return (\n    <div className={styles.wallet}>\n      <util.WalletContext.Provider value={wallet}>\n        <Status {...status}/>\n        <Controls {...status} {...balance} viewOnly={props.viewOnly} addresses={addresses} setAddresses={setAddresses}/>\n\n        <History history={history}/>\n      </util.WalletContext.Provider>\n    </div>\n  );\n});\n\nexport default Wallet;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport React, {useState} from 'react';\nimport {SwitchTransition, CSSTransition} from 'react-transition-group';\nimport styles from './css/App.module.css';\nimport OpenForm from './OpenForm';\nimport Wallet from './Wallet';\n\nconst App = React.memo(() => {\n  const [walletIsExistingFile, setWalletIsExistingFile] = useState(false);\n  const [walletDescription, setWalletDescription] = useState('');\n  const [walletNew, setWalletNew] = useState(false);\n  const [walletViewOnly, setWalletViewOnly] = useState(false);\n\n  return (\n    <div className={`${styles.app} container`}>\n      <SwitchTransition>\n        <CSSTransition timeout={300} key={walletDescription} mountOnEnter={true} unmountOnExit={true} classNames='app-main'>\n          <>\n            {!walletDescription &&\n              <OpenForm onOpen={(isFile, desc, isNew, viewOnly) => {\n                setWalletIsExistingFile(isFile);\n                setWalletDescription(desc);\n                setWalletNew(isNew);\n                setWalletViewOnly(viewOnly);\n              }}/>\n            }\n            {walletDescription &&\n              <Wallet description={walletDescription} isFile={walletIsExistingFile} isNew={walletNew} viewOnly={walletViewOnly} onClose={() => setWalletDescription('')}/>\n            }\n          </>\n        </CSSTransition>\n      </SwitchTransition>\n\n      <div className={styles.footer}>\n        © 2019 The Bytecoin developers · <a href={`https://github.com/bcndev/bytecoin-zero/tree/${process.env.REACT_APP_GIT_SHA}`} target='_blank' rel='noreferrer noopener'>Code</a> · <a href='https://github.com/bcndev/bytecoin-zero/issues' target='_blank' rel='noreferrer noopener'>Issues</a>\n      </div>\n      <div className={styles.warning}>\n        Unstable development version. For testing only.\n      </div>\n    </div>\n  );\n});\n\nexport default App;\n","// Copyright 2019 The Bytecoin developers.\n// Licensed under the GNU Affero General Public License, version 3.\n\nimport './css/bootstrap-reboot.css';\nimport './css/index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"receiveForm\":\"ReceiveForm_receiveForm__3S8Rf\",\"addresses\":\"ReceiveForm_addresses__OUTdB\",\"address\":\"ReceiveForm_address__3gtEd\",\"addressIcon\":\"ReceiveForm_addressIcon__3oUN-\",\"addressData\":\"ReceiveForm_addressData__3OJnP\",\"addressText\":\"ReceiveForm_addressText__RdNp7\",\"share\":\"ReceiveForm_share__1AbGJ\",\"controls\":\"ReceiveForm_controls__1uvol\",\"addAddress\":\"ReceiveForm_addAddress__2o0AB\",\"dismiss\":\"ReceiveForm_dismiss__BoE-L\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sendForm\":\"SendForm_sendForm__1ZDqj\",\"transfer\":\"SendForm_transfer__21yxz\",\"transferBody\":\"SendForm_transferBody__2Bkqp\",\"addressGroup\":\"SendForm_addressGroup__3yNWl\",\"amountGroup\":\"SendForm_amountGroup__1Wz5t\",\"addressViz\":\"SendForm_addressViz__266kD\",\"controls\":\"SendForm_controls__dTO2_\",\"cancelButton\":\"SendForm_cancelButton__19jKN\",\"sendButton\":\"SendForm_sendButton__29F46\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settingsForm\":\"SettingsForm_settingsForm__3QXWf\",\"noSleepGroup\":\"SettingsForm_noSleepGroup__sU7yA\",\"controls\":\"SettingsForm_controls__2gwzx\",\"closeWallet\":\"SettingsForm_closeWallet__3HnaR\",\"dismiss\":\"SettingsForm_dismiss__36i3v\"};","module.exports = __webpack_public_path__ + \"static/media/logo.5575295b.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__31x5q\",\"footer\":\"App_footer__2CXQ2\",\"warning\":\"App_warning__20zto\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"Avatar_avatar__1VVPr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"history\":\"History_history__3m48Z\",\"emptyHistory\":\"History_emptyHistory__1EXwG\",\"historyDay\":\"History_historyDay__MS_O1\",\"historyDayHeader\":\"History_historyDayHeader__QQ7e6\",\"historyDayDate\":\"History_historyDayDate__3yrV-\",\"historyDayRows\":\"History_historyDayRows__16fnV\",\"tx\":\"History_tx__2fPJs\",\"txBody\":\"History_txBody__2Agvz\",\"transfer\":\"History_transfer__2KCQp\",\"transferLeft\":\"History_transferLeft__1M3ZX\",\"transferRight\":\"History_transferRight__291Rd\",\"transferKind\":\"History_transferKind__2_rsq\",\"transferDetails\":\"History_transferDetails__2--cR\",\"transferIcon\":\"History_transferIcon__3CLzM\",\"transferDescription\":\"History_transferDescription__1nIrR\",\"transferAddress\":\"History_transferAddress__13N9Z\",\"transferAddressOurs\":\"History_transferAddressOurs__2QuZW\",\"transferHelp\":\"History_transferHelp__QlVmn\",\"transferMessage\":\"History_transferMessage__3wR4k\",\"transferUnlockTime\":\"History_transferUnlockTime__12h5U\",\"transferAmount\":\"History_transferAmount__3HBML\",\"unlockedTransferContainer\":\"History_unlockedTransferContainer__1xP2t\",\"transferAmountLocked\":\"History_transferAmountLocked__iubWj\",\"transferAmountUnlocked\":\"History_transferAmountUnlocked__2IThK\",\"transferUnconfirmed\":\"History_transferUnconfirmed__2QYx5\",\"transferSendproof\":\"History_transferSendproof__3t8ZJ\",\"addressIcon\":\"History_addressIcon__3IPXL\",\"txDetails\":\"History_txDetails__2fFz9\",\"txMetadata\":\"History_txMetadata__26edo\",\"txBlockTime\":\"History_txBlockTime__34qQ0\",\"txHash\":\"History_txHash__3VJ4U\",\"txFee\":\"History_txFee__2frgk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wallet\":\"Wallet_wallet__dvihQ\"};"],"sourceRoot":""}